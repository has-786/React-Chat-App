{"version":3,"sources":["components/changePassword.js"],"names":["Copyright","variant","color","align","href","Date","getFullYear","toast","configure","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Changepassword","props","classes","token","localStorage","getItem","useState","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","otp","setOtp","receivedOtp","setReceivedOtp","secureAxios","axios","create","baseURL","url","headers","component","maxWidth","className","noValidate","required","fullWidth","id","label","name","autoComplete","value","onChange","evt","target","autoFocus","type","onClick","event","preventDefault","data","post","then","response","body","status","info","msg","autoClose","error","catch","err","console","log","length","success","history","push","container","item","xs","mt"],"mappings":"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","file":"static/js/24.0f13ee1b.chunk.js","sourcesContent":["import React,{useState} from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport url from '../url';\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright Â© '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Changepassword(props) {\r\n  const classes = useStyles();\r\n  const token=localStorage.getItem('token')\r\n\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n  const [confirmPassword,setConfirmPassword]=useState('')\r\n  const [otp,setOtp]=useState('')\r\n  const [receivedOtp,setReceivedOtp]=useState('')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n\r\n  \tconst changePassword=(event)=>{\r\n  \t\tevent.preventDefault();\r\n\r\n      if(otp!=receivedOtp){\r\n        toast.error('Incorrect OTP',{autoClose:1000}); return;\r\n      }\r\n\r\n      if(password.length<6){toast.error(\"Password length must be at least 6\",{autoClose:2000}); return; }\r\n\r\n      if(confirmPassword!=password){toast.error(\"Password and Confirm password don't match\",{autoClose:2000}); return; }\r\n\r\n  \t\tconst data={email,password};\r\n  \t\tsecureAxios.post('changePassword',data)\r\n      .then((response)=>{\r\n        const body=response.data\r\n        if(body.status==1){\r\n          toast.success('Password was changed successfully',{autoClose:2000})\r\n\r\n          props.history.push('/');\r\n        }\r\n        else toast.error('Something went wrong');\r\n  \t\t})\r\n      .catch(err=>{console.log(err); toast.error('Something went wrong');});\r\n   }\r\n\r\n\r\n\r\n  \tconst forgotPassword=(event)=>{\r\n    \t\tevent.preventDefault();\r\n    \t\tlet data={email};\r\n        //alert(secureAxios)\r\n        secureAxios.post('forgotPassword',data)\r\n        .then((response)=>{\r\n            const body=response.data\r\n            let receivedOtp=null;\r\n\r\n\r\n            if(body.status==1){toast.info(body.msg,{autoClose:1000});setReceivedOtp(body.otp);}\r\n            else toast.error(\"Something went wrong\",{autoClose:1000});\r\n\r\n    \t\t })\r\n         .catch(err=>{console.log(err); toast.error(\"Something went wrong\",{autoClose:1000});});\r\n    }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Change password\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            value={email}\r\n            onChange={(evt)=>setEmail(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.submit}\r\n            onClick={forgotPassword}\r\n          >\r\n            Send OTP\r\n          </Button>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"otp\"\r\n            label=\"Enter OTP\"\r\n            name=\"otp\"\r\n            value={otp}\r\n            onChange={(evt)=>setOtp(evt.target.value)}\r\n            autoFocus\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(evt)=>setPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Confirm password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={confirmPassword}\r\n            onChange={(evt)=>setConfirmPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={changePassword}\r\n            className={classes.submit}\r\n          >\r\n            Submit\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Back to Home\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n"],"sourceRoot":""}