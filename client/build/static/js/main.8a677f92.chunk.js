(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[0],{216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=a(20),s=a(8),l=a(13),u=a.n(l),j="",d=a(262),b=a(264),m=a(2),p=Object(d.a)((function(e){return{root:{marginTop:"50vh"}}}));function h(){var e=p();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)("center",{children:Object(m.jsx)(b.a,{})})})}var g=a(14);function x(e){var t=e.redirect;return Object(m.jsx)(g.a,{to:"/"+t})}var O=a(77),f=a.n(O),v=a(290),y=a(280),w=a(282),C=a(287),S=a(274),k=a(288),I=a(56),E=a(281),A=a(266),N=a(267),B=a(268),W=a(270),D=a(285),R=a(284),T=a(275),F=a(279),U=a(277),P=a(278),L=a(276),q=a(283),z=a(273),G=a(89),H=a.n(G),K=a(135),Y=a.n(K),M=a(136),V=a.n(M),J=a(99),Q=a.n(J),X=a(55),Z=a.n(X),$=(f()(),a(65)),_=a(130),ee=a.n(_),te=a(134),ae=a.n(te),ne=a(272),re=a(291),ce=a(289),oe=a(17),ie=a(269),se=a(271),le=a(131),ue=a.n(le),je=a(132),de=a.n(je),be=a(133),me=a.n(be),pe=240,he=Object(d.a)((function(e){return{root:{display:"flex"},drawer:Object($.a)({},e.breakpoints.up("sm"),{width:pe,flexShrink:0}),appBar:Object($.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(pe,"px)"),marginLeft:pe}),menuButton:Object($.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:pe},content:{flexGrow:1,padding:e.spacing(3)}}}));function ge(e){var t=e.window,a=void 0!==t?function(){return t().document.body}:void 0,c=he(),o=Object(oe.a)(),i=r.a.useState(!1),l=Object(s.a)(i,2),d=l[0],b=l[1],p=function(){b(!d)},h=Object(n.useState)([]),g=Object(s.a)(h,2),x=(g[0],g[1]),O=localStorage.getItem("token"),f=localStorage.getItem("name"),v=[["Home","/",ee.a],["Enter group","/enterroom",ue.a],["Create group","/newroom",H.a],["Sign out","/signin",de.a]],y=u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(O)}});Object(n.useEffect)((function(){y.get("getRooms").then((function(e){var t=e.data;x(t.latest)})).catch((function(t){e.history.push("/signin")}))}),[]);var w=Object(m.jsxs)("div",{children:[Object(m.jsx)("center",{children:Object(m.jsx)(me.a,{style:{color:"blue",width:"70px",height:"70px"}})}),Object(m.jsx)("center",{children:Object(m.jsx)("p",{children:f})}),Object(m.jsx)("div",{className:c.toolbar,style:{marginTop:"-60px"}}),Object(m.jsx)(A.a,{}),Object(m.jsx)(N.a,{children:v.map((function(t,a){return Object(m.jsxs)(B.a,{button:!0,onClick:function(){var a;"Sign out"===t[0]?(a=e.history.push,localStorage.removeItem("token"),a("/signin")):e.history.push(t[1])},children:[Object(m.jsx)(ie.a,{children:Object(n.createElement)(t[2],{})}),Object(m.jsx)(W.a,{primary:t[0]})]},t[0])}))})]});return Object(m.jsxs)("div",{style:{marginBottom:"5px"},children:[Object(m.jsx)(se.a,{position:"static",className:c.appBar,children:Object(m.jsxs)(ne.a,{children:[Object(m.jsx)(z.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:p,className:c.menuButton,children:Object(m.jsx)(ae.a,{})}),Object(m.jsx)(I.a,{variant:"h6",noWrap:!0,children:e.name})]})}),Object(m.jsxs)("nav",{className:c.drawer,"aria-label":"mailbox folders",children:[Object(m.jsx)(ce.a,{smUp:!0,implementation:"css",children:Object(m.jsx)(re.a,{container:a,variant:"temporary",anchor:"rtl"===o.direction?"right":"left",open:d,onClose:p,classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0},children:w})}),Object(m.jsx)(ce.a,{xsDown:!0,implementation:"css",children:Object(m.jsx)(re.a,{classes:{paper:c.drawerPaper},variant:"permanent",open:!0,children:w})})]})]})}var xe=Object(d.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Oe(){return Object(m.jsxs)(I.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(S.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var fe,ve=a(16),ye=a.n(ve),we=a(38),Ce=a(32),Se=a(140),ke=a(137),Ie=a(138),Ee=a.n(Ie),Ae=(a(216),new TextDecoder),Ne=new TextEncoder,Be=function(){var e=Object(we.a)(ye.a.mark((function e(t,a,n,r,c){var o,i,s=arguments;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>5&&void 0!==s[5]?s[5]:"AES-CBC",e.next=3,window.crypto.subtle.importKey("raw",Ne.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);case 3:return i=e.sent,e.next=6,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:Ne.encode(a),iterations:n,hash:c},i,{name:o,length:r},!1,["encrypt","decrypt"]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),We=function(e,t,a){var n;console.log(e),n=e,e=Uint8Array.from(atob(n),(function(e){return e.charCodeAt(0)})),console.log(e);return console.log(a),console.log(t),Object(we.a)(ye.a.mark((function n(){var r,c;return ye.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Be("my password",t,1e5,256,"SHA-256");case 2:return r=n.sent,n.next=5,window.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r,e.slice(32));case 5:return c=n.sent,console.log(c),n.abrupt("return",Ae.decode(c));case 8:case"end":return n.stop()}}),n)})))()},De=new TextEncoder,Re=function(){var e=Object(we.a)(ye.a.mark((function e(t,a,n,r,c){var o,i=arguments;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>5&&void 0!==i[5]?i[5]:"AES-CBC",e.next=3,window.crypto.subtle.importKey("raw",De.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);case 3:return fe=e.sent,e.next=6,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:De.encode(a),iterations:n,hash:c},fe,{name:o,length:r},!1,["encrypt","decrypt"]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),Te=function(e,t,a){return console.log("salt "+t+" iv "+a),console.log(e),e=De.encode(e),console.log(e),Object(we.a)(ye.a.mark((function n(){var r,c,o;return ye.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Re("my password",t,1e5,256,"SHA-256");case 2:return r=n.sent,n.next=5,window.crypto.subtle.encrypt({name:"AES-CBC",iv:a},r,e);case 5:return c=n.sent,console.log("Encrypted ".concat(c)),i=[].concat(Object(Ce.a)(t),Object(Ce.a)(a),Object(Ce.a)(new Uint8Array(c))),o=btoa(String.fromCharCode.apply(String,Object(Ce.a)(new Uint8Array(i)))),console.log("concatennated ".concat(o)),n.abrupt("return",o);case 10:case"end":return n.stop()}var i}),n)})))()},Fe=void 0,Ue=Object(d.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},heading:{textAlign:"justifyContent"},footer:{float:"right"},messageBox:{display:"flex",flexWrap:"wrap",backgroundColor:"beige",flexBasis:"100%"},main:{backgroundColor:"beige",height:"100%",paddingTop:"70px"},container:{width:"300px",margin:"auto",minHeight:"70vh",padding:"2px",borderRadius:"10px",border:"2px solid pink"},msgs:{width:"250px",marginBottom:"10px"},sendbox:{width:"100%"},download:{marginRight:"-15px",color:"white"}}),Pe=function(e){var t=localStorage.getItem("email"),a=localStorage.getItem("name"),r=new Audio("../incoming.mp3"),c=Ue(),o=Object(n.useState)([]),l=Object(s.a)(o,2),d=l[0],p=l[1],h=Object(n.useState)(e.match.params.room),g=Object(s.a)(h,2),x=g[0],O=(g[1],Object(n.useState)("")),v=Object(s.a)(O,2),y=v[0],w=v[1],C=Object(n.useState)(!1),S=Object(s.a)(C,2),k=(S[0],S[1],f()()),I=localStorage.getItem("token"),E=u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(I)}});Object(n.useEffect)((function(){return k.emit("create",x),k.emit("new-user-joined",a,x),function(e){E.post("getMessages",{room:e}).then((function(e){var t=e.data;if(1==t.status){function a(){return n.apply(this,arguments)}function n(){return(n=Object(we.a)(ye.a.mark((function e(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.a)(ye.a.mark((function e(){var a,n,r;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.msgs,n=ye.a.mark((function e(t){var n;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a[t],console.log("salt "+n.salt),console.log("iv "+n.iv),console.log(n),n.path){e.next=11;break}return n.salt=new Uint8Array(n.salt),n.iv=new Uint8Array(n.iv),e.next=9,We(n.message,n.salt,n.iv).then((function(e){n.message=e,p((function(e){return[].concat(Object(Ce.a)(e),[n])}))}));case 9:e.next=12;break;case 11:p((function(e){return[].concat(Object(Ce.a)(e),[n])}));case 12:case"end":return e.stop()}}),e)})),r=0;case 3:if(!(r<a.length)){e.next=8;break}return e.delegateYield(n(r),"t0",5);case 5:r++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})))();case 2:window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(t.msgs.slice(t.msgs.length-10,t.msgs.length)),a()}})).catch((function(e){}))}(x),k.on("user-joined",(function(e){})),k.on("user-left",(function(e){alert("".concat(e," left from group ").concat(x))})),k.on("receive",(function(e){console.log("received"),console.log(e.salt,e.iv),e.salt=new Uint8Array(e.salt),e.iv=new Uint8Array(e.iv),e.path?(p((function(t){return[].concat(Object(Ce.a)(t),[e])})),setTimeout((function(){return window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"})}),500)):We(e.message,e.salt,e.iv).then((function(t){e.message=t,p((function(t){return[].concat(Object(Ce.a)(t),[e])})),window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"})})),t!==e.email&&r.play()})),function(){k.disconnect()}}),[]);function A(){return(A=Object(we.a)(ye.a.mark((function e(){var n,r,c,o,i,s,l;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("loader").style.display="block",n=document.getElementById("file-input").files[0],document.getElementById("file-input").value){e.next=4;break}return e.abrupt("return");case 4:if(document.getElementById("file-input").value="",r=(new Date).getHours(),c=(new Date).getMinutes(),r=0==parseInt(r/10)?"0"+r:r,c=0==parseInt(c/10)?"0"+c:c,o=r+":"+c,i=2,(n.name.toLowerCase().includes(".jpg")||n.name.toLowerCase().includes(".png"))&&(i=1),1!=i){e.next=17;break}s={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},Object(ke.a)(n,s).then((function(e){k.emit("send",{flag:i,email:t,room:x,name:a,path:n.name,img:e,time:o}),document.getElementById("loader").style.display="none"})).catch((function(e){alert(e.message),console.log(e.message)})),e.next=22;break;case 17:return(l=new FileReader).readAsDataURL(n),e.next=21,function(){var e=l.result.replace(/^data:.+;base64,/,"");k.emit("send",{flag:i,email:t,room:x,name:a,path:n.name,img:e,time:o}),document.getElementById("loader").style.display="none"};case 21:l.onloadend=e.sent;case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N={backgroundColor:"blue",color:"white",marginLeft:"auto"};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{position:"fixed",width:"100%"},children:[Object(m.jsx)(ge,Object(i.a)({name:x},e)),Object(m.jsx)("center",{children:Object(m.jsx)(b.a,{id:"loader",style:{color:"lightgreen",marginTop:"100px",display:"none"}})})]}),Object(m.jsxs)("div",{class:c.main,children:[Object(m.jsx)("div",{class:c.container,id:"container",children:Object(m.jsx)("div",{id:"messages",class:c.messageBox,children:d.map((function(e,a){var n=t===e.email?N:{};return Object(m.jsx)(Se.a,{elevation:3,className:c.msgs,style:n,children:0==e.flag?Object(m.jsxs)("div",{style:{padding:"10px"},children:[Object(m.jsx)("b",{children:e.name}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:e.message}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{style:{float:"right"},children:e.time})]}):1==e.flag?Object(m.jsxs)("div",{style:{padding:"10px"},children:[Object(m.jsx)("b",{children:e.name}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:Object(m.jsx)("img",{src:"/uploads/".concat(e.path,"/").concat(I),height:"100%",width:"100%"})}),Object(m.jsx)("span",{style:{float:"right"},children:e.time})]}):Object(m.jsxs)("div",{style:{padding:"10px"},children:[Object(m.jsx)("b",{children:e.name}),Object(m.jsx)("br",{}),Object(m.jsxs)("video",{width:"100%",height:"100%",controls:!0,children:[Object(m.jsx)("source",{src:"/uploads/"+e.path,type:"video/mp4"}),Object(m.jsx)("source",{src:"/uploads/"+e.path,type:"video/ogg"})]}),Object(m.jsx)("span",{style:{float:"right"},children:e.time})]})})}))})}),Object(m.jsxs)("center",{children:[Object(m.jsxs)("div",{class:c.sendbox,children:[Object(m.jsx)("input",{type:"text",placeholder:"Type your message here",value:y,onChange:function(e){return w(e.target.value)},autoFocus:!0}),Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(e,a,n){if(""!==n){var r=(new Date).getHours(),c=(new Date).getMinutes(),o=(r=0==parseInt(r/10)?"0"+r:r)+":"+(c=0==parseInt(c/10)?"0"+c:c),i=n;document.getElementById("loader").style.display="block";var s=window.crypto.getRandomValues(new Uint8Array(16)),l=window.crypto.getRandomValues(new Uint8Array(16));console.log(s,l),Te(i,s,l).then((function(n){console.log(n),k.emit("send",{flag:0,email:t,room:a,name:e,msg:n,salt:Object(Ce.a)(s),iv:Object(Ce.a)(l),time:o}),document.getElementById("loader").style.display="none",console.log("sent"),w("")}))}}.bind(Fe,a,x,y),children:"Send"})]}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{class:c.sendbox,children:[Object(m.jsx)("label",{for:"file-input",children:Object(m.jsx)(Ee.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(m.jsx)("input",{id:"file-input",type:"file",style:{display:"none"}}),Object(m.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){return A.apply(this,arguments)}.bind(Fe),children:"Send"})]})]})]})]})},Le=a(22),qe=a(286),ze=a(63),Ge=a.n(ze);function He(){return Object(m.jsxs)(I.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(Le.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var Ke=Object(d.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},tabLink:{display:"flex",alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ye(){return Object(m.jsxs)(I.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(Le.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var Me=Object(d.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var Ve=Object(d.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var Je,Qe,Xe=Object(d.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));o.a.render(Object(m.jsx)(Le.a,{children:Object(m.jsxs)(g.d,{children:[Object(m.jsx)(g.b,{exact:!0,path:"/",component:(Je=function(e){var t=this,a=xe(),c=Object(n.useState)([]),o=Object(s.a)(c,2),l=o[0],d=o[1],b=Object(n.useState)([]),p=Object(s.a)(b,2),h=p[0],g=p[1],x=r.a.useState(!1),O=Object(s.a)(x,2),f=O[0],S=O[1],I=r.a.useState(!1),G=Object(s.a)(I,2),K=G[0],M=G[1],J=r.a.useState(null),X=Object(s.a)(J,2),$=X[0],_=X[1],ee=r.a.useState(""),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],re=function(){_(null),S(!1)},ce=function(){_(null),M(!1)},oe=localStorage.getItem("token"),ie=u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(oe)}});Object(n.useEffect)((function(){ie.get("getRooms").then((function(e){var t=e.data;d(t.rooms),g(t.latest)})).catch((function(t){alert(t),e.history.push("/signin")}))}),[]);var se=function(t){ie.post("exitRoom",{room:t}).then((function(e){1==e.data.status?g(h.filter((function(e){return e!=t}))):alert("Something went wrong")})).catch((function(t){alert(t),e.history.push("/signin")}))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ge,Object(i.a)({name:"Home"},e)),Object(m.jsxs)(T.a,{open:f,onClose:re,"aria-labelledby":"form-dialog-title",children:[Object(m.jsxs)(L.a,{id:"form-dialog-title",children:["Edit password for group ",$]}),Object(m.jsxs)(U.a,{children:[Object(m.jsx)(P.a,{children:"Enter new password below"}),Object(m.jsx)(C.a,{autoFocus:!0,margin:"dense",id:"name",label:"Password",value:ae,onChange:function(e){return ne(e.target.value)},type:"password",fullWidth:!0})]}),Object(m.jsxs)(F.a,{children:[Object(m.jsx)(y.a,{onClick:re,color:"primary",children:"Cancel"}),Object(m.jsx)(y.a,{onClick:function(){var t;t=$,ie.post("editRoom",{room:t,newPassword:ae}).then((function(e){1==e.data.status?alert("Password updated successfully for room ".concat(t)):alert("Something went wrong")})).catch((function(t){alert(t),e.history.push("/signin")})),re()},color:"primary",children:"Confirm"})]})]}),Object(m.jsxs)(T.a,{open:K,onClose:ce,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(L.a,{id:"alert-dialog-title",children:"Delete group"}),Object(m.jsx)(U.a,{children:Object(m.jsxs)(P.a,{id:"alert-dialog-description",children:["Are you sure want to delete group ",$]})}),Object(m.jsxs)(F.a,{children:[Object(m.jsx)(y.a,{onClick:ce,color:"primary",children:"No"}),Object(m.jsx)(y.a,{onClick:function(){var t;t=$,ie.post("deleteRoom",{room:t}).then((function(e){1==e.data.status?(g(h.filter((function(e){return e!=t}))),d(l.filter((function(e){return e!=t})))):alert("Something went wrong")})).catch((function(t){alert(t),e.history.push("/signin")})),ce()},color:"primary",autoFocus:!0,children:"Yes"})]})]}),Object(m.jsxs)(E.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(w.a,{}),Object(m.jsx)(q.a,{color:"primary",style:{height:"50px",width:"50px",float:"right"},"aria-label":"New Room",onClick:function(){return e.history.push("/newroom")},children:Object(m.jsx)(H.a,{})}),Object(m.jsx)(A.a,{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h6",{children:"My Groups"}),Object(m.jsx)(A.a,{}),Object(m.jsx)(N.a,{children:l.sort((function(e,t){return e<t?-1:1})).map((function(t,a){return Object(m.jsxs)(B.a,{button:!0,onClick:function(){return e.history.push("/chat/".concat(t))},children:[Object(m.jsx)(R.a,{children:Object(m.jsx)(v.a,{children:Object(m.jsx)(Z.a,{color:"primary"})})}),Object(m.jsx)(W.a,{primary:t}),Object(m.jsxs)(D.a,{children:[Object(m.jsx)(z.a,{edge:"end","aria-label":"delete",children:Object(m.jsx)(Y.a,{color:"primary",onClick:function(){_(t),S(!0)}})}),Object(m.jsx)(z.a,{edge:"end","aria-label":"delete",children:Object(m.jsx)(V.a,{color:"secondary",onClick:function(){_(t),M(!0)}})})]})]},t)}))}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("h6",{children:"All Groups"}),Object(m.jsx)(A.a,{}),Object(m.jsx)(N.a,{children:h.sort((function(e,t){return e<t?-1:1})).map((function(a,n){return Object(m.jsxs)(B.a,{button:!0,onClick:function(){return e.history.push("/chat/".concat(a))},children:[Object(m.jsx)(R.a,{children:Object(m.jsx)(v.a,{children:Object(m.jsx)(Z.a,{color:"primary"})})}),Object(m.jsx)(W.a,{primary:a}),Object(m.jsx)(D.a,{children:Object(m.jsx)(z.a,{edge:"end","aria-label":"delete",onClick:se.bind(t,a),children:Object(m.jsx)(Q.a,{color:"secondary"})})})]},a)}))})]}),Object(m.jsx)(k.a,{mt:8,className:a.footer,children:Object(m.jsx)(Oe,{})})]})]})},Qe=x,function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data,c(1)})).catch((function(e){c(2)}))})),0==r?Object(m.jsx)(h,{}):1==r?Object(m.jsx)(Je,Object(i.a)({},e)):Object(m.jsx)(Qe,{redirect:"signin"})})}),Object(m.jsx)(g.b,{path:"/signin",component:function(e){var t=Ke(),a=(localStorage.getItem("token"),Object(n.useState)("")),r=Object(s.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(""),l=Object(s.a)(i,2),j=l[0],d=l[1];return Object(m.jsxs)(E.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(w.a,{}),Object(m.jsxs)("div",{className:t.paper,children:[Object(m.jsx)(v.a,{className:t.avatar,children:Object(m.jsx)(Ge.a,{})}),Object(m.jsx)(I.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(m.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(m.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:c,onChange:function(e){return o(e.target.value)},autoFocus:!0}),Object(m.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:j,onChange:function(e){return d(e.target.value)},autoComplete:"current-password"}),Object(m.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){t.preventDefault();var a={email:c,pass:j};u.a.post("/localSignin",a).then((function(t){var a=t.data,n=null,r=null,c=null;alert(a.msg),1==a.status&&(n=a.email,r=a.name,c=a.token,localStorage.setItem("name",r),localStorage.setItem("email",n),localStorage.setItem("token",c),e.history.push("/"))})).catch((function(e){return console.log(e)}))},className:t.submit,children:"Sign In"}),Object(m.jsxs)(qe.a,{container:!0,children:[Object(m.jsx)(qe.a,{item:!0,xs:!0,children:Object(m.jsx)(Le.b,{href:"#",children:"Forgot password?"})}),Object(m.jsx)(qe.a,{item:!0,children:Object(m.jsx)(Le.b,{to:"/signup",variant:"body2",children:"Don't have an account?"})})]})]})]}),Object(m.jsx)(k.a,{mt:8,children:Object(m.jsx)(He,{})})]})}}),Object(m.jsx)(g.b,{path:"/signup",component:function(e){var t=Me(),a=(localStorage.getItem("token"),Object(n.useState)("")),r=Object(s.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(""),l=Object(s.a)(i,2),j=l[0],d=l[1],b=Object(n.useState)(""),p=Object(s.a)(b,2),h=p[0],g=p[1],x=Object(n.useState)(""),O=Object(s.a)(x,2),f=O[0],S=O[1],A=Object(n.useState)(""),N=Object(s.a)(A,2),B=N[0],W=N[1],D=Object(n.useState)(""),R=Object(s.a)(D,2),T=R[0],F=R[1];return Object(m.jsxs)(E.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(w.a,{}),Object(m.jsxs)("div",{className:t.paper,children:[Object(m.jsx)(v.a,{className:t.avatar,children:Object(m.jsx)(Ge.a,{})}),Object(m.jsx)(I.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(m.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(m.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Name",name:"name",value:c,onChange:function(e){return o(e.target.value)},autoFocus:!0}),Object(m.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:j,onChange:function(e){return d(e.target.value)},autoFocus:!0}),Object(m.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){e.preventDefault();var t={email:j};u.a.post("/emailverify",t).then((function(e){var t=e.data;alert(t.msg),1==t.status&&F(t.otp)})).catch((function(e){return console.log(e)}))},children:"Send OTP"}),Object(m.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"otp",label:"Enter OTP",name:"otp",value:B,onChange:function(e){return W(e.target.value)},autoFocus:!0}),Object(m.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:h,onChange:function(e){return g(e.target.value)},autoComplete:"current-password"}),Object(m.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:f,onChange:function(e){return S(e.target.value)},autoComplete:"current-password"}),Object(m.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){if(t.preventDefault(),B==T){f!=h&&alert("Password and Confirm password don't match");var a={name:c,email:j,pass:h};u.a.post("/localSignup",a).then((function(t){var a=t.data,n=null,r=null,c=null;alert(a.msg),1==a.status&&(n=a.email,r=a.name,c=a.token,localStorage.setItem("name",r),localStorage.setItem("email",n),localStorage.setItem("token",c),e.history.push("/"))})).catch((function(e){return console.log(e)}))}else alert("Incorrect OTP")},className:t.submit,children:"Sign Up"}),Object(m.jsxs)(qe.a,{container:!0,children:[Object(m.jsx)(qe.a,{item:!0,xs:!0,children:Object(m.jsx)(Le.b,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(m.jsx)(qe.a,{item:!0,children:Object(m.jsx)(Le.b,{to:"/signin",variant:"body2",children:"Already have an account?"})})]})]})]}),Object(m.jsx)(k.a,{mt:8,children:Object(m.jsx)(Ye,{})})]})}}),Object(m.jsx)(g.b,{path:"/enterroom",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(s.a)(r,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data;l(1)})).catch((function(e){l(2)}))})),0==o?Object(m.jsx)(h,{}):1==o?Object(m.jsx)(e,Object(i.a)({},a)):Object(m.jsx)(t,{redirect:"signin"})}}((function(e){var t=Xe(),a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1],l=Object(n.useState)(""),d=Object(s.a)(l,2),b=d[0],p=d[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ge,Object(i.a)({name:"Enter Group"},e)),Object(m.jsxs)(E.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(w.a,{}),Object(m.jsxs)("div",{className:t.paper,children:[Object(m.jsx)(v.a,{className:t.avatar,children:Object(m.jsx)(Z.a,{})}),Object(m.jsx)(I.a,{component:"h1",variant:"h5",children:"Enter Group"}),Object(m.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(m.jsxs)(qe.a,{container:!0,spacing:2,children:[Object(m.jsx)(qe.a,{item:!0,xs:12,children:Object(m.jsx)(C.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Group Name",name:"email",autoComplete:"email",value:c,onChange:function(e){return o(e.target.value)},autoFocus:!0})}),Object(m.jsx)(qe.a,{item:!0,xs:12,children:Object(m.jsx)(C.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:b,onChange:function(e){return p(e.target.value)},autoComplete:"current-password"})})]}),Object(m.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(t){t.preventDefault();var a=localStorage.getItem("token"),n=u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(a)}}),r={name:c,pass:b};n.post("enterroom",r).then((function(t){var a=t.data;1==a.status?e.history.push("/chat/".concat(c)):alert(a.msg)})).catch((function(t){alert(t),e.history.push("/signin")}))},children:"Enter"}),Object(m.jsx)(qe.a,{container:!0,children:Object(m.jsx)(qe.a,{item:!0,xs:!0,children:Object(m.jsx)(Le.b,{to:"/newroom",variant:"body2",children:"Create New Group"})})})]})]})]})]})}),x)}),Object(m.jsx)(g.b,{path:"/newroom",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(s.a)(r,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data;l(1)})).catch((function(e){l(2)}))})),0==o?Object(m.jsx)(h,{}):1==o?Object(m.jsx)(e,Object(i.a)({},a)):Object(m.jsx)(t,{redirect:"signin"})}}((function(e){var t=Ve(),a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1],l=Object(n.useState)(""),d=Object(s.a)(l,2),b=d[0],p=d[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ge,Object(i.a)({name:"Create Group"},e)),Object(m.jsxs)(E.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(w.a,{}),Object(m.jsxs)("div",{className:t.paper,children:[Object(m.jsx)(v.a,{className:t.avatar,children:Object(m.jsx)(Z.a,{})}),Object(m.jsx)(I.a,{component:"h1",variant:"h5",children:"Create Group"}),Object(m.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(m.jsxs)(qe.a,{container:!0,spacing:2,children:[Object(m.jsx)(qe.a,{item:!0,xs:12,children:Object(m.jsx)(C.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Group Name",name:"email",value:c,onChange:function(e){return o(e.target.value)},autoComplete:"email",autoFocus:!0})}),Object(m.jsx)(qe.a,{item:!0,xs:12,children:Object(m.jsx)(C.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:b,onChange:function(e){return p(e.target.value)},autoComplete:"current-password"})})]}),Object(m.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(t){t.preventDefault();var a=localStorage.getItem("token"),n=u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(a)}}),r={name:c,pass:b};n.post("newroom",r).then((function(t){var a=t.data;alert(a.msg),1==a.status&&e.history.push("/")})).catch((function(t){alert(t),e.history.push("/signin")}))},children:"Create"}),Object(m.jsx)(qe.a,{container:!0,children:Object(m.jsx)(qe.a,{item:!0,xs:!0,children:Object(m.jsx)(Le.b,{to:"/enterroom",variant:"body2",children:"Enter Already Existing Group"})})})]})]})]})]})}),x)}),Object(m.jsx)(g.b,{exact:!0,path:"/chat/:room",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(s.a)(r,2),o=c[0],l=c[1],d=Object(n.useState)("signin"),b=Object(s.a)(d,2),p=b[0],g=b[1],x=a.match.params.room;return Object(n.useEffect)((function(){var e=localStorage.getItem("token");u.a.create({baseURL:j,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data.latest.includes(x)?l(1):(g("enterroom"),l(2))})).catch((function(e){l(2)}))}),[]),0==o?Object(m.jsx)(h,{}):1==o?Object(m.jsx)(e,Object(i.a)({},a)):Object(m.jsx)(t,{redirect:p})}}(Pe,x)})]})}),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.8a677f92.chunk.js.map