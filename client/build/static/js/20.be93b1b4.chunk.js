(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[20],{169:function(e,t,a){"use strict";a.d(t,"a",(function(){return ae}));var n=a(5),r=a(3),c=a(47),o=a(0),i=a.n(o),s=a(4),l=a(203),j=a.n(l),u=a(143),d=a.n(u),b=a(154),p=a.n(b),h=a(221),O=a(355),x=a(374),m=a(113),f=a(139),g=a(344),y=a(345),w=a(346),v=a(348),C=a(347),k=a(220),S=a(222),N=a(201),R=a.n(N),_=a(202),P=a.n(_),B=a(174),U=a.n(B),L=a(171),z=a.n(L),E=a(190),J=a.n(E),T=a(181),A=a.n(T),D=a(132),W=a.n(D),F=a(204),I=a.n(F),M=a(350),G=a(372),H=a(354),q=a(371),K=a(343),Q=a(8),V=a.n(Q),X=a(9),Y=a(126),Z=(a(125),a(2));Y.a.configure();var $=240,ee=Object(m.a)((function(e){return{root:{display:"flex"},searchBar:{position:"relative"},drawer:Object(c.a)({},e.breakpoints.up("sm"),{width:$,flexShrink:0}),appBar:Object(c.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat($,"px)"),marginLeft:$}),menuButton:Object(c.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:$},content:{flexGrow:1,padding:e.spacing(3)}}})),te=i.a.forwardRef((function(e,t){return Object(Z.jsx)(K.a,Object(r.a)({direction:"up",ref:t},e))}));function ae(e){var t=e.window,a=void 0!==t?function(){return t().document.body}:void 0,r=ee(),c=(Object(f.a)(),i.a.useState(!1)),l=Object(n.a)(c,2),u=l[0],b=l[1],m=Object(s.b)(),N=function(){e.match.params.room?e.history.push("/"):b(!u)},_=Object(o.useState)([]),B=Object(n.a)(_,2),L=(B[0],B[1],i.a.useState(!1)),E=Object(n.a)(L,2),T=E[0],D=E[1],F=i.a.useState(""),K=Object(n.a)(F,2),Q=(K[0],K[1],i.a.useState([])),$=Object(n.a)(Q,2),ae=$[0],ne=$[1],re=localStorage.getItem("token"),ce=V.a.create({baseURL:X.a,headers:{Authorization:"bearer ".concat(re)}}),oe=function(){D(!1)};var ie=function(e,t){var a;return function(){var n=arguments,r=this;clearTimeout(a),a=setTimeout((function(){e.apply(r,n)}),t)}}((function(e){e.preventDefault(),ce.post("searchPeople",{searchstring:e.target.value}).then((function(e){var t=e.data;t.status?ne(t.users):Y.a.error("Something went wrong",{autoComplete:1500})}))}),300),se=Object(s.c)((function(e){return e.userReducer.email})),le=Object(s.c)((function(e){return e.userReducer.name}));le&&se||V.a.create({baseURL:X.a,headers:{Authorization:"bearer ".concat(re)}}).get("getUser").then((function(e){var t=e.data;m({type:"load_user",payload:t})})).catch((function(e){return Y.a.error(e)}));var je=[["Friends","/friends",z.a],["Chats","/chats",J.a],["Groups","/groups",W.a],["Enter group","/enterroom",R.a],["Create group","/newroom",d.a],["Sign out","/signin",P.a]],ue=Object(Z.jsxs)("div",{children:[Object(Z.jsx)("center",{children:Object(Z.jsx)(U.a,{style:{borderColor:"#00008B",color:"lightgrey",width:"70px",height:"70px"}})}),Object(Z.jsx)("center",{children:Object(Z.jsx)("p",{children:le})}),Object(Z.jsx)("div",{className:r.toolbar,style:{marginTop:"-60px"}}),Object(Z.jsx)(g.a,{}),Object(Z.jsx)(y.a,{children:je.map((function(t,a){return Object(Z.jsxs)(w.a,{button:!0,onClick:function(){"Sign out"===t[0]?function(e,t){localStorage.removeItem("token"),t({type:"clear"}),e("/signin")}(e.history.push,m):e.history.push(t[1])},children:[Object(Z.jsx)(C.a,{style:{color:"#00008B"},children:Object(o.createElement)(t[2],{})}),Object(Z.jsx)(v.a,{primary:t[0]})]},t[0])}))})]});return Object(Z.jsxs)("div",{children:[Object(Z.jsxs)(M.a,{fullScreen:!0,open:T,onClose:oe,TransitionComponent:te,children:[Object(Z.jsx)(k.a,{className:r.searchBar,children:Object(Z.jsxs)(h.a,{children:[Object(Z.jsx)(S.a,{edge:"start",color:"inherit",onClick:oe,"aria-label":"close",children:Object(Z.jsx)(A.a,{})}),Object(Z.jsx)(q.a,{style:{backgroundColor:"white",borderRadius:"10px"},variant:"outlined",margin:"normal",fullWidth:!0,name:"search",label:"Search people",type:"text",onChange:function(e){e.preventDefault(),ie(e)},autoComplete:"current-password"})]})}),Object(Z.jsx)(y.a,{children:ae.map((function(t){return Object(Z.jsx)(w.a,{button:!0,children:Object(Z.jsx)(v.a,{primary:t.name,secondary:t.email,onClick:function(){return e.history.push("/profile/".concat(t.email,"-").concat(t.name))}})})}))})]}),Object(Z.jsx)(k.a,{position:"static",className:r.appBar,children:Object(Z.jsxs)(G.a,{style:{display:"flex"},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon tabs example",children:[Object(Z.jsx)(H.a,{icon:Object(Z.jsx)(j.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/")},"aria-label":"phone"}),Object(Z.jsx)(H.a,{icon:Object(Z.jsx)(J.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/chats")},"aria-label":"chat"}),Object(Z.jsx)(H.a,{icon:Object(Z.jsx)(W.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/groups")},"aria-label":"group"}),Object(Z.jsx)(H.a,{icon:Object(Z.jsx)(z.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/friends")},"aria-label":"person"}),Object(Z.jsx)(H.a,{icon:Object(Z.jsx)(I.a,{style:{color:"white"}}),onClick:function(){D(!0)},"aria-label":"search"}),Object(Z.jsx)(H.a,{icon:Object(Z.jsx)(p.a,{style:{color:"white"}}),"aria-label":"open drawer",edge:"start",onClick:N,className:r.menuButton})]})}),Object(Z.jsxs)("nav",{className:r.drawer,"aria-label":"mailbox folders",children:[Object(Z.jsx)(x.a,{smUp:!0,implementation:"css",children:Object(Z.jsx)(O.a,{container:a,variant:"temporary",anchor:"right",open:u,onClose:N,classes:{paper:r.drawerPaper},ModalProps:{keepMounted:!0},children:ue})}),Object(Z.jsx)(x.a,{xsDown:!0,implementation:"css",children:Object(Z.jsx)(O.a,{classes:{paper:r.drawerPaper},variant:"permanent",open:!0,children:ue})})]})]})}},363:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return G}));var n=a(47),r=a(3),c=a(5),o=a(0),i=a.n(o),s=a(4),l=a(46),j=a(113),u=a(35),d=a(364),b=a(365),p=a(367),h=a(368),O=a(369),x=a(378),m=a(222),f=a(349),g=a(34),y=a(314),w=a.n(y),v=a(315),C=a.n(v),k=a(312),S=a.n(k),N=a(313),R=a.n(N),_=a(143),P=a.n(_),B=a(303),U=a(344),L=a(316),z=a(366),E=a(304),J=a(305),T=a(169),A=a(9),D=a(8),W=a.n(D),F=a(126),I=(a(125),a(2));F.a.configure();var M=Object(j.a)((function(e){return{root:{maxWidth:500,margin:"auto"},media:{paddingTop:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:g.a[500]}}}));function G(e){var t=this,a=M(),j=i.a.useState(!1),g=Object(c.a)(j,2),y=g[0],v=g[1],k=i.a.useState(null),N=Object(c.a)(k,2),_=N[0],D=N[1],G=i.a.useState(0),H=Object(c.a)(G,2),q=H[0],K=H[1],Q=i.a.useState({}),V=Object(c.a)(Q,2),X=V[0],Y=V[1],Z=Object(s.c)((function(e){return e.userReducer.email})),$=function(){D(null)},ee=function(){v(!y)},te=localStorage.getItem("token"),ae=Object(s.b)(),ne=Object(s.c)((function(e){return e.postReducer.exist})),re=Object(s.c)((function(e){return e.postReducer.post})),ce=function(e){if(X[e]){var t=JSON.parse(JSON.stringify(X));t[e]=!1,Y(t)}else{var a=JSON.parse(JSON.stringify(X));a[e]=!0,Y(a)}};Object(o.useEffect)((function(){(console.log(re),ne)||W.a.create({baseURL:A.a,headers:{Authorization:"bearer ".concat(te)}}).get("getPost").then((function(t){var a=t.data;1==a.status?(ae({type:"load_post",payload:a.post}),e.history.replace("/")):F.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return F.a.error("Something went wrong",{autoClose:1e3})}))}),[]);var oe=function(e){var t=re[e]._id;ae({type:"hide_post",payload:t}),$()},ie=function(t,a){var n=re[a]._id;W.a.create({baseURL:A.a,headers:{Authorization:"bearer ".concat(te)}}).post("deletePost",{email:t,_id:n}).then((function(t){1==t.data.status?(ae({type:"hide_post",payload:n}),F.a.success("Post was deleted",{autoClose:1500}),e.history.replace("/")):F.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return F.a.error("Something went wrong",{autoClose:1e3})})),$()},se=function(t,a,n){W.a.create({baseURL:A.a,headers:{Authorization:"bearer ".concat(te)}}).post("likePost",{email:t,_id:a,liked:n}).then((function(t){1==t.data.status?(alert("liked"),ae({type:"like_post",payload:{_id:a,liked:n}}),e.history.replace("/")):F.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return F.a.error("Something went wrong",{autoClose:1e3})}))};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{style:{position:"fixed",width:"100%"},children:Object(I.jsx)(T.a,Object(r.a)({},e))}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{children:[Object(I.jsx)(B.a,{color:"primary",style:{height:"45px",width:"45px",float:"right"},"aria-label":"New Room",onClick:function(){return e.history.push("/uploadpost")},children:Object(I.jsx)(P.a,{})}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsx)(U.a,{}),Object(I.jsxs)(E.a,{component:"main",maxWidth:"xl",children:[Object(I.jsx)(J.a,{}),re.map((function(e,r){return Object(I.jsxs)(d.a,{className:a.root,children:[Object(I.jsx)(b.a,{avatar:Object(I.jsx)(x.a,{"aria-label":"recipe",className:a.avatar,children:e.uploaderName.split(" ").map((function(e){return e[0].toUpperCase()}))}),action:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(m.a,{"aria-label":"settings",children:Object(I.jsx)(S.a,{onClick:function(e){return function(e,t){K(t),D(e.currentTarget)}(e,r)}})}),Object(I.jsxs)(L.a,{id:"simple-menu",anchorEl:_,keepMounted:!0,open:Boolean(_),onClose:$,children:[Object(I.jsx)(z.a,{onClick:oe.bind(t,q),children:"Hide"}),Z===re[q].uploaderEmail?Object(I.jsx)(z.a,{onClick:ie.bind(t,Z,q),children:"Delete"}):null]})]}),title:e.uploaderName,subheader:e.date}),Object(I.jsx)(p.a,{children:Object(I.jsxs)(f.a,{paragraph:!0,children:[e.desc.split(" ").length<=30||X[r]?e.desc:e.desc.split(" ").slice(0,30).join(" "),"\xa0\xa0",e.desc.split(" ").length>30?Object(I.jsx)(l.b,{style:{textDecoration:"none",fontSize:"15px"},onClick:ce.bind(t,r),children:X[r]?"read less":"read more"}):null]})}),Object(I.jsx)("img",{src:"".concat(A.a,"/uploads/").concat(e.path,"/").concat(te),width:"100%",height:"100%"}),Object(I.jsx)(p.a,{children:Object(I.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p"})}),Object(I.jsxs)(h.a,{disableSpacing:!0,children:[Object(I.jsx)(m.a,{"aria-label":"add to favorites",children:Object(I.jsx)(R.a,{onClick:se.bind(t,Z,e._id,e.liked),color:e.liked?"Primary":""})})," ",e.likeCount,Object(I.jsx)(m.a,{"aria-label":"share",children:Object(I.jsx)(w.a,{})}),Object(I.jsx)(m.a,{className:Object(u.a)(a.expand,Object(n.a)({},a.expandOpen,y)),onClick:ee,"aria-expanded":y,"aria-label":"show more",children:Object(I.jsx)(C.a,{})})]}),Object(I.jsx)(O.a,{in:y,timeout:"auto",unmountOnExit:!0,children:Object(I.jsx)(p.a,{children:Object(I.jsx)(f.a,{paragraph:!0,children:e.comment.map((function(e){}))})})})]})}))]})]})]})}}}]);
//# sourceMappingURL=20.be93b1b4.chunk.js.map