{"version":3,"sources":["url.js","components/loading.js","Auth/AuthRedirect.js","socketurl.js","components/header.js","components/chats.js","components/header2.js","crypto/decrypt.js","crypto/encrypt.js","components/chatting.js","components/profile.js","components/friends.js","components/signin.js","components/signup.js","components/newroom.js","components/enterroom.js","components/changePassword.js","components/posts.js","components/uploadpost.js","Auth/AuthenticatedPosts.js","configReducer.js","configStore.js","index.js","Auth/AuthenticatedChats.js","Auth/AuthenticatedEnterroom.js","Auth/AuthenticatedNewroom.js","Auth/AuthenticatedProfile.js","Auth/AuthenticatedFriends.js","Auth/AuthenticatedChatting.js","Auth/AuthenticatedPersonalChatting.js"],"names":["url","useStyles","makeStyles","theme","root","marginTop","Loading","classes","className","CircularProgress","Authredirect","redirect","to","io","toast","configure","drawerWidth","display","searchBar","position","drawer","breakpoints","up","width","flexShrink","appBar","marginLeft","menuButton","marginRight","spacing","toolbar","mixins","drawerPaper","content","flexGrow","padding","Transition","React","forwardRef","props","ref","Slide","direction","Header","window","container","undefined","document","body","useTheme","useState","mobileOpen","setMobileOpen","dispatch","useDispatch","handleDrawerToggle","match","params","room","history","push","openSearch","setOpenSearch","searchstring","setSearchstring","searchList","setSearchList","token","localStorage","getItem","secureAxios","axios","create","baseURL","headers","handleCloseSearch","email","useSelector","state","userReducer","name","get","then","response","data","type","payload","catch","err","error","menulist","AccountCircleIcon","ChatIcon","DirectionsRunIcon","AddIcon","ExitToAppIcon","style","borderColor","color","height","Divider","List","map","items","index","ListItem","button","onClick","removeItem","signout","ListItemIcon","createElement","ListItemText","primary","Dialog","fullScreen","open","onClose","TransitionComponent","AppBar","Toolbar","IconButton","edge","aria-label","TextField","backgroundColor","borderRadius","variant","margin","fullWidth","label","value","onChange","evt","preventDefault","target","post","status","users","autoComplete","user","secondary","Tabs","indicatorColor","textColor","Tab","icon","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","keepMounted","xsDown","title","flex","flexDirection","alignItems","avatar","palette","main","form","submit","Copyright","Typography","align","Link","href","Date","getFullYear","Header2","goBack","keyMaterial","decoder","TextDecoder","encoder","TextEncoder","PBKDF2","password","salt","iterations","length","hash","a","algorithm","crypto","subtle","importKey","encode","deriveKey","decryptFun","encrypted","iv","buffer","console","log","Uint8Array","from","atob","c","charCodeAt","key","decrypt","slice","salt_len","decrypted","decode","encryptFun","text","encrypt","concatennated","btoa","String","fromCharCode","green","minWidth","bullet","transform","fontSize","pos","marginBottom","heading","textAlign","footer","float","paging","messageBox","flexWrap","paddingTop","minHeight","msgs","sendbox","download","Chatting","audio","Audio","chat","chatReducer","roomName","message","setMessage","page","setPage","olderMsgs","setOlderMsgs","useRef","socket","transports","socketConnections","emit","on","getElementById","msg","setTimeout","scrollTo","top","scrollHeight","behaviour","current","focus","path","split","play","getMessages","i","parseInt","end","setData","useEffect","disconnect","file","files","h","getHours","m","getMinutes","time","flag","includes","options","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","img","alert","reader","FileReader","readAsDataURL","b64","result","replace","onloadend","rightStyle","id","class","Paper","elevation","bind","s","includeStyle","src","controls","placeholder","autoFocus","getRandomValues","join","for","cursor","connect","profile","option","red","tabLink","justifyContent","maxWidth","media","expand","transition","transitions","duration","shortest","expandOpen","Posts","reducer","combineReducers","groupReducer","rooms","latest","exist","action","filter","l","r","newState","JSON","parse","stringify","friendReducer","pendings","friends","sent","p","concat","profileReducer","startReducer","postReducer","newPost","reverse","_id","liked","likeCount","temp","store","createStore","applyMiddleware","thunk","ReactDom","render","exact","component","expanded","setExpanded","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","handleExpandClick","posts","autoClose","hidePost","indexOf","find","deletePost","success","likePost","Fab","Card","CardHeader","Avatar","uploaderName","word","toUpperCase","Boolean","MenuItem","uploaderEmail","subheader","date","CardContent","desc","CardActions","disableSpacing","clsx","aria-expanded","Collapse","in","timeout","unmountOnExit","paragraph","auth","setAuth","Chats","Authenticatedchats","setOpen","openDel","setOpenDel","edit","setEdit","newPassword","setNewPassword","handleCloseDel","exitRoom","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","aria-describedby","Container","CssBaseline","sort","b","ListItemAvatar","ListItemSecondaryAction","Box","mt","setEmail","setPassword","noValidate","required","pass","setItem","Grid","item","xs","setName","confirmPassword","setConfirmPassword","otp","setOtp","receivedOtp","setReceivedOtp","info","Enterroom","Authenticatedenterroom","Newroom","Authenticatednewroom","Profile","Authenticatedprofile","setStatus","setOption","profileEmail","this","Friends","Authenticatedfriends","openAccept","setOpenAccept","setProfile","openDisconnect","setOpenDisconnect","disconnectStatus","setDisconnectStatus","handleCloseAccept","handleClickOpenDisconnect","handleCloseDisconnect","email1","email2","setRedirect","Authenticatedchatting","friendName","emails","f","AuthenticatedpersonalChatting","setDesc","days","dateObj","day","getUTCDate","month","getUTCMonth","year","getUTCFullYear","getTime","setAttribute","URL","createObjectURL"],"mappings":"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","file":"static/js/main.93dbe1c0.chunk.js","sourcesContent":["const url=''\r\nexport default url\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n      marginTop:'50vh'\r\n      },\r\n}));\r\n\r\nexport default function Loading() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n  );\r\n}\r\n","import {Redirect} from 'react-router-dom'\r\n\r\nexport default function Authredirect({redirect}){\r\n  return <Redirect to={'/'+redirect} />\r\n\r\n}\r\n","import io from 'socket.io-client';\r\nconst socket = io();\r\nexport default socket\r\n","import React,{createElement,useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport InboxIcon from '@material-ui/icons/Inbox';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport DirectionsRunIcon from '@material-ui/icons/DirectionsRun';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport PersonPinIcon from '@material-ui/icons/PersonPin';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n    searchBar: {\r\n     position: 'relative',\r\n   },\r\n  drawer: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  appBar: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      marginLeft: drawerWidth,\r\n    },\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  }\r\n}));\r\n\r\n\r\n\r\nconst signout=(push,dispatch)=>\r\n{\r\n  localStorage.removeItem('token')\r\n  dispatch({type:'clear'})\r\n  push('/signin')\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n\r\nexport default function Header(props)\r\n{\r\n    const { window } = props;\r\n    const container = window !== undefined ? () => window().document.body : undefined;\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [mobileOpen, setMobileOpen] = React.useState(false);\r\n    const dispatch=useDispatch()\r\n\r\n\r\n\r\n     const handleDrawerToggle = () => {\r\n       (props.match.params.room)?props.history.push('/'):setMobileOpen(!mobileOpen);\r\n     };\r\n\r\n     const [latest,setLatest]=useState([])\r\n     const [openSearch, setOpenSearch] = React.useState(false);\r\n     const [searchstring, setSearchstring] = React.useState(\"\");\r\n     const [searchList, setSearchList] = React.useState([]);\r\n\r\n         const token=localStorage.getItem('token')\r\n\r\n         const secureAxios=axios.create(\r\n                               {\r\n                                baseURL:url,\r\n                                headers:{\r\n                                 \"Authorization\":`bearer ${token}`\r\n                               }\r\n                             })\r\n\r\n           const handleClickOpenSearch = () => {\r\n             setOpenSearch(true);\r\n           };\r\n\r\n           const handleCloseSearch = () => {\r\n             setOpenSearch(false);\r\n           };\r\n\r\n\r\n               const searching=(evt)=>{\r\n                 evt.preventDefault()\r\n                 setSearchstring(evt.target.value)\r\n\r\n                 secureAxios.post('searchPeople',{searchstring})\r\n                 .then(response=>{\r\n                     const body=response.data\r\n                     if(body.status)setSearchList(body.users)\r\n                     else toast.error('Something went wrong',{autoComplete:1500})\r\n                 })\r\n               }\r\n//alert(JSON.stringify(props))\r\n     const email=useSelector(state=>state.userReducer.email)\r\n     const name=useSelector(state=>state.userReducer.name)\r\n\r\n    if(!name || !email)\r\n     {\r\n       const secureAxios=axios.create(\r\n                             {\r\n                              baseURL:url,\r\n                              headers:{\r\n                               \"Authorization\":`bearer ${token}`\r\n                             }\r\n                           })\r\n\r\n        secureAxios.get('getUser')\r\n        .then((response)=>{\r\n                              const body=response.data\r\n                              dispatch({type:'load_user',payload:body})\r\n        })\r\n        .catch(err=>toast.error(err))\r\n     }\r\n     const menulist=[['Friends','/friends',AccountCircleIcon],['Chats','/chats',ChatIcon],['Enter group','/enterroom',DirectionsRunIcon],['Create group','/newroom',AddIcon],['Sign out','/signin',ExitToAppIcon]]\r\n\r\n\r\n     const drawer = (\r\n       <div>\r\n       <center>{<AccountCircleIcon style={{borderColor:'#00008B',color:'lightgrey',width:'70px',height:'70px'}}/>}</center>\r\n       <center><p>{name}</p></center>\r\n        <div className={classes.toolbar} style={{marginTop:'-60px'}}/>\r\n         <Divider />\r\n         <List>\r\n           {menulist.map((items, index) => (\r\n             <ListItem button key={items[0]} onClick={()=>{(items[0]==='Sign out')?signout(props.history.push,dispatch):props.history.push(items[1])}}>\r\n               <ListItemIcon style={{color:'#00008B'}}>{createElement(items[2], {})}</ListItemIcon>\r\n               <ListItemText primary={items[0]} />\r\n             </ListItem>\r\n           ))}\r\n         </List>\r\n       </div>\r\n     );\r\n\r\n  return <div >\r\n     <Dialog fullScreen open={openSearch} onClose={handleCloseSearch} TransitionComponent={Transition}>\r\n       <AppBar className={classes.searchBar}>\r\n        <Toolbar>\r\n         <IconButton edge=\"start\" color=\"inherit\" onClick={handleCloseSearch} aria-label=\"close\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n          <TextField\r\n            style={{backgroundColor:'white',borderRadius:'10px'}}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            name=\"search\"\r\n            label='Search people'\r\n            type=\"text\"\r\n            value={searchstring}\r\n            onChange={searching}\r\n            autoComplete=\"current-password\"\r\n          />\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <List>\r\n      {\r\n        searchList.map(user=>{\r\n            return <ListItem button>\r\n              <ListItemText primary={user.name} secondary={user.email} onClick={()=>props.history.push(`/profile/${user.email}-${user.name}`)}/>\r\n            </ListItem>\r\n        })\r\n      }\r\n      </List>\r\n      </Dialog>\r\n  <AppBar position=\"static\" className={classes.appBar}>\r\n    <Tabs\r\n    style={{display:'flex'}}\r\n    variant=\"fullWidth\"\r\n    indicatorColor=\"primary\"\r\n    textColor=\"primary\"\r\n    aria-label=\"icon tabs example\"\r\n   >\r\n      <Tab icon={<HomeIcon style={{color:'white'}}/>}  onClick={()=>props.history.push('/')} aria-label=\"phone\" />\r\n      <Tab icon={<ChatIcon style={{color:'white'}}/>}  onClick={()=>props.history.push('/chats')} aria-label=\"favorite\" />\r\n      <Tab icon={<AccountBoxIcon style={{color:'white'}}/>}  onClick={()=>props.history.push('/friends')} aria-label=\"person\" />\r\n      <Tab icon={<SearchIcon style={{color:'white'}}/>}  onClick={handleClickOpenSearch} aria-label=\"search\" />\r\n      <Tab icon={<MenuIcon style={{color:'white'}}/>}\r\n        aria-label=\"open drawer\"\r\n        edge=\"start\"\r\n        onClick={handleDrawerToggle}\r\n        className={classes.menuButton}\r\n      />\r\n    </Tabs>\r\n\r\n  </AppBar>\r\n  <nav className={classes.drawer}  aria-label=\"mailbox folders\">\r\n    {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n    <Hidden smUp implementation=\"css\">\r\n      <Drawer\r\n        container={container}\r\n        variant=\"temporary\"\r\n        anchor={'right'}\r\n        open={mobileOpen}\r\n        onClose={handleDrawerToggle}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n        ModalProps={{\r\n          keepMounted: true, // Better open performance on mobile.\r\n        }}\r\n      >\r\n        {drawer}\r\n      </Drawer>\r\n    </Hidden>\r\n    <Hidden xsDown implementation=\"css\">\r\n      <Drawer\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n        variant=\"permanent\"\r\n        open\r\n      >\r\n        {drawer}\r\n      </Drawer>\r\n    </Hidden>\r\n  </nav>\r\n  </div>\r\n\r\n\r\n\r\n}\r\n","import io from 'socket.io-client';\r\nimport React,{useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport socket from '../socketurl'\r\n\r\nimport Header from './header'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n   position: 'relative',\r\n },\r\n title: {\r\n   marginLeft: theme.spacing(2),\r\n   flex: 1,\r\n },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  main:{height:'100vh'}\r\n\r\n}));\r\n\r\n\r\n\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\n\r\nexport default function Chats(props) {\r\n\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n//  const [rooms,setRooms]=useState([])\r\n//  const [latest,setLatest]=useState([])\r\n  const [open, setOpen] = React.useState(false);\r\n  const [openDel, setOpenDel] = React.useState(false);\r\n  const [edit, setEdit] = React.useState(null);\r\n  const [newPassword, setNewPassword] = React.useState(\"\");\r\n  const [openSearch, setOpenSearch] = React.useState(false);\r\n  const [searchstring, setSearchstring] = React.useState(\"\");\r\n  const [searchList, setSearchList] = React.useState([]);\r\n\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setEdit(null)\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleClickOpenDel = () => {\r\n    setOpenDel(true);\r\n  };\r\n\r\n  const handleCloseDel = () => {\r\n    setEdit(null)\r\n    setOpenDel(false);\r\n  };\r\n\r\n\r\n  const token=localStorage.getItem('token')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  const name=useSelector(state=>state.userReducer.name)\r\n\r\n  useEffect(()=>{\r\n      if(exist)return;\r\n\r\n      secureAxios.get('getRooms')\r\n      .then((response)=>{\r\n            const body=response.data\r\n            //alert(body.status)\r\n            if(body.status==1){\r\n                dispatch({type:'load_group',payload:{latest:body.latest,rooms:body.rooms,exist:true}})\r\n                dispatch({type:'load_user',payload:{name:body.name,email:body.email}})\r\n            }\r\n      })\r\n      .catch(err=>{\r\n        alert(err)\r\n        props.history.push('/signin');\r\n      })\r\n\r\n  },[])\r\n\r\n\r\n  const editRoom=(room)=>{\r\n\r\n    secureAxios.post('editRoom',{room,newPassword})\r\n    .then((response)=>{\r\n\r\n          const body=response.data\r\n          if(body.status==1){toast.success(`Password updated successfully for room ${room}`); dispatch({type:'edit_group'}); }\r\n          else toast.error('Something went wrong')\r\n    })\r\n    .catch(err=>{\r\n      alert(err)\r\n      props.history.push('/signin');\r\n    })\r\n  }\r\n\r\n\r\n  const exitRoom=(room)=>{\r\n    secureAxios.post('exitRoom',{room})\r\n    .then((response)=>{\r\n          const body=response.data\r\n          if(body.status==1)\r\n            dispatch({type:'exit_group',payload:room})\r\n          else toast.error('Something went wrong')\r\n    })\r\n    .catch(err=>{\r\n      alert(err)\r\n      props.history.push('/signin')\r\n    })\r\n  }\r\n\r\n\r\n\r\n    const deleteRoom=(room)=>{\r\n      secureAxios.post('deleteRoom',{room})\r\n      .then((response)=>{\r\n            const body=response.data\r\n            if(body.status==1)\r\n              dispatch({type:'delete_my_group',payload:room})\r\n            else toast.error('Something went wrong')\r\n      })\r\n      .catch(err=>{\r\n        toast.error(err)\r\n        props.history.push('/signin')\r\n      })\r\n    }\r\n\r\n\r\n\r\n    const rooms=useSelector(state=>state.groupReducer.rooms)\r\n    const latest=useSelector(state=>state.groupReducer.latest)\r\n\r\n  return (\r\n    <div class={classes.main}>\r\n      <div style={{position:'fixed',width:'100%'}}>\r\n        <Header {...props}/>\r\n      </div>\r\n      <br /><br /><br />\r\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Edit password for group {edit}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Enter new password below\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Password\"\r\n            value={newPassword}\r\n            onChange={(evt)=>setNewPassword(evt.target.value)}\r\n            type=\"password\"\r\n            fullWidth\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={()=>{handleClose();  setNewPassword(\"\");}} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={()=>{editRoom(edit); handleClose();  setNewPassword(\"\");}} color=\"primary\">\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={openDel}\r\n        onClose={handleCloseDel}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">Delete group</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Are you sure want to delete group {edit}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDel} color=\"primary\">\r\n            No\r\n          </Button>\r\n          <Button onClick={()=>{deleteRoom(edit); handleCloseDel();}} color=\"primary\" autoFocus>\r\n            Yes\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Fab color=\"primary\" style={{height:'45px',width:'45px',float:'right'}}  aria-label=\"New Room\" onClick={()=>props.history.push('/newroom')}>\r\n            <AddIcon />\r\n      </Fab>\r\n      <br /><br />\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n\r\n      <div>\r\n      <h6>My Groups</h6>\r\n      <Divider />\r\n      <List>\r\n        {rooms?.sort((a,b)=>{return (a<b)?-1:1}).map((text, index) => (\r\n          <ListItem button key={text} onClick={()=>props.history.push(`/chat/${text}`)}>\r\n              <ListItemAvatar>\r\n                    <Avatar>\r\n                      <GroupIcon color=\"primary\" />\r\n                    </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText primary={text} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <EditIcon color='primary' onClick={()=>{setEdit(text);  handleClickOpen();}}/>\r\n                </IconButton>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <DeleteIcon color='secondary' onClick={()=>{setEdit(text);  handleClickOpenDel();}}/>\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <br /><br />\r\n      <h6>All Groups</h6>\r\n      <Divider />\r\n      <List>\r\n        {latest?.sort((a,b)=>{return (a<b)?-1:1}).map((text, index) => (\r\n          <ListItem button key={text} onClick={()=>props.history.push(`/chat/${text}`)}>\r\n              <ListItemAvatar>\r\n                    <Avatar>\r\n                      <GroupIcon color=\"primary\" />\r\n                    </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText primary={text} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\" onClick={exitRoom.bind(this,text)}>\r\n                    <MeetingRoomIcon color='secondary'  />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      </div>\r\n      <Box mt={8} className={classes.footer}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {withRouter} from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nexport default function Header2(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n            <ArrowBackIcon onClick={()=>props.history.goBack()}/>\r\n          </IconButton>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            {props.name}\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n","const decoder = new TextDecoder();\r\nconst encoder = new TextEncoder();\r\n\r\nconst fromBase64 = buffer =>\r\n  Uint8Array.from(atob(buffer), c => c.charCodeAt(0));\r\n\r\nconst PBKDF2 = async (\r\n  password, salt, iterations,\r\n  length, hash, algorithm =  'AES-CBC') => {\r\n\r\n  const keyMaterial = await window.crypto.subtle.importKey(\r\n    'raw',\r\n    encoder.encode(password),\r\n    {name: 'PBKDF2'},\r\n    false,\r\n    ['deriveKey']\r\n  );\r\n  return await window.crypto.subtle.deriveKey(\r\n    {\r\n      name: 'PBKDF2',\r\n      salt: encoder.encode(salt),\r\n      iterations,\r\n      hash\r\n    },\r\n    keyMaterial,\r\n    { name: algorithm, length },\r\n    false, // we don't need to export our key!!!\r\n    ['encrypt', 'decrypt']\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\nconst decryptFun=(encrypted,salt,iv)=>{\r\n //encrypted = fromBase64('g9cGh/FKtMV1LhnGvii6lBovkZihMw8CqHgwR7h64z25GXqNhzAdrOtUj6iaPXxQTP9pax1soyzwbFAoCQP1CQ==');\r\nconsole.log(encrypted)\r\nencrypted=fromBase64(encrypted)\r\nconsole.log(encrypted)\r\nconst salt_len =16;\r\nconst iv_len = 16;\r\nconsole.log(iv)\r\nconsole.log(salt)\r\n\r\nreturn (async ()=>{\r\n    const key=await  PBKDF2('my password', salt, 100000, 256, 'SHA-256');\r\n    const decrypted =await window.crypto.subtle.decrypt(\r\n             { name: \"AES-CBC\", iv },\r\n             key,\r\n             encrypted.slice(salt_len + iv_len)\r\n          );\r\n          console.log(decrypted)\r\n    return decoder.decode(decrypted)\r\n  })()\r\n\r\n}\r\n//console.log(decoder.decode(decrypted));\r\n\r\nexport default decryptFun\r\n","const encoder = new TextEncoder();\r\nlet keyMaterial\r\n\r\nconst toBase64 = buffer =>\r\n  btoa(String.fromCharCode(...new Uint8Array(buffer)));\r\n\r\nconst PBKDF2 = async (\r\n  password, salt, iterations,\r\n  length, hash, algorithm =  'AES-CBC') => {\r\n\r\n  keyMaterial = await window.crypto.subtle.importKey(\r\n    'raw',\r\n    encoder.encode(password),\r\n    {name: 'PBKDF2'},\r\n    false,\r\n    ['deriveKey']\r\n  );\r\n\r\n\r\n  return await window.crypto.subtle.deriveKey(\r\n      {\r\n        name: 'PBKDF2',\r\n        salt: encoder.encode(salt),\r\n        iterations,\r\n        hash\r\n      },\r\n      keyMaterial,\r\n      { name: algorithm, length },\r\n      false, // we don't need to export our key!!!\r\n      ['encrypt', 'decrypt']\r\n    );\r\n}\r\n\r\n\r\nconst encryptFun=(text,salt,iv)=>{\r\n\r\n  console.log(\"salt \"+salt+\" iv \"+iv)\r\n  console.log(text);\r\n  text=encoder.encode(text);\r\n\r\n  console.log(text);\r\n  return (async ()=>{\r\n               const key = await PBKDF2('my password', salt, 100000, 256, 'SHA-256');\r\n               let encrypted =await window.crypto.subtle.encrypt(\r\n                {name: \"AES-CBC\", iv },\r\n                key,\r\n                text\r\n              );\r\n              console.log(`Encrypted ${encrypted}`);\r\n\r\n              const concatennated=toBase64([...salt,...iv,...new Uint8Array(encrypted)])\r\n              console.log(`concatennated ${concatennated}`)\r\n              return concatennated;\r\n        })()\r\n\r\n}\r\n\r\nexport default encryptFun\r\n","import {React,useRef,useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport imageCompression from 'browser-image-compression';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport '../css/chat.css'\r\nimport Header2 from './header2'\r\nimport io from 'socket.io-client';\r\nimport decryptFun from '../crypto/decrypt'\r\nimport encryptFun from '../crypto/encrypt'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst green='#23D0E0'\r\n\r\nlet socket;\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minWidth: 275,\r\n  },\r\n  bullet: {\r\n    display: 'inline-block',\r\n    margin: '0 2px',\r\n    transform: 'scale(0.8)',\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n  heading:{\r\n    textAlign:'justifyContent'\r\n  },\r\n  footer:{\r\n    float:'right'\r\n  },\r\n  paging:{\r\n    margin:'auto',\r\n    backgroundColor:'beige',\r\n    color:'black',\r\n    marginBottom:'10px'\r\n  },\r\n  messageBox:{\r\n    display: 'flex',\r\n    width:'100%',\r\n    flexWrap: 'wrap',\r\n    backgroundColor:green,\r\n  },\r\n  main:{ backgroundColor:green,height:'100%',paddingTop:'70px',width:'100%'},\r\n  container:{\r\n    width:'300px',\r\n    margin:'auto',\r\n    minHeight:'70vh',\r\n    padding:'2px',\r\n    borderRadius:'10px',\r\n    },\r\n\r\n  msgs:{\r\n    width:'250px',\r\n    marginBottom:'10px',\r\n    backgroundColor:'#fffcb7',\r\n    color:'black'\r\n\r\n    //backgroundColor:'blue',color:'white',marginLeft:'auto'\r\n  },\r\n  sendbox:{\r\n    width:'100%'\r\n  },\r\n  download:{\r\n    marginRight:'-15px',\r\n    color:'white'\r\n  }\r\n});\r\n\r\n\r\n\r\nconst Chatting=(props)=>{\r\n\r\n  let audio=new Audio('../incoming.mp3')\r\n  const classes = useStyles();\r\n\r\n  const chat=useSelector(state=>state.chatReducer)\r\n  const dispatch=useDispatch();\r\n\r\n  let room=props.match.params.room;\r\n  const roomName=props.roomName;\r\n\r\n  const [message,setMessage]=useState(\"\");\r\n  const [flag,setFlag]=useState(false);\r\n  const [page,setPage]=useState(2);\r\n  const [olderMsgs,setOlderMsgs]=useState('block');\r\n  const sendbox=useRef(null)\r\n  const socket=io(url,{transports: ['websocket','polling']})\r\n  const token=localStorage.getItem('token')\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n\r\n\r\n    const email=useSelector(state=>state.userReducer.email)\r\n    const name=useSelector(state=>state.userReducer.name)\r\n\r\n    const socketConnections=(socket,name,email)=>{\r\n      socket.emit('create', room)\r\n      socket.emit('user-joined',name,room)\r\n      socket.on('receiveimg',data=>{\r\n              if(email===data.email)\r\n              {\r\n                    document.getElementById('loader').style.display='none';\r\n                    (async ()=>{\r\n                        dispatch({type:'add_chat',payload:{room,msg:data}})\r\n                        setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),500)\r\n                        sendbox.current.focus()\r\n                    })()\r\n               }\r\n        })\r\n\r\n\r\n      socket.on('receive',data=>{\r\n           if(email===data.email)return;\r\n            console.log('received');\r\n            (async ()=>{\r\n\r\n                    if(!data.path)\r\n                    {\r\n                                    data.salt=data.salt.split(\",\")\r\n                                    data.iv=data.iv.split(\",\")\r\n\r\n                                    data.salt= new Uint8Array(data.salt) // salt and\r\n                                    data.iv= new Uint8Array(data.iv)    //iv for decrypting the message\r\n\r\n                                    await decryptFun(data.message,data.salt,data.iv)\r\n                                    .then(decrypted=>{\r\n                                        data.message=decrypted;  // decrypt the received message\r\n                                    })\r\n                      }\r\n\r\n                      (async ()=>{\r\n                                  dispatch({type:'add_chat',payload:{room,msg:data}})\r\n                                  if(!data.path)window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'})\r\n                                  else setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),500)\r\n\r\n                                  sendbox.current.focus()\r\n                        })()\r\n\r\n                        audio.play();\r\n                })()\r\n          })\r\n\r\n    }\r\n\r\n\r\n    async function getMessages(page){\r\n\r\n      await  secureAxios.post('getMessages',{room,page})\r\n             .then((response)=>{\r\n              const body=response.data\r\n              if(body.status==1)\r\n              {\r\n                if(!body.end)setOlderMsgs('block')\r\n                else setOlderMsgs('none')\r\n\r\n                async function setData()\r\n                {\r\n                            if(page==1)\r\n                            {\r\n                                await secureAxios.get('getUser')\r\n                                    .then((response)=>{\r\n                                          const body=response.data\r\n                                              dispatch({type:'load_user',payload:body})\r\n                                              socketConnections(socket,body.name,body.email)\r\n                                     })\r\n                                     .catch(err=>toast.error(err))\r\n                             }\r\n\r\n\r\n                             await (async function(){\r\n                                  const msgs=body.msgs\r\n                                  for(let i=0;i<msgs.length;i++)\r\n                                  {\r\n                                        const data=msgs[i]\r\n\r\n                                        if(!data.path){\r\n                                          console.log(\"salt \"+data.salt)\r\n                                          console.log(\"iv \"+data.iv)\r\n                                          data.salt=data.salt.split(\",\")\r\n                                          data.iv=data.iv.split(\",\")\r\n                                          for(let i=0;i<data.salt.length;i++)data.salt[i]=parseInt(data.salt[i])\r\n                                          for(let i=0;i<data.iv.length;i++)data.iv[i]=parseInt(data.iv[i])\r\n\r\n                                          data.salt= new Uint8Array(data.salt) // salt and\r\n                                          data.iv= new Uint8Array(data.iv)    //iv for decrypting the message\r\n                                          await decryptFun(data.message,data.salt,data.iv)\r\n                                          .then(decrypted=>{\r\n                                                              data.message=decrypted;  // decrypt the received message\r\n                                           })\r\n                                        }\r\n                                     }\r\n                                     dispatch({type:'load_chat',payload:{room,msgs}})\r\n                            })()\r\n\r\n                            if(page==1)\r\n                            {\r\n                               setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),350)\r\n                            }\r\n                            setPage(page=>page+1)\r\n               }\r\n\r\n               setData();\r\n\r\n             }\r\n        })\r\n        .catch(err=>{})\r\n\r\n\r\n\r\n    }\r\n\r\n  useEffect(()=>{\r\n       if(chat[room])socketConnections(socket,name,email)\r\n       else getMessages(1)\r\n\r\n       return ()=>{ socket.disconnect();  }\r\n  },[])\r\n\r\n\r\n\r\n\r\n\r\n  const sendMessage=(name,room,msg)=>{\r\n\r\n    if(msg==='')return;\r\n    let h=new Date().getHours();\r\n    let m=new Date().getMinutes();\r\n    h=(parseInt(h/10)==0)?('0'+h):h;\r\n    m=(parseInt(m/10)==0)?('0'+m):m;\r\n    const time=h+\":\"+m;\r\n    var text = msg\r\n    document.getElementById('loader').style.display='block'\r\n\r\n    let salt = window.crypto.getRandomValues(new Uint8Array(16));\r\n    let iv = window.crypto.getRandomValues(new Uint8Array(16));\r\n    console.log(salt,iv);\r\n\r\n    (async ()=>{\r\n      await dispatch({type:'add_chat',payload:{room,msg:{flag:0,email,room,name,message:msg,time}}})\r\n      window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'})\r\n      sendbox.current.focus()\r\n    })()\r\n\r\n\r\n    encryptFun(text,salt,iv).then(encrypted=>{\r\n      console.log(encrypted)\r\n      salt=[...salt]\r\n      iv=[...iv]\r\n      salt=salt.join(\",\")\r\n      iv=iv.join(\",\")\r\n\r\n      socket.emit('send',{flag:0,email,room,name,msg:encrypted,salt,iv,time}); // setMsgs(msgs=>[...msgs,{name,message}]);\r\n      document.getElementById('loader').style.display='none'\r\n      console.log('sent')\r\n      setMessage(\"\");\r\n\r\n    })\r\n\r\n  }\r\n\r\n\r\n    async function sendFile(){\r\n      let file=document.getElementById('file-input').files[0];\r\n\r\n      if(!document.getElementById('file-input').value)return\r\n      document.getElementById('file-input').value=''\r\n      document.getElementById('loader').style.display='block'\r\n\r\n\r\n      let h=new Date().getHours();\r\n      let m=new Date().getMinutes();\r\n      h=(parseInt(h/10)==0)?('0'+h):h;\r\n      m=(parseInt(m/10)==0)?('0'+m):m;\r\n      const time=h+\":\"+m;\r\n\r\n      let flag=2;\r\n      if(file.type.includes('image'))flag=1;\r\n\r\n      if(flag==1)\r\n      {\r\n            let options = { maxSizeMB: 1,  maxWidthOrHeight: 1920,  useWebWorker: true }\r\n            imageCompression(file, options)\r\n            .then(function (compressedFile) {\r\n                socket.emit('send',{flag,email,room,name,path:file.name,img:compressedFile,time});\r\n            })\r\n            .catch(function (error) {alert(error.message); console.log(error.message);  });\r\n      }\r\n      else\r\n      {\r\n            let reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n          //  alert(document.getElementById('file-input').files[0].value)\r\n\r\n            reader.onloadend = await function () {\r\n              const b64 = reader.result.replace(/^data:.+;base64,/, '');\r\n              socket.emit('send',{flag,email,room,name,path:file.name,img:b64,time});\r\n\r\n            };\r\n       }\r\n  }\r\n const rightStyle={marginLeft:'auto'}\r\n const arriveStyle={backgroundColor:'beige',color:'green',margin:'auto auto 10px auto'}\r\n\r\n  return <>\r\n  <div style={{position:'fixed',width:'100%'}}>\r\n  <Header2 name={roomName} {...props}/>\r\n  <center><CircularProgress id='loader' style={{marginTop:'100px',display:'none'}}/></center>\r\n\r\n  </div>\r\n  <div class={classes.main} >\r\n        <div class={classes.container} id='container'>\r\n          <div id='messages' class={classes.messageBox}  >\r\n          <Paper elevation={3} className={classes.paging} style={{display:olderMsgs}} onClick={ getMessages.bind(this,page)}><button class='btn btn-sm' s>Older Messages</button></Paper>\r\n          {\r\n\r\n            (chat[room]!=undefined)?chat[room].map((msg,id)=>{\r\n              let includeStyle=(email===msg.email)?rightStyle:{};\r\n\r\n              return <Paper  elevation={3} className={classes.msgs} style={includeStyle} >\r\n              {(msg.flag==0)?\r\n\r\n               <div style={{padding:'10px'}}>\r\n                  <b>{msg.name}</b>\r\n                  <br />\r\n                  <span>{msg.message}</span>\r\n                  <br />\r\n                  <span style={{float:'right'}}>{msg.time}</span>\r\n                </div>\r\n                :(msg.flag==1)?\r\n                <div style={{padding:'10px'}}>\r\n                  <b>{msg.name}</b>\r\n                  <br />\r\n                  <span><img src={`/uploads/${msg.path}/${token}`} height='100%' width='100%' /></span>\r\n                  <span style={{float:'right'}}>{msg.time}</span>\r\n                 </div>\r\n                 :\r\n                 <div style={{padding:'10px'}}>\r\n                   <b>{msg.name}</b>\r\n                   <br />\r\n                   <video width=\"100%\" height=\"100%\" controls>\r\n                     <source src={url+'/uploads/'+msg.path} type=\"video/mp4\" />\r\n                     <source src={url+'/uploads/'+msg.path} type=\"video/ogg\" />\r\n                   </video>\r\n                   <span style={{float:'right'}}>{msg.time}</span>\r\n                  </div>\r\n              }\r\n              </Paper>\r\n            })\r\n            :\r\n            null\r\n          }\r\n          </div>\r\n         </div>\r\n         <center>\r\n             <div class={classes.sendbox}>\r\n               <input type='text' ref={sendbox} placeholder='Type your message here' value={message} onChange={(evt)=>setMessage(evt.target.value)} autoFocus/>\r\n               <button className='btn btn-primary' onClick={sendMessage.bind(this,name,room,message)}>Send</button>\r\n             </div>\r\n             <br />\r\n             <div class={classes.sendbox}>\r\n                 <label for=\"file-input\">\r\n                  <AttachFileIcon style={{color:'blue',width:'80px',cursor:'pointer'}}/>\r\n                 </label>\r\n                 <input id=\"file-input\" type=\"file\" style={{display:'none'}} onChange={(evt)=>{\r\n                //  document.getElementById('preview').setAttribute('src', window.URL.createObjectURL(evt.target.files[0]))\r\n                  }}/>\r\n                 <button className='btn btn-sm btn-danger' onClick={sendFile.bind(this)}>Send</button>\r\n              </div>\r\n           </center>\r\n    </div>\r\n  </>\r\n}\r\n\r\nexport default Chatting\r\n","import io from 'socket.io-client';\r\nimport React,{useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\r\n\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport { ReactSearchAutocomplete } from 'react-search-autocomplete'\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport socket from '../socketurl'\r\n\r\nimport Header2 from './header2'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  }\r\n\r\n}));\r\n\r\n\r\n\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\n\r\nconst connect=(secureAxios,dispatch,profile,option)=>{\r\n     secureAxios.post('setFriend',{option,profile})\r\n     .then((response)=>{\r\n         const body=response.data\r\n         if(body.status==1)dispatch({type:'set_friend',payload:{option,profile}})\r\n     })\r\n     .catch(err=>{\r\n       alert(err)\r\n     })\r\n}\r\n\r\n\r\n\r\nexport default function Profile(props) {\r\n\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n\r\n  const [status, setStatus] = useState(\"Not connected\");\r\n  const [option, setOption] = useState(\"Connect\");\r\n\r\n  const token=localStorage.getItem('token')\r\n  const profile=useSelector(state=>state.profileReducer)\r\n  const profileName=profile.name\r\n  const profileEmail=profile.email\r\n  if(!profile.email)props.history.push('/')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n  const exist=useSelector(state=>state.friendReducer.exist)\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  const name=useSelector(state=>state.userReducer.name)\r\n  const friends=useSelector(state=>state.friendReducer.friends)\r\n  const pendings=useSelector(state=>state.friendReducer.pendings)\r\n  const sent=useSelector(state=>state.friendReducer.sent)\r\n\r\n  useEffect(()=>{\r\n      if(friends?.find(profile=>profile.email==profileEmail)){setStatus('Connected'); setOption('Disconnect');  }\r\n      else if(pendings?.find(profile=>profile.email==profileEmail)){setStatus('Pending'); setOption('Accept'); }\r\n      else if(sent?.find(profile=>profile.email==profileEmail)){ setStatus('Request sent'); setOption('Cancel request');   }\r\n      else {setStatus('Not Connected'); setOption('Connect'); }\r\n\r\n      if(exist)return;\r\n\r\n      secureAxios.get('getFriend')\r\n      .then((response)=>{\r\n            const body=response.data\r\n\r\n            if(body.status==1){\r\n                dispatch({type:'load_friend',payload:{pendings:body.pendings,friends:body.friends,sent:body.sent,exist:true}})\r\n                dispatch({type:'load_user',payload:{name:body.name,email:body.email,exist:true}})\r\n            }\r\n      })\r\n      .catch(err=>{\r\n        alert(err)\r\n        props.history.push('/signin');\r\n      })\r\n\r\n  },[sent,friends,pendings])\r\n\r\n\r\n  return (\r\n    <>\r\n    <Header2 name='Profile'  {...props}/>\r\n\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <center><AccountBoxIcon style={{color:'lightgrey',width:'70px',height:'70px'}} /></center>\r\n      <center><p>{profile.name}</p></center>\r\n      <center><p>{status}</p></center>\r\n\r\n      <button class='btn btn-sm btn-primary' onClick={connect.bind(this,secureAxios,dispatch,profile,option)} >{option}</button>\r\n      {(status=='Pending')?<button class='btn btn-sm btn-danger' onClick={connect.bind(this,secureAxios,dispatch,profile,'Disconnect')}>Decline</button>:null }\r\n      <Box mt={8} className={classes.footer}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\nexport {connect}\r\n","import io from 'socket.io-client';\r\nimport React,{useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport { red } from '@material-ui/core/colors';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport socket from '../socketurl'\r\n\r\nimport Header from './header'\r\nimport {connect} from './profile'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  main:{height:'100vh'},\r\n\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n  }\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\n\r\nexport default function Friends(props) {\r\n\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n\r\n  const [openAccept, setOpenAccept] = React.useState(false);\r\n  const [profile, setProfile] = React.useState(null);\r\n  const [openDisconnect, setOpenDisconnect] = React.useState(false);\r\n  const [disconnectStatus, setDisconnectStatus] = React.useState('Disconnect');\r\n\r\n\r\n  const handleClickOpenAccept = () => {\r\n    setOpenAccept(true);\r\n  };\r\n\r\n  const handleCloseAccept = () => {\r\n     setOpenAccept(false);\r\n  };\r\n\r\n  const handleClickOpenDisconnect = () => {\r\n    setOpenDisconnect(true);\r\n  };\r\n\r\n  const handleCloseDisconnect = () => {\r\n    setOpenDisconnect(false);\r\n  };\r\n\r\n  const token=localStorage.getItem('token')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n  const exist=useSelector(state=>state.friendReducer.exist)\r\n  const name=useSelector(state=>state.userReducer.name)\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  const friends=useSelector(state=>state.friendReducer.friends)\r\n  const pendings=useSelector(state=>state.friendReducer.pendings)\r\n\r\n\r\n  useEffect(()=>{\r\n\r\n      if(exist)return;\r\n\r\n      secureAxios.get('getFriend')\r\n      .then((response)=>{\r\n            const body=response.data\r\n\r\n            if(body.status==1){\r\n                dispatch({type:'load_friend',payload:{friends:body.friends,pendings:body.pendings,sent:body.sent,exist:true}})\r\n                dispatch({type:'load_user',payload:{name:body.name,email:body.email,exist:true}})\r\n            }\r\n      })\r\n      .catch(err=>{\r\n        toast.error(err)\r\n        props.history.push('/signin');\r\n      })\r\n\r\n  },[])\r\n\r\n  const generate=(email1,email2)=>{\r\n\r\n      let email3=(email1>email2)?email1:email2\r\n      let email4=(email1<email2)?email1:email2\r\n\r\n      return email4+'-'+email3\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div class={classes.main}>\r\n    <div style={{position:'fixed',width:'100%'}}>\r\n      <Header {...props}/>\r\n    </div>\r\n    <br /><br /><br />\r\n\r\n\r\n    <Dialog open={openAccept} onClose={handleCloseAccept} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Are you sure want to connect?</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={()=>{handleCloseAccept();  }} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={()=>{connect(secureAxios,dispatch,profile,'Accept'); handleCloseAccept();}} color=\"primary\">\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={openDisconnect}\r\n        onClose={handleCloseDisconnect}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">Are you sure want to {disconnectStatus}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDisconnect} color=\"primary\">\r\n            No\r\n          </Button>\r\n          <Button onClick={()=>{connect(secureAxios,dispatch,profile,'Disconnect'); handleCloseDisconnect();}} color=\"primary\" autoFocus>\r\n            Yes\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n\r\n      <div>\r\n      <h6>Connection Requests</h6>\r\n      <Divider />\r\n      <List>\r\n        {pendings.sort((a,b)=>{return (a<b)?-1:1}).map((profile, index) => (\r\n          <ListItem button key={profile.name} onClick={()=>props.history.push(`/profile/${profile.email}-${profile.name}`)}>\r\n              <ListItemAvatar>\r\n                      <AccountCircleIcon color=\"primary\" />\r\n              </ListItemAvatar>\r\n              <ListItemText primary={profile.name} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <CheckIcon style={{color:'green'}} onClick={()=>{setProfile(profile);   handleClickOpenAccept();}}/>\r\n                </IconButton>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <ClearIcon color='secondary' onClick={()=>{setProfile(profile);  setDisconnectStatus('Decline'); handleClickOpenDisconnect();}}/>\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <br /><br />\r\n      <h6>Connections</h6>\r\n      <Divider />\r\n      <List>\r\n        {friends.sort((a,b)=>{return (a<b)?-1:1}).map((profile, index) => (\r\n          <ListItem button key={profile.name} onClick={()=>props.history.push(`/profile/${profile.email}-${profile.name}`)}>\r\n            <ListItemAvatar>  <Avatar className={classes.avatar}>\r\n                      {profile.name.split(\" \").map(word=>word[0].toUpperCase())}\r\n              </Avatar>\r\n            </ListItemAvatar>\r\n              <ListItemText primary={profile.name} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                    <ClearIcon color='secondary' onClick={()=>{setProfile(profile); setDisconnectStatus('Disconnect'); handleClickOpenDisconnect();}} />\r\n                </IconButton>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                    <ChatIcon color='primary' onClick={()=>props.history.push(`/personal/${generate(profile.email,email)}/${profile.email}-${email}`)} />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      </div>\r\n      <Box mt={8} className={classes.footer}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  tabLink : {\r\n    display:\"flex\",\r\n    alignItems:\"center\",\r\n    justifyContent:\"center\"\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Signin(props) {\r\n  const classes = useStyles();\r\n  const token=localStorage.getItem('token')\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n\r\n  const dispatch=useDispatch()\r\n\r\n  const login=(event)=>{\r\n    event.preventDefault();\r\n    const data={email,pass:password};\r\n\r\n    axios.post(url+'/localSignin',data)\r\n    .then((response)=>{\r\n      const body=response.data\r\n      let email=null,name=null,token=null;\r\n\r\n      if(body.status==1){\r\n\r\n        email=body.email;name=body.name;token=body.token;\r\n        toast.success('Signed in successfully',{autoClose:1000})\r\n        dispatch({type:'load_user',payload:{name,email}})\r\n\r\n        localStorage.setItem('token',token);\r\n\r\n        props.history.push('/');\r\n      }\r\n      else toast.error('Something went wrong',{autoClose:10000})\r\n\r\n\r\n    })\r\n    .catch(err=>toast.error('Something went wrong'+err,{autoClose:1000}) );\r\n}\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            value={email}\r\n            onChange={(evt)=>setEmail(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(evt)=>setPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={login}\r\n            className={classes.submit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/changePassword'>\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link to=\"/signup\" variant=\"body2\">\r\n                Don't have an account?\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport url from '../url';\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Signup(props) {\r\n  const classes = useStyles();\r\n  const token=localStorage.getItem('token')\r\n\r\n  const [name,setName]=useState('')\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n  const [confirmPassword,setConfirmPassword]=useState('')\r\n  const [otp,setOtp]=useState('')\r\n  const [receivedOtp,setReceivedOtp]=useState('')\r\n  const dispatch=useDispatch()\r\n\r\n\r\n  \tconst register=(event)=>{\r\n  \t\tevent.preventDefault();\r\n\r\n      if(otp!=receivedOtp){\r\n        toast.error('Incorrect OTP',{autoClose:1000}); return;\r\n      }\r\n\r\n      if(confirmPassword!=password){toast(\"Password and Confirm password don't match\",{autoClose:1000});}\r\n\r\n  \t\tconst data={name,email,pass:password};\r\n  \t\taxios.post(url+'/localSignup',data)\r\n      .then((response)=>{\r\n        const body=response.data\r\n        let email=null,name=null,token=null;\r\n      //  alert(body.msg);\r\n        if(body.status==1){\r\n          toast.success('Signed up successfully',{autoClose:1000})\r\n          email=body.email;name=body.name;token=body.token;\r\n\r\n          dispatch({type:'load_user',payload:{name,email}})\r\n\r\n          localStorage.setItem('token',token);\r\n          //localStorage.removeItem('otp');\r\n\r\n          props.history.push('/');\r\n        }\r\n  \t\t})\r\n      .catch(err=>console.log(err));\r\n   }\r\n\r\n\r\n\r\n  \tconst verify=(event)=>{\r\n    \t\tevent.preventDefault();\r\n    \t\tlet data={email};\r\n        //alert(secureAxios)\r\n        axios.post(url+'/emailverify',data)\r\n        .then((response)=>{\r\n            const body=response.data\r\n            let receivedOtp=null;\r\n\r\n\r\n            if(body.status==1){toast.info(body.msg,{autoClose:1000});setReceivedOtp(body.otp);}\r\n            else toast.error(body.msg,{autoClose:1000});\r\n\r\n             //localStorage.setItem('otp',receivedOtp);\r\n    \t\t })\r\n         .catch(err=>console.log(err));\r\n    }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Name\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={(evt)=>setName(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            value={email}\r\n            onChange={(evt)=>setEmail(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.submit}\r\n            onClick={verify}\r\n          >\r\n            Send OTP\r\n          </Button>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"otp\"\r\n            label=\"Enter OTP\"\r\n            name=\"otp\"\r\n            value={otp}\r\n            onChange={(evt)=>setOtp(evt.target.value)}\r\n            autoFocus\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(evt)=>setPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={confirmPassword}\r\n            onChange={(evt)=>setConfirmPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={register}\r\n            className={classes.submit}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/changePassword' variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link to=\"/signin\" variant=\"body2\">\r\n                Already have an account?\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios'\r\nimport url from '../url';\r\nimport Header2 from './header2'\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Newroom(props) {\r\n  const classes = useStyles();\r\n\r\n  const [name,setName]=useState('');\r\n  const [password,setPassword]=useState('');\r\n  const dispatch=useDispatch()\r\n\r\n  const newroom=(evt)=>{\r\n    evt.preventDefault()\r\n\r\n    const token=localStorage.getItem('token')\r\n    const secureAxios=axios.create(\r\n                          {\r\n                           baseURL:url,\r\n                           headers:{\r\n                            \"Authorization\":`bearer ${token}`\r\n                          }\r\n                        })\r\n\r\n      const data={name,pass:password}\r\n      secureAxios.post('newroom',data)\r\n      .then((response)=>{\r\n                const body=response.data\r\n                if(body.status==1){   toast.success(body.msg,{autoClose:1000}); dispatch({type:'add_my_group',payload:name}); props.history.push('/'); }\r\n                else toast.error(body.msg,{autoClose:1000})\r\n        })\r\n        .catch(err=>{\r\n            toast.error(err,{autoClose:1000})\r\n            props.history.push('/signin');\r\n        })\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n    <Header2 name='' {...props}/>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <GroupIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Create Group\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Group Name\"\r\n                name=\"email\"\r\n                value={name}\r\n                onChange={(evt)=>setName(evt.target.value)}\r\n                autoComplete=\"email\"\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={password}\r\n                onChange={(evt)=>setPassword(evt.target.value)}\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={newroom}\r\n          >\r\n           Create\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/enterroom' variant=\"body2\">\r\n                Enter Already Existing Group\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n\r\n        </form>\r\n      </div>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Header2 from './header2'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Enterroom(props) {\r\n  const classes = useStyles();\r\n  const [name,setName]=useState('');\r\n  const [password,setPassword]=useState('');\r\n  const dispatch=useDispatch()\r\n\r\n  const enterroom=(evt)=>{\r\n    evt.preventDefault()\r\n    const token=localStorage.getItem('token')\r\n    const secureAxios=axios.create(\r\n                          {\r\n                           baseURL:url,\r\n                           headers:{\r\n                            \"Authorization\":`bearer ${token}`\r\n                          }\r\n                        })\r\n\r\n      const data={name,pass:password}\r\n      secureAxios.post('enterroom',data)\r\n      .then((response)=>{\r\n            const body=response.data\r\n            if(body.status==1){   dispatch({type:'add_latest_group',payload:name});   props.history.push(`/chat/${name}`); }\r\n            else toast.error(body.msg,{autoClose:1500})\r\n      })\r\n      .catch(err=>{\r\n        toast.error(err,{autoClose:1000})\r\n        props.history.push('/signin');\r\n      })\r\n\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <Header2 name='' {...props}/>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar} >\r\n          <GroupIcon/>\r\n\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Enter Group\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Group Name\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                value={name}\r\n                onChange={(evt)=>setName(evt.target.value)}\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={password}\r\n                onChange={(evt)=>setPassword(evt.target.value)}\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={enterroom}\r\n          >\r\n           Enter\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/newroom' variant=\"body2\">\r\n                Create New Group\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport url from '../url';\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Changepassword(props) {\r\n  const classes = useStyles();\r\n  const token=localStorage.getItem('token')\r\n\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n  const [confirmPassword,setConfirmPassword]=useState('')\r\n  const [otp,setOtp]=useState('')\r\n  const [receivedOtp,setReceivedOtp]=useState('')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n\r\n  \tconst changePassword=(event)=>{\r\n  \t\tevent.preventDefault();\r\n\r\n      if(otp!=receivedOtp){\r\n        toast.error('Incorrect OTP',{autoClose:1000}); return;\r\n      }\r\n\r\n      if(confirmPassword!=password){toast(\"Password and Confirm password don't match\",{autoClose:1000});}\r\n\r\n  \t\tconst data={email,password};\r\n  \t\tsecureAxios.post('changePassword',data)\r\n      .then((response)=>{\r\n        const body=response.data\r\n        if(body.status==1){\r\n          toast.success('Password was changed successfully',{autoClose:2000})\r\n\r\n          props.history.push('/');\r\n        }\r\n        else toast.error('Something went wrong');\r\n  \t\t})\r\n      .catch(err=>{console.log(err); toast.error('Something went wrong');});\r\n   }\r\n\r\n\r\n\r\n  \tconst forgotPassword=(event)=>{\r\n    \t\tevent.preventDefault();\r\n    \t\tlet data={email};\r\n        //alert(secureAxios)\r\n        secureAxios.post('forgotPassword',data)\r\n        .then((response)=>{\r\n            const body=response.data\r\n            let receivedOtp=null;\r\n\r\n\r\n            if(body.status==1){toast.info(body.msg,{autoClose:1000});setReceivedOtp(body.otp);}\r\n            else toast.error(\"Something went wrong\",{autoClose:1000});\r\n\r\n    \t\t })\r\n         .catch(err=>{console.log(err); toast.error(\"Something went wrong\",{autoClose:1000});});\r\n    }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Change password\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            value={email}\r\n            onChange={(evt)=>setEmail(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.submit}\r\n            onClick={forgotPassword}\r\n          >\r\n            Send OTP\r\n          </Button>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"otp\"\r\n            label=\"Enter OTP\"\r\n            name=\"otp\"\r\n            value={otp}\r\n            onChange={(evt)=>setOtp(evt.target.value)}\r\n            autoFocus\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(evt)=>setPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={confirmPassword}\r\n            onChange={(evt)=>setConfirmPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={changePassword}\r\n            className={classes.submit}\r\n          >\r\n            Submit\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Back to Home\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React,{useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport Header from './header';\r\nimport url from '../url';\r\nimport axios from 'axios';\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 500,\r\n    margin:'auto'\r\n  },\r\n  media: {// 4:\r\n    paddingTop: '100%', // 16:9\r\n\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n  },\r\n}));\r\n\r\nexport default function Posts(props) {\r\n\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = React.useState(false);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  //const email='syedhasnain9163@gmail.com';\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n  const handleExpandClick = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n  const token=localStorage.getItem('token')\r\n  const dispatch=useDispatch()\r\n  const exist=useSelector(state=>state.postReducer.exist)\r\n  const posts=useSelector(state=>state.postReducer.post)\r\n\r\n  useEffect(()=>{\r\n    console.log(posts)\r\n    if(exist)return;\r\n    const secureAxios=axios.create(\r\n                          {\r\n                           baseURL:url,\r\n                           headers:{\r\n                            \"Authorization\":`bearer ${token}`\r\n                          }\r\n                        })\r\n                        secureAxios.get('getPost')\r\n                        .then((response)=>{\r\n                          const body=response.data\r\n\r\n                          if(body.status==1){\r\n\r\n                            dispatch({type:'load_post',payload:body.post})\r\n\r\n                            props.history.replace('/');\r\n                          }\r\n                          else toast.error('Something went wrong',{autoClose:1000})\r\n                        }).catch(err=>toast.error('Something went wrong',{autoClose:1000}) );\r\n\r\n\r\n\r\n  },[])\r\n\r\n    const hidePost=(_id)=>{\r\n\r\n      alert(posts.indexOf(posts.find(p=>p._id==_id)))\r\n        dispatch({type:'hide_post',payload:_id})\r\n        handleClose()\r\n    }\r\n\r\n      const deletePost=(email,_id)=>{\r\n        const secureAxios=axios.create(\r\n                              {\r\n                               baseURL:url,\r\n                               headers:{\r\n                                \"Authorization\":`bearer ${token}`\r\n                              }\r\n                            })\r\n                            secureAxios.post('deletePost',{email,_id})\r\n                            .then((response)=>{\r\n                              const body=response.data\r\n\r\n                              if(body.status==1){\r\n\r\n                                dispatch({type:'hide_post',payload:_id})\r\n                                toast.success('Post was deleted',{autoClose:1500})\r\n\r\n                                props.history.replace('/');\r\n                              }\r\n                              else toast.error('Something went wrong',{autoClose:1000})\r\n                            }).catch(err=>toast.error('Something went wrong',{autoClose:1000}) );\r\n                            handleClose()\r\n\r\n      }\r\n\r\n\r\n\r\n  const likePost=(email,_id,liked)=>{\r\n    const secureAxios=axios.create(\r\n                          {\r\n                           baseURL:url,\r\n                           headers:{\r\n                            \"Authorization\":`bearer ${token}`\r\n                          }\r\n                        })\r\n                        secureAxios.post('likePost',{email,_id,liked})\r\n                        .then((response)=>{\r\n                          const body=response.data\r\n\r\n                          if(body.status==1){\r\n\r\n                            dispatch({type:'like_post',payload:{_id,liked}})\r\n\r\n                            props.history.replace('/');\r\n                          }\r\n                          else toast.error('Something went wrong',{autoClose:1000})\r\n                        }).catch(err=>toast.error('Something went wrong',{autoClose:1000}) );\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    <div style={{position:'fixed',width:'100%'}}>\r\n      <Header {...props}/>\r\n    </div>\r\n    <br /><br/>\r\n    <div>\r\n\r\n    <Fab color=\"primary\" style={{height:'45px',width:'45px',float:'right'}}  aria-label=\"New Room\" onClick={()=>props.history.push('/uploadpost')}>\r\n      <AddIcon />\r\n    </Fab>\r\n    <br /><br />\r\n    <Divider />\r\n    {\r\n      posts.map(p=>{\r\n        return  <Card className={classes.root}>\r\n          <CardHeader\r\n            avatar={\r\n              <Avatar aria-label=\"recipe\" className={classes.avatar}\r\n            //  src=\"https://media-exp1.licdn.com/dms/image/C5103AQH7Z-tFum_fGg/profile-displayphoto-shrink_400_400/0/1529940395952?e=1619049600&v=beta&t=zwUfkkCN8y_FHshFVUFnoz0R02zFo_arICIr9l9VOwA\"\r\n              >\r\n              {p.uploaderName.split(\" \").map(word=>word[0].toUpperCase()) }\r\n              </Avatar>\r\n            }\r\n            action={\r\n              <>\r\n              <IconButton aria-label=\"settings\">\r\n                <MoreVertIcon onClick={handleClick}/>\r\n              </IconButton>\r\n              <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n              >\r\n                <MenuItem onClick={hidePost.bind(this,p._id)}>Hide</MenuItem>\r\n\r\n              {(email==p.uploaderEmail)?<MenuItem onClick={deletePost.bind(this,p.email,p._id)}>Delete</MenuItem>:null}\r\n              </Menu>\r\n              </>\r\n            }\r\n            title={p.uploaderName}\r\n            subheader={p.date}\r\n          />\r\n          <img src={`${url}/uploads/${p.path}/${token}`} width=\"100%\" height=\"100%\"/>\r\n\r\n          <CardContent>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n              {p.desc.slice(0,30)}\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions disableSpacing>\r\n            <IconButton aria-label=\"add to favorites\">\r\n              <ThumbUpAltIcon onClick={likePost.bind(this,email,p._id,p.liked)} color={(p.liked)?'Primary':''}/>\r\n            </IconButton > {p.likeCount}\r\n            <IconButton aria-label=\"share\">\r\n              <ShareIcon />\r\n            </IconButton>\r\n            <IconButton\r\n              className={clsx(classes.expand, {\r\n                [classes.expandOpen]: expanded,\r\n              })}\r\n              onClick={handleExpandClick}\r\n              aria-expanded={expanded}\r\n              aria-label=\"show more\"\r\n            >\r\n              <ExpandMoreIcon />\r\n            </IconButton>\r\n          </CardActions>\r\n          <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n            <CardContent>\r\n              <Typography paragraph>\r\n               {p.desc}\r\n              </Typography>\r\n            </CardContent>\r\n          </Collapse>\r\n        </Card>\r\n\r\n\r\n\r\n\r\n      })\r\n    }\r\n\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport imageCompression from 'browser-image-compression';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\ntoast.configure()\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  tabLink : {\r\n    display:\"flex\",\r\n    alignItems:\"center\",\r\n    justifyContent:\"center\"\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Uploadpost(props) {\r\n  const classes = useStyles();\r\n  const uploaderName=useSelector(state=>state.userReducer.name)\r\n  const uploaderEmail=useSelector(state=>state.userReducer.email)\r\n\r\n  const [desc,setDesc]=useState('')\r\n  const dispatch=useDispatch()\r\n  const token=localStorage.getItem('token')\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n   const days=['January','February','March','April','May','June','July','August','September','October','November','December']\r\n   async function upload(event){\r\n    event.preventDefault();\r\n\r\n    const dateObj = new Date();\r\n    const day = dateObj.getUTCDate();\r\n    const month = dateObj.getUTCMonth(); //months from 1-12\r\n    const year = dateObj.getUTCFullYear();\r\n\r\n    let h=dateObj.getHours();\r\n    let m=dateObj.getMinutes();\r\n\r\n    const time=dateObj.getTime()/1000;\r\n\r\n    h=(parseInt(h/10)==0)?('0'+h):h;\r\n    m=(parseInt(m/10)==0)?('0'+m):m;\r\n\r\n    const date=`${days[month]} ${day}, ${year} ${h}:${m}`\r\n\r\n    let path,img;\r\n    const file=document.getElementById('file-input').files[0]\r\n    if(file)\r\n    {\r\n      let options = { maxSizeMB: 1,  maxWidthOrHeight: 1920,  useWebWorker: true }\r\n      imageCompression(file, options)\r\n      .then(function (compressedFile) {\r\n          const data={uploaderName,uploaderEmail,desc,img:JSON.stringify(img),path:file.name,date,time};\r\n\r\n          secureAxios.post('uploadpost',data)\r\n          .then((response)=>{\r\n            const body=response.data\r\n\r\n            if(body.status==1){\r\n              if(file)file.value=\"\"\r\n              setDesc(\"\")\r\n              toast.success(body.msg,{autoClose:1000})\r\n              dispatch({type:'add_post',payload:data})\r\n\r\n              props.history.replace('/');\r\n            }\r\n            else toast.error('Something went wrong',{autoClose:1000})\r\n          })\r\n          .catch(err=>toast.error('Something went wrong',{autoClose:1000}) );\r\n      })\r\n      .catch(function (error) {alert(error.message); console.log(error.message);  });\r\n\r\n    }\r\n    else {\r\n      const data={uploaderName,uploaderEmail,desc,img,path,date,time};\r\n\r\n      secureAxios.post('uploadpost',data)\r\n      .then((response)=>{\r\n        const body=response.data\r\n\r\n        if(body.status==1){\r\n          if(file)file.value=\"\"\r\n          setDesc(\"\")\r\n          toast.success(body.msg,{autoClose:1000})\r\n          dispatch({type:'add_post',payload:data})\r\n\r\n          props.history.replace('/');\r\n        }\r\n        else toast.error('Something went wrong',{autoClose:1000})\r\n      }).catch(err=>toast.error('Something went wrong',{autoClose:1000}) );\r\n    }\r\n}\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Add Post\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            type='text'\r\n            label=\"Add description\"\r\n            value={desc}\r\n            onChange={(evt)=>setDesc(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <label for=\"file-input\">\r\n           <AttachFileIcon style={{color:'blue',width:'80px',cursor:'pointer'}}/>\r\n          </label>\r\n          <input id=\"file-input\" type=\"file\" style={{display:'none'}} onChange={(evt)=>{\r\n           document.getElementById('preview').setAttribute('src', window.URL.createObjectURL(evt.target.files[0]))\r\n           }}/>\r\n           <img id='preview' width='200px' height='200px'/>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={upload}\r\n            className={classes.submit}\r\n          >\r\n            Post\r\n          </Button>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\n\r\nexport default function Authenticatedposts(Posts,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  const dispatch=useDispatch()\r\n  useEffect(()=>{\r\n      if(email)setAuth(1)\r\n      else\r\n      {\r\n        const token=localStorage.getItem('token')\r\n        const secureAxios=axios.create(\r\n                              {\r\n                               baseURL:url,\r\n                               headers:{\r\n                                \"Authorization\":`bearer ${token}`\r\n                              }\r\n                            })\r\n\r\n          secureAxios.get('getUser')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                dispatch({type:'start',payload:1})\r\n                dispatch({type:'load_user',payload:{name:body.name,email:body.email}})\r\n                setAuth(1)\r\n          })\r\n          .catch(err=>{  setAuth(2);  })\r\n      }\r\n   },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Posts {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import React from 'react';\r\nimport {combineReducers,createStore,applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst groupReducer=(state={rooms:[],latest:[],exist:false},action)=>{\r\n\r\n    switch(action.type)\r\n    {\r\n        case 'load_group':\r\n          return action.payload\r\n\r\n        case 'add_my_group':\r\n          return {...state,rooms:[...state.rooms,action.payload],latest:[...state.latest,action.payload]}\r\n\r\n        case 'add_latest_group':\r\n          if(!state.latest.includes(action.payload))\r\n            return {...state,latest:[...state.latest,action.payload]}\r\n          return state\r\n\r\n        case 'exit_group':\r\n            return {...state,latest:state.latest.filter(l=>l!=action.payload)}\r\n\r\n        case 'edit_group':\r\n            return {...state,exist:false}\r\n\r\n        case 'delete_my_group':\r\n            return {...state,rooms:state.rooms.filter(r=>r!=action.payload),latest:state.latest.filter(l=>l!=action.payload)}\r\n\r\n        case 'clear':\r\n            return {rooms:[],latest:[],exist:false}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\n\r\nconst chatReducer=(state={},action)=>{\r\n    let newState=JSON.parse(JSON.stringify(state));\r\n    switch(action.type)\r\n    {\r\n        case 'load_chat':\r\n          if(!newState[action.payload.room])\r\n            newState[action.payload.room]=action.payload.msgs\r\n          else\r\n            newState[action.payload.room]=[...action.payload.msgs,...newState[action.payload.room]]\r\n\r\n          return newState\r\n\r\n        case 'add_chat':\r\n          if(newState[action.payload.room])\r\n            newState[action.payload.room]=[...newState[action.payload.room],action.payload.msg]\r\n          else\r\n            newState[action.payload.room]=[action.payload.msg]\r\n\r\n          return newState\r\n\r\n        case 'clear':\r\n            return {}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\nconst userReducer=(state={name:null,email:null},action)=>{\r\n    switch(action.type)\r\n    {\r\n        case 'load_user':\r\n           return action.payload\r\n\r\n        case 'clear':\r\n            return {name:null,email:null}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\n\r\nconst friendReducer=(state={pendings:[],friends:[],sent:[],exist:false},action)=>{\r\n    switch(action.type)\r\n    {\r\n        case 'load_friend':\r\n           return action.payload\r\n\r\n        case 'set_friend':\r\n            const profile=action.payload.profile\r\n            const option=action.payload.option\r\n\r\n            if(option=='Accept')\r\n              return {...state,pendings:state.pendings.filter(p=>p.email!=profile.email),friends:state.friends.concat(profile)}\r\n\r\n            else if(option=='Disconnect' || option=='Cancel request')\r\n              return {...state,sent:state.sent.filter(p=>p.email!=profile.email),pendings:state.pendings.filter(p=>p.email!=profile.email),friends:state.friends.filter(p=>p.email!=profile.email)}\r\n\r\n            else\r\n              return {...state,sent:state.sent.concat(profile)}\r\n\r\n        case 'clear':\r\n            return {pendings:[],friends:[],sent:[],exist:false}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\n\r\nconst profileReducer=(state={},action)=>{\r\n    switch(action.type)\r\n    {\r\n        case 'load_profile':\r\n           return action.payload\r\n        case 'clear':\r\n           return {}\r\n        default:\r\n          return state\r\n    }\r\n  }\r\n\r\n  const startReducer=(state={exist:0},action)=>{\r\n      switch(action.type)\r\n      {\r\n          case 'start':\r\n             return {exist:action.payload}\r\n          case 'end':\r\n             return {exist:0}\r\n          case 'clear':\r\n             return {exist:0}\r\n          default:\r\n            return state\r\n      }\r\n    }\r\n\r\n\r\n    const postReducer=(state={exist:false,post:[]},action)=>{\r\n        const newPost=JSON.parse(JSON.stringify(state.post))\r\n        switch(action.type)\r\n        {\r\n            case 'load_post':\r\n            // alert(action.payload.length)\r\n               return {exist:true,post:action.payload.reverse()}\r\n\r\n            case 'add_post':\r\n                return {...state,post:[action.payload,...state.post]}\r\n\r\n            case 'like_post':\r\n                  for(let i=0;i<newPost.length;i++)\r\n                  {\r\n                    if(newPost[i]._id==action.payload._id){\r\n                      if(action.payload.liked)\r\n                      {\r\n                        newPost[i].likeCount--\r\n                        newPost[i].liked=false\r\n                      }\r\n                      else {\r\n                        newPost[i].likeCount++\r\n                        newPost[i].liked=true\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                return {...state,post:newPost}\r\n\r\n            case 'hide_post':\r\n               alert(action.payload)\r\n               let temp=[];\r\n               for(let i=0;i<state.post.length;i++)\r\n               {\r\n                 if(state.post[i]._id!=action.payload)temp.push(state.post[i])\r\n               }\r\n               alert(temp.length)\r\n               return {...state,post:temp}\r\n\r\n\r\n            case 'clear':\r\n                return {exist:false,post:[]}\r\n\r\n            default:\r\n              return state;\r\n        }\r\n    }\r\n\r\n\r\n\r\nconst reducer=combineReducers({groupReducer,chatReducer,userReducer,friendReducer,profileReducer,startReducer,postReducer});\r\nexport default reducer;\r\n","import React from 'react';\r\nimport {createStore,applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducer from './configReducer';\r\n\r\nconst store=createStore(reducer,[],applyMiddleware(thunk));\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport {BrowserRouter,Switch,Route,Link} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\n\r\n\r\nimport Authenticatedchats from './Auth/AuthenticatedChats';\r\nimport Authenticatedprofile from './Auth/AuthenticatedProfile';\r\nimport Authenticatedchatting from './Auth/AuthenticatedChatting';\r\nimport AuthenticatedpersonalChatting from './Auth/AuthenticatedPersonalChatting';\r\nimport Authenticatedenterroom from './Auth/AuthenticatedEnterroom';\r\nimport Authenticatednewroom from './Auth/AuthenticatedNewroom';\r\nimport Authenticatedposts from './Auth/AuthenticatedPosts'\r\nimport Authenticatedfriends from './Auth/AuthenticatedFriends'\r\nimport Authredirect from './Auth/AuthRedirect'\r\n\r\nimport Chats from './components/chats';\r\nimport Chatting from './components/chatting';\r\nimport Profile from './components/profile';\r\nimport Friends from './components/friends';\r\nimport Signin from './components/signin';\r\nimport Signup from './components/signup';\r\nimport Newroom from './components/newroom';\r\nimport Enterroom from './components/enterroom';\r\nimport Changepassword from './components/changePassword';\r\nimport Posts from './components/posts';\r\nimport Uploadpost from './components/uploadpost';\r\n\r\nimport store from './configStore';\r\n\r\n\r\nReactDom.render(\r\n<Provider store={store}>\r\n  <BrowserRouter>\r\n    <Switch>\r\n      <Route  exact path='/' component={Authenticatedposts(Posts,Authredirect)} />\r\n      <Route  path='/chats' component={Authenticatedchats(Chats,Authredirect)} />\r\n      <Route  path='/signin' component={Signin} />\r\n      <Route  path='/signup' component={Signup} />\r\n      <Route  path='/enterroom' component={Authenticatedenterroom(Enterroom,Authredirect)} />\r\n      <Route  path='/newroom' component={Authenticatednewroom(Newroom,Authredirect)} />\r\n      <Route  path='/profile/:profile' component={Authenticatedprofile(Profile,Authredirect)} />\r\n      <Route  path='/friends' component={Authenticatedfriends(Friends,Authredirect)} />\r\n      <Route  path='/changePassword' component={Changepassword} />\r\n      <Route  exact path='/chat/:room' component={Authenticatedchatting(Chatting,Authredirect)} />\r\n      <Route  exact path='/personal/:room/:emails' component={AuthenticatedpersonalChatting(Chatting,Authredirect)} />\r\n      <Route  path='/uploadpost' component={Uploadpost} />\r\n    </Switch>\r\n  </BrowserRouter>\r\n</Provider>\r\n,\r\ndocument.getElementById('root'));\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\nexport default function Authenticatedchats(Chats,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const exist=useSelector(state=>state.startReducer.exist)\r\n  const dispatch=useDispatch()\r\n  useEffect(()=>{\r\n    if(exist)setAuth(1);\r\n    else\r\n    {\r\n      const token=localStorage.getItem('token')\r\n      const secureAxios=axios.create(\r\n                            {\r\n                             baseURL:url,\r\n                             headers:{\r\n                              \"Authorization\":`bearer ${token}`\r\n                            }\r\n                          })\r\n\r\n        secureAxios.get('getRooms')\r\n        .then((response)=>{\r\n              const body=response.data\r\n              dispatch({type:'start',exist:1})\r\n              setAuth(1)\r\n\r\n        })\r\n        .catch(err=>{ setAuth(2);  })\r\n\r\n    }\r\n\r\n  },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Chats {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\nexport default function Authenticatedenterrroom(Enterroom,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n\r\n  useEffect(()=>{\r\n\r\n      if(exist)setAuth(1);\r\n      else{\r\n                  const token=localStorage.getItem('token')\r\n                  const secureAxios=axios.create(\r\n                                              {\r\n                                               baseURL:url,\r\n                                               headers:{\r\n                                                \"Authorization\":`bearer ${token}`\r\n                                              }\r\n                                            })\r\n\r\n                  secureAxios.get('getRooms')\r\n                  .then((response)=>{\r\n                      const body=response.data\r\n                      setAuth(1)\r\n                    })\r\n                  .catch(err=>{  setAuth(2)  })\r\n        }\r\n   })\r\n   return (auth==0)?<Loading/>:(auth==1)?<Enterroom {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\n\r\nexport default function Authenticatednewroom(Newroom,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n\r\n  useEffect(()=>{\r\n      if(exist)setAuth(1)\r\n      else\r\n      {\r\n        const token=localStorage.getItem('token')\r\n        const secureAxios=axios.create(\r\n                              {\r\n                               baseURL:url,\r\n                               headers:{\r\n                                \"Authorization\":`bearer ${token}`\r\n                              }\r\n                            })\r\n\r\n          secureAxios.get('getRooms')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                setAuth(1)\r\n          })\r\n          .catch(err=>{  setAuth(2);  })\r\n      }\r\n\r\n   },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Newroom {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\n\r\nexport default function Authenticatedprofile(Profile,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const dispatch=useDispatch()\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n  const [email,name]=props.match.params.profile.split('-')\r\n  useEffect(()=>{\r\n\r\n        const token=localStorage.getItem('token')\r\n        const secureAxios=axios.create(\r\n                              {\r\n                               baseURL:url,\r\n                               headers:{\r\n                                \"Authorization\":`bearer ${token}`\r\n                              }\r\n                            })\r\n\r\n          secureAxios.post('getProfile',{email})\r\n          .then((response)=>{\r\n                const body=response.data\r\n//                alert(body.status)\r\n                if(body.status==1){\r\n                  dispatch({type:'load_profile',payload:{name:body.name,email:body.email}})\r\n                  setAuth(1)\r\n                }\r\n                else setAuth(2)\r\n          })\r\n          .catch(err=>{  setAuth(2);  })\r\n\r\n\r\n   },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Profile {...props}/>:<Authredirect redirect=''/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\n\r\nexport default function Authenticatedfriends(Friends,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const exist=useSelector(state=>state.startReducer.exist)\r\n  const dispatch=useDispatch()\r\n  useEffect(()=>{\r\n      if(exist)setAuth(1)\r\n      else\r\n      {\r\n        const token=localStorage.getItem('token')\r\n        const secureAxios=axios.create(\r\n                              {\r\n                               baseURL:url,\r\n                               headers:{\r\n                                \"Authorization\":`bearer ${token}`\r\n                              }\r\n                            })\r\n\r\n          secureAxios.get('getRooms')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                dispatch({type:'start',payload:1})\r\n                setAuth(1)\r\n          })\r\n          .catch(err=>{  setAuth(2);  })\r\n      }\r\n   },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Friends {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useSelector,useDispatch} from 'react-redux'\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\nexport default function Authenticatedchatting(Chatting,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const [redirect,setRedirect]=useState('signin')\r\n  const room=props.match.params.room\r\n  //alert(props.match.params.room)\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n  const latest=useSelector(state=>state.groupReducer.latest)\r\n\r\n  useEffect(()=>{\r\n\r\n        if(exist){\r\n          if(!latest.includes(room)){ setRedirect('enterroom'); setAuth(2); }\r\n          else setAuth(1);\r\n        }\r\n        else\r\n        {\r\n          const token=localStorage.getItem('token')\r\n          const secureAxios=axios.create(\r\n                                {\r\n                                 baseURL:url,\r\n                                 headers:{\r\n                                  \"Authorization\":`bearer ${token}`\r\n                                }\r\n                              })\r\n          secureAxios.get('getRooms')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                if(!body.latest.includes(room)){ setRedirect('enterroom'); setAuth(2); }\r\n                else setAuth(1);\r\n          })\r\n          .catch(err=>{\r\n            setAuth(2)\r\n          })\r\n        }\r\n\r\n  },[])\r\n\r\n  return (auth==0)?<Loading />:(auth==1)?<Chatting roomName={room} {...props}/>:<Authredirect redirect={redirect}/>\r\n\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useSelector,useDispatch} from 'react-redux'\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\nexport default function Authenticatedpersonalchatting(Chatting,Authredirect){\r\n  let friendName=\"\"\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const [redirect,setRedirect]=useState('')\r\n\r\n  const [email,myEmail]=props.match.params.emails.split('-')\r\n\r\n  const dispatch=useDispatch()\r\n\r\n  const exist=useSelector(state=>state.friendReducer.exist)\r\n  const friends=useSelector(state=>state.friendReducer.friends)\r\n\r\n  useEffect(()=>{\r\n\r\n        if(exist){\r\n          //alert(JSON.stringify(friends))\r\n          friendName=friends.find(f=>f.email==email)?.name\r\n\r\n      //    alert(friendName)\r\n          if(!friendName){ setRedirect(''); setAuth(2); }\r\n          else setAuth(1);\r\n\r\n        }\r\n        else\r\n        {\r\n          const token=localStorage.getItem('token')\r\n          const secureAxios=axios.create(\r\n                                {\r\n                                 baseURL:url,\r\n                                 headers:{\r\n                                  \"Authorization\":`bearer ${token}`\r\n                                }\r\n                              })\r\n          secureAxios.get('getFriend')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                dispatch({type:'load_friend',payload:{friends:body.friends,pendings:body.pendings,sent:body.sent,exist:true}})\r\n\r\n                friendName=body.friends.find(f=>f.email==email)?.name\r\n            //    alert(friendName)\r\n\r\n                if(!friendName){ setRedirect(''); setAuth(2); }\r\n                else setAuth(1);\r\n          })\r\n          .catch(err=>{\r\n            setAuth(2)\r\n          })\r\n        }\r\n      //  alert(friendName)\r\n\r\n  },[])\r\n\r\n  return (auth==0)?<Loading />:(auth==1)?<Chatting roomName={friendName} {...props}/>:<Authredirect redirect={redirect}/>\r\n\r\n }\r\n\r\n}\r\n"],"sourceRoot":""}