{"version":3,"sources":["../node_modules/@material-ui/icons/ArrowBack.js","components/header2.js","crypto/encrypt.js","crypto/decrypt.js","components/chatting.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","Header2","props","classes","className","position","edge","color","aria-label","onClick","history","goBack","variant","name","keyMaterial","decoder","TextDecoder","encoder","TextEncoder","PBKDF2","password","salt","iterations","length","hash","a","algorithm","window","crypto","subtle","importKey","encode","deriveKey","decryptFun","encrypted","iv","buffer","console","log","Uint8Array","from","atob","c","charCodeAt","key","decrypt","slice","salt_len","decrypted","decode","encryptFun","text","encrypt","concatennated","btoa","String","fromCharCode","toast","configure","green","minWidth","bullet","display","margin","transform","fontSize","pos","marginBottom","heading","textAlign","footer","float","paging","backgroundColor","messageBox","width","flexWrap","main","height","paddingTop","container","minHeight","padding","borderRadius","msgs","sendbox","download","Chatting","link","audio","Audio","chat","useSelector","state","chatReducer","dispatch","useDispatch","room","match","params","emails","roomName","useState","message","setMessage","page","setPage","olderMsgs","setOlderMsgs","useRef","socket","io","url","transports","token","localStorage","getItem","secureAxios","axios","create","baseURL","headers","email","userReducer","socketConnections","emit","on","data","document","getElementById","style","type","payload","msg","setTimeout","scrollTo","top","scrollHeight","behaviour","current","focus","path","split","then","play","getMessages","post","response","body","status","get","catch","err","error","i","parseInt","end","setData","useEffect","disconnect","file","files","h","Date","getHours","m","getMinutes","time","flag","includes","options","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","img","alert","reader","FileReader","readAsDataURL","b64","result","replace","onloadend","rightStyle","marginLeft","CircularProgress","id","marginTop","class","Paper","elevation","bind","s","undefined","map","includeStyle","src","controls","ref","placeholder","onChange","evt","target","autoFocus","getRandomValues","join","for","cursor"],"mappings":"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","file":"static/js/17.7c282415.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n}), 'ArrowBack');\n\nexports.default = _default;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {withRouter} from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nexport default function Header2(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n            <ArrowBackIcon onClick={()=>props.history.goBack()}/>\r\n          </IconButton>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            {props.name}\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n","const encoder = new TextEncoder();\r\nlet keyMaterial\r\n\r\nconst toBase64 = buffer =>\r\n  btoa(String.fromCharCode(...new Uint8Array(buffer)));\r\n\r\nconst PBKDF2 = async (\r\n  password, salt, iterations,\r\n  length, hash, algorithm =  'AES-CBC') => {\r\n\r\n  keyMaterial = await window.crypto.subtle.importKey(\r\n    'raw',\r\n    encoder.encode(password),\r\n    {name: 'PBKDF2'},\r\n    false,\r\n    ['deriveKey']\r\n  );\r\n\r\n\r\n  return await window.crypto.subtle.deriveKey(\r\n      {\r\n        name: 'PBKDF2',\r\n        salt: encoder.encode(salt),\r\n        iterations,\r\n        hash\r\n      },\r\n      keyMaterial,\r\n      { name: algorithm, length },\r\n      false, // we don't need to export our key!!!\r\n      ['encrypt', 'decrypt']\r\n    );\r\n}\r\n\r\n\r\nconst encryptFun=(text,salt,iv)=>{\r\n\r\n  console.log(\"salt \"+salt+\" iv \"+iv)\r\n  console.log(text);\r\n  text=encoder.encode(text);\r\n\r\n  console.log(text);\r\n  return (async ()=>{\r\n               const key = await PBKDF2('my password', salt, 100000, 256, 'SHA-256');\r\n               let encrypted =await window.crypto.subtle.encrypt(\r\n                {name: \"AES-CBC\", iv },\r\n                key,\r\n                text\r\n              );\r\n              console.log(`Encrypted ${encrypted}`);\r\n\r\n              const concatennated=toBase64([...salt,...iv,...new Uint8Array(encrypted)])\r\n              console.log(`concatennated ${concatennated}`)\r\n              return concatennated;\r\n        })()\r\n\r\n}\r\n\r\nexport default encryptFun\r\n","const decoder = new TextDecoder();\r\nconst encoder = new TextEncoder();\r\n\r\nconst fromBase64 = buffer =>\r\n  Uint8Array.from(atob(buffer), c => c.charCodeAt(0));\r\n\r\nconst PBKDF2 = async (\r\n  password, salt, iterations,\r\n  length, hash, algorithm =  'AES-CBC') => {\r\n\r\n  const keyMaterial = await window.crypto.subtle.importKey(\r\n    'raw',\r\n    encoder.encode(password),\r\n    {name: 'PBKDF2'},\r\n    false,\r\n    ['deriveKey']\r\n  );\r\n  return await window.crypto.subtle.deriveKey(\r\n    {\r\n      name: 'PBKDF2',\r\n      salt: encoder.encode(salt),\r\n      iterations,\r\n      hash\r\n    },\r\n    keyMaterial,\r\n    { name: algorithm, length },\r\n    false, // we don't need to export our key!!!\r\n    ['encrypt', 'decrypt']\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\nconst decryptFun=(encrypted,salt,iv)=>{\r\n //encrypted = fromBase64('g9cGh/FKtMV1LhnGvii6lBovkZihMw8CqHgwR7h64z25GXqNhzAdrOtUj6iaPXxQTP9pax1soyzwbFAoCQP1CQ==');\r\nconsole.log(encrypted)\r\nencrypted=fromBase64(encrypted)\r\nconsole.log(encrypted)\r\nconst salt_len =16;\r\nconst iv_len = 16;\r\nconsole.log(iv)\r\nconsole.log(salt)\r\n\r\nreturn (async ()=>{\r\n    const key=await  PBKDF2('my password', salt, 100000, 256, 'SHA-256');\r\n    const decrypted =await window.crypto.subtle.decrypt(\r\n             { name: \"AES-CBC\", iv },\r\n             key,\r\n             encrypted.slice(salt_len + iv_len)\r\n          );\r\n          console.log(decrypted)\r\n    return decoder.decode(decrypted)\r\n  })()\r\n\r\n}\r\n//console.log(decoder.decode(decrypted));\r\n\r\nexport default decryptFun\r\n","import {React,useRef,useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport imageCompression from 'browser-image-compression';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport '../css/chat.css'\r\nimport Header2 from './header2'\r\nimport io from 'socket.io-client';\r\nimport decryptFun from '../crypto/decrypt'\r\nimport encryptFun from '../crypto/encrypt'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst green='#23D0E0'\r\n\r\nlet socket;\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minWidth: 275,\r\n  },\r\n  bullet: {\r\n    display: 'inline-block',\r\n    margin: '0 2px',\r\n    transform: 'scale(0.8)',\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n  heading:{\r\n    textAlign:'justifyContent'\r\n  },\r\n  footer:{\r\n    float:'right'\r\n  },\r\n  paging:{\r\n    margin:'auto',\r\n    backgroundColor:'beige',\r\n    color:'black',\r\n    marginBottom:'10px'\r\n  },\r\n  messageBox:{\r\n    display: 'flex',\r\n    width:'100%',\r\n    flexWrap: 'wrap',\r\n    backgroundColor:green,\r\n  },\r\n  main:{ backgroundColor:green,height:'100%',paddingTop:'70px',width:'100%'},\r\n  container:{\r\n    width:'300px',\r\n    margin:'auto',\r\n    minHeight:'70vh',\r\n    padding:'2px',\r\n    borderRadius:'10px',\r\n    },\r\n\r\n  msgs:{\r\n    width:'250px',\r\n    marginBottom:'10px'\r\n\r\n    //backgroundColor:'blue',color:'white',marginLeft:'auto'\r\n  },\r\n  sendbox:{\r\n    width:'100%'\r\n  },\r\n  download:{\r\n    marginRight:'-15px',\r\n    color:'white'\r\n  }\r\n});\r\n\r\n\r\n\r\nconst Chatting=(props)=>{\r\n\r\n  let audio=new Audio('../incoming.mp3')\r\n  const classes = useStyles();\r\n\r\n  const chat=useSelector(state=>state.chatReducer)\r\n  const dispatch=useDispatch();\r\n  let link;\r\n  let room=props.match.params.room;\r\n  const emails=props.match.params.emails;\r\n  const roomName=props.roomName;\r\n  if(room!=roomName)link=`/personal/${room}/${emails}`;\r\n  else link=`/chat/${room}`;\r\n\r\n  const [message,setMessage]=useState(\"\");\r\n  const [flag,setFlag]=useState(false);\r\n  const [page,setPage]=useState(2);\r\n  const [olderMsgs,setOlderMsgs]=useState('block');\r\n  const sendbox=useRef(null)\r\n  const socket=io(url,{transports: ['websocket','polling']})\r\n  const token=localStorage.getItem('token')\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n\r\n\r\n    const email=useSelector(state=>state.userReducer.email)\r\n    const name=useSelector(state=>state.userReducer.name)\r\n\r\n    const socketConnections=(socket,name,email)=>{\r\n      socket.emit('create', room)\r\n      socket.emit('user-joined',name,room)\r\n      socket.on('receiveimg',data=>{\r\n              if(email===data.email)\r\n              {\r\n                    document.getElementById('loader').style.display='none';\r\n                    (async ()=>{\r\n                        dispatch({type:'add_chat',payload:{room,msg:data}})\r\n                        setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),500)\r\n                        sendbox.current.focus()\r\n                    })()\r\n               }\r\n        })\r\n\r\n\r\n      socket.on('receive',data=>{\r\n           dispatch({type:'add_recent',payload:{room,roomName,link}})\r\n\r\n           if(email===data.email)return;\r\n            console.log('received');\r\n            (async ()=>{\r\n\r\n                    if(!data.path)\r\n                    {\r\n                                    data.salt=data.salt.split(\",\")\r\n                                    data.iv=data.iv.split(\",\")\r\n\r\n                                    data.salt= new Uint8Array(data.salt) // salt and\r\n                                    data.iv= new Uint8Array(data.iv)    //iv for decrypting the message\r\n\r\n                                    await decryptFun(data.message,data.salt,data.iv)\r\n                                    .then(decrypted=>{\r\n                                        data.message=decrypted;  // decrypt the received message\r\n                                    })\r\n                      }\r\n\r\n                      (async ()=>{\r\n                                  dispatch({type:'add_chat',payload:{room,msg:data}})\r\n\r\n                                  if(!data.path)window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'})\r\n                                  else setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),500)\r\n\r\n                                  sendbox.current.focus()\r\n                        })()\r\n\r\n                        audio.play();\r\n                })()\r\n          })\r\n\r\n    }\r\n\r\n\r\n    async function getMessages(page){\r\n\r\n      await  secureAxios.post('getMessages',{room,page})\r\n             .then((response)=>{\r\n              const body=response.data\r\n              if(body.status==1)\r\n              {\r\n                if(!body.end)setOlderMsgs('block')\r\n                else setOlderMsgs('none')\r\n\r\n                async function setData()\r\n                {\r\n                            if(page==1)\r\n                            {\r\n                                await secureAxios.get('getUser')\r\n                                    .then((response)=>{\r\n                                          const body=response.data\r\n                                              dispatch({type:'load_user',payload:body})\r\n                                              socketConnections(socket,body.name,body.email)\r\n                                     })\r\n                                     .catch(err=>toast.error(err))\r\n                             }\r\n\r\n\r\n                             await (async function(){\r\n                                  const msgs=body.msgs\r\n                                  for(let i=0;i<msgs.length;i++)\r\n                                  {\r\n                                        const data=msgs[i]\r\n\r\n                                        if(!data.path){\r\n                                          console.log(\"salt \"+data.salt)\r\n                                          console.log(\"iv \"+data.iv)\r\n                                          data.salt=data.salt.split(\",\")\r\n                                          data.iv=data.iv.split(\",\")\r\n                                          for(let i=0;i<data.salt.length;i++)data.salt[i]=parseInt(data.salt[i])\r\n                                          for(let i=0;i<data.iv.length;i++)data.iv[i]=parseInt(data.iv[i])\r\n\r\n                                          data.salt= new Uint8Array(data.salt) // salt and\r\n                                          data.iv= new Uint8Array(data.iv)    //iv for decrypting the message\r\n                                          await decryptFun(data.message,data.salt,data.iv)\r\n                                          .then(decrypted=>{\r\n                                                              data.message=decrypted;  // decrypt the received message\r\n                                           })\r\n                                        }\r\n                                     }\r\n                                     dispatch({type:'load_chat',payload:{room,msgs}})\r\n                            })()\r\n\r\n                            if(page==1)\r\n                            {\r\n                               setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),350)\r\n                            }\r\n                            setPage(page=>page+1)\r\n               }\r\n\r\n               setData();\r\n\r\n             }\r\n        })\r\n        .catch(err=>{})\r\n\r\n\r\n\r\n    }\r\n\r\n  useEffect(()=>{\r\n       if(chat[room])socketConnections(socket,name,email)\r\n       else getMessages(1)\r\n\r\n       return ()=>{ socket.disconnect();  }\r\n  },[])\r\n\r\n\r\n\r\n\r\n\r\n  const sendMessage=(name,room,msg)=>{\r\n\r\n    if(msg==='')return;\r\n    let h=new Date().getHours();\r\n    let m=new Date().getMinutes();\r\n    h=(parseInt(h/10)==0)?('0'+h):h;\r\n    m=(parseInt(m/10)==0)?('0'+m):m;\r\n    const time=h+\":\"+m;\r\n    var text = msg\r\n    document.getElementById('loader').style.display='block'\r\n\r\n    let salt = window.crypto.getRandomValues(new Uint8Array(16));\r\n    let iv = window.crypto.getRandomValues(new Uint8Array(16));\r\n    console.log(salt,iv);\r\n\r\n    (async ()=>{\r\n      await dispatch({type:'add_chat',payload:{room,msg:{flag:0,email,room,name,message:msg,time}}})\r\n      window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'})\r\n      sendbox.current.focus()\r\n    })()\r\n\r\n\r\n    encryptFun(text,salt,iv).then(encrypted=>{\r\n      console.log(encrypted)\r\n      salt=[...salt]\r\n      iv=[...iv]\r\n      salt=salt.join(\",\")\r\n      iv=iv.join(\",\")\r\n\r\n      socket.emit('send',{flag:0,email,room,name,msg:encrypted,salt,iv,time,roomName,link}); // setMsgs(msgs=>[...msgs,{name,message}]);\r\n      document.getElementById('loader').style.display='none'\r\n      console.log('sent')\r\n      setMessage(\"\");\r\n\r\n    })\r\n\r\n  }\r\n\r\n\r\n    async function sendFile(){\r\n      let file=document.getElementById('file-input').files[0];\r\n\r\n      if(!document.getElementById('file-input').value)return\r\n      document.getElementById('file-input').value=''\r\n      document.getElementById('loader').style.display='block'\r\n\r\n\r\n      let h=new Date().getHours();\r\n      let m=new Date().getMinutes();\r\n      h=(parseInt(h/10)==0)?('0'+h):h;\r\n      m=(parseInt(m/10)==0)?('0'+m):m;\r\n      const time=h+\":\"+m;\r\n\r\n      let flag=2;\r\n      if(file.type.includes('image'))flag=1;\r\n\r\n      if(flag==1)\r\n      {\r\n            let options = { maxSizeMB: 1,  maxWidthOrHeight: 1920,  useWebWorker: true }\r\n            imageCompression(file, options)\r\n            .then(function (compressedFile) {\r\n                socket.emit('send',{flag,email,room,name,path:file.name,img:compressedFile,time,roomName,link});\r\n            })\r\n            .catch(function (error) {alert(error.message); console.log(error.message);  });\r\n      }\r\n      else\r\n      {\r\n            let reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n          //  alert(document.getElementById('file-input').files[0].value)\r\n\r\n            reader.onloadend = await function () {\r\n              const b64 = reader.result.replace(/^data:.+;base64,/, '');\r\n              socket.emit('send',{flag,email,room,name,path:file.name,img:b64,time});\r\n\r\n            };\r\n       }\r\n  }\r\n const rightStyle={marginLeft:'auto',backgroundColor:'#fffcb7',color:'black'}\r\n const arriveStyle={backgroundColor:'beige',color:'green',margin:'auto auto 10px auto'}\r\n\r\n  return <>\r\n  <div style={{position:'fixed',width:'100%'}}>\r\n  <Header2 name={roomName} {...props}/>\r\n  <center><CircularProgress id='loader' style={{marginTop:'100px',display:'none'}}/></center>\r\n\r\n  </div>\r\n  <div class={classes.main} >\r\n        <div class={classes.container} id='container'>\r\n          <div id='messages' class={classes.messageBox}  >\r\n          <Paper elevation={3} className={classes.paging} style={{display:olderMsgs}} onClick={ getMessages.bind(this,page)}><button class='btn btn-sm' s>Older Messages</button></Paper>\r\n          {\r\n\r\n            (chat[room]!=undefined)?chat[room].map((msg,id)=>{\r\n              let includeStyle=(email===msg.email)?rightStyle:{};\r\n\r\n              return <Paper  elevation={3} className={classes.msgs} style={includeStyle} >\r\n              {(msg.flag==0)?\r\n\r\n               <div style={{padding:'10px'}}>\r\n                  {(room===roomName)?<><b>{msg.name}</b><br/></>:null}\r\n                  <span>{msg.message}</span>\r\n                  <br />\r\n                  <span style={{float:'right'}}>{msg.time}</span>\r\n                </div>\r\n                :(msg.flag==1)?\r\n                <div style={{padding:'10px'}}>\r\n                  {(room===roomName)?<><b>{msg.name}</b><br/></>:null}\r\n                  <span><img src={`/uploads/${msg.path}/${token}`} height='100%' width='100%' /></span>\r\n                  <span style={{float:'right'}}>{msg.time}</span>\r\n                 </div>\r\n                 :\r\n                 <div style={{padding:'10px'}}>\r\n                   <b>{msg.name}</b>\r\n                   <br />\r\n                   <video width=\"100%\" height=\"100%\" controls>\r\n                     <source src={url+'/uploads/'+msg.path} type=\"video/mp4\" />\r\n                     <source src={url+'/uploads/'+msg.path} type=\"video/ogg\" />\r\n                   </video>\r\n                   <span style={{float:'right'}}>{msg.time}</span>\r\n                  </div>\r\n              }\r\n              </Paper>\r\n            })\r\n            :\r\n            null\r\n          }\r\n          </div>\r\n         </div>\r\n         <center>\r\n             <div class={classes.sendbox}>\r\n               <input type='text' ref={sendbox} placeholder='Type your message here' value={message} onChange={(evt)=>setMessage(evt.target.value)} autoFocus/>\r\n               <button className='btn btn-primary' onClick={sendMessage.bind(this,name,room,message)}>Send</button>\r\n             </div>\r\n             <br />\r\n             <div class={classes.sendbox}>\r\n                 <label for=\"file-input\">\r\n                  <AttachFileIcon style={{color:'blue',width:'80px',cursor:'pointer'}}/>\r\n                 </label>\r\n                 <input id=\"file-input\" type=\"file\" style={{display:'none'}} onChange={(evt)=>{\r\n                //  document.getElementById('preview').setAttribute('src', window.URL.createObjectURL(evt.target.files[0]))\r\n                  }}/>\r\n                 <button className='btn btn-sm btn-danger' onClick={sendFile.bind(this)}>Send</button>\r\n              </div>\r\n           </center>\r\n    </div>\r\n  </>\r\n}\r\n\r\nexport default Chatting\r\n"],"sourceRoot":""}