{"version":3,"sources":["url.js","components/loading.js","Auth/AuthenticatedHome.js","Auth/AuthRedirect.js","socketurl.js","components/header2.js","crypto/decrypt.js","crypto/encrypt.js","components/chatting.js","components/profile.js","components/friends.js","components/header.js","components/home.js","components/signin.js","components/signup.js","components/newroom.js","components/enterroom.js","components/changePassword.js","components/engine.js","Auth/AuthenticatedEnterroom.js","configReducer.js","configStore.js","index.js","Auth/AuthenticatedNewroom.js","Auth/AuthenticatedProfile.js","Auth/AuthenticatedChatting.js","Auth/AuthenticatedPersonalChatting.js"],"names":["url","useStyles","makeStyles","theme","root","marginTop","Loading","classes","className","CircularProgress","Authenticatedhome","Home","Authredirect","props","useState","auth","setAuth","exist","useSelector","state","groupReducer","useEffect","token","localStorage","getItem","axios","create","baseURL","headers","get","then","response","data","catch","err","redirect","to","io","flexGrow","menuButton","marginRight","spacing","title","Header2","AppBar","position","Toolbar","IconButton","edge","color","aria-label","onClick","history","push","Typography","variant","name","keyMaterial","decoder","TextDecoder","encoder","TextEncoder","PBKDF2","password","salt","iterations","length","hash","a","algorithm","window","crypto","subtle","importKey","encode","deriveKey","decryptFun","encrypted","iv","buffer","console","log","Uint8Array","from","atob","c","charCodeAt","key","decrypt","slice","salt_len","decrypted","decode","encryptFun","text","encrypt","concatennated","btoa","String","fromCharCode","toast","configure","green","minWidth","bullet","display","margin","transform","fontSize","pos","marginBottom","heading","textAlign","footer","float","paging","backgroundColor","messageBox","width","flexWrap","main","height","paddingTop","container","minHeight","padding","borderRadius","msgs","sendbox","download","Chatting","audio","Audio","chat","chatReducer","dispatch","useDispatch","room","match","params","roomName","message","setMessage","page","setPage","olderMsgs","setOlderMsgs","useRef","socket","transports","secureAxios","email","userReducer","socketConnections","emit","on","document","getElementById","style","type","payload","msg","setTimeout","scrollTo","top","scrollHeight","behaviour","current","focus","path","split","play","getMessages","post","body","status","error","i","parseInt","end","setData","disconnect","file","files","value","h","Date","getHours","m","getMinutes","time","flag","includes","options","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","img","alert","reader","FileReader","readAsDataURL","b64","result","replace","onloadend","rightStyle","marginLeft","id","class","Paper","elevation","bind","s","undefined","map","includeStyle","src","controls","ref","placeholder","onChange","evt","target","autoFocus","getRandomValues","join","for","cursor","paper","flexDirection","alignItems","avatar","palette","secondary","form","submit","Copyright","align","Link","href","getFullYear","connect","profile","option","Friends","React","openAccept","setOpenAccept","setProfile","openDisconnect","setOpenDisconnect","disconnectStatus","setDisconnectStatus","handleCloseAccept","handleClickOpenDisconnect","handleCloseDisconnect","friendReducer","friends","pendings","sent","Dialog","open","onClose","aria-labelledby","DialogTitle","DialogActions","Button","aria-describedby","Container","component","maxWidth","CssBaseline","Divider","List","sort","b","index","ListItem","button","ListItemAvatar","ListItemText","primary","ListItemSecondaryAction","email1","email2","Box","mt","drawerWidth","searchBar","drawer","breakpoints","up","flexShrink","appBar","toolbar","mixins","drawerPaper","content","Transition","forwardRef","Slide","direction","Header","useTheme","mobileOpen","setMobileOpen","handleDrawerToggle","openSearch","setOpenSearch","searchstring","setSearchstring","searchList","setSearchList","handleCloseSearch","menulist","DirectionsRunIcon","AddIcon","ExitToAppIcon","items","removeItem","signout","ListItemIcon","createElement","fullScreen","TransitionComponent","TextField","fullWidth","label","preventDefault","users","autoComplete","user","Tabs","indicatorColor","textColor","Tab","icon","changeValue","Hidden","smUp","implementation","Drawer","anchor","ModalProps","keepMounted","xsDown","flex","setOpen","openDel","setOpenDel","edit","setEdit","newPassword","setNewPassword","handleClose","handleCloseDel","latest","rooms","exitRoom","DialogContent","DialogContentText","success","Fab","Avatar","tabLink","justifyContent","background","Enterroom","reducer","combineReducers","action","filter","l","r","newState","JSON","parse","stringify","p","concat","profileReducer","store","createStore","applyMiddleware","thunk","ReactDom","render","exact","setValue","componentList","setEmail","setPassword","noValidate","required","event","pass","autoClose","setItem","Grid","item","xs","setName","confirmPassword","setConfirmPassword","otp","setOtp","receivedOtp","setReceivedOtp","info","Newroom","Authenticatednewroom","Profile","Authenticatedprofile","setStatus","setOption","profileEmail","find","this","setRedirect","Authenticatedchatting","friendName","emails","f","AuthenticatedpersonalChatting"],"mappings":"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","file":"static/js/main.b480618f.chunk.js","sourcesContent":["const url=''\r\nexport default url\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n      marginTop:'50vh'\r\n      },\r\n}));\r\n\r\nexport default function Loading() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n  );\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\nexport default function Authenticatedhome(Home,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n\r\n  useEffect(()=>{\r\n    if(exist)setAuth(1);\r\n    else\r\n    {\r\n      const token=localStorage.getItem('token')\r\n      const secureAxios=axios.create(\r\n                            {\r\n                             baseURL:url,\r\n                             headers:{\r\n                              \"Authorization\":`bearer ${token}`\r\n                            }\r\n                          })\r\n\r\n        secureAxios.get('getRooms')\r\n        .then((response)=>{\r\n              const body=response.data\r\n              setAuth(1)\r\n\r\n        })\r\n        .catch(err=>{ setAuth(2);  })\r\n\r\n    }\r\n\r\n  },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Home {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {Redirect} from 'react-router-dom'\r\n\r\nexport default function Authredirect({redirect}){\r\n  return <Redirect to={'/'+redirect} />\r\n\r\n}\r\n","import io from 'socket.io-client';\r\nconst socket = io();\r\nexport default socket\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nexport default function Header2(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n            <ArrowBackIcon onClick={()=>props.history.push('/')}/>\r\n          </IconButton>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            {props.name}\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n","const decoder = new TextDecoder();\r\nconst encoder = new TextEncoder();\r\n\r\nconst fromBase64 = buffer =>\r\n  Uint8Array.from(atob(buffer), c => c.charCodeAt(0));\r\n\r\nconst PBKDF2 = async (\r\n  password, salt, iterations,\r\n  length, hash, algorithm =  'AES-CBC') => {\r\n\r\n  const keyMaterial = await window.crypto.subtle.importKey(\r\n    'raw',\r\n    encoder.encode(password),\r\n    {name: 'PBKDF2'},\r\n    false,\r\n    ['deriveKey']\r\n  );\r\n  return await window.crypto.subtle.deriveKey(\r\n    {\r\n      name: 'PBKDF2',\r\n      salt: encoder.encode(salt),\r\n      iterations,\r\n      hash\r\n    },\r\n    keyMaterial,\r\n    { name: algorithm, length },\r\n    false, // we don't need to export our key!!!\r\n    ['encrypt', 'decrypt']\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\nconst decryptFun=(encrypted,salt,iv)=>{\r\n //encrypted = fromBase64('g9cGh/FKtMV1LhnGvii6lBovkZihMw8CqHgwR7h64z25GXqNhzAdrOtUj6iaPXxQTP9pax1soyzwbFAoCQP1CQ==');\r\nconsole.log(encrypted)\r\nencrypted=fromBase64(encrypted)\r\nconsole.log(encrypted)\r\nconst salt_len =16;\r\nconst iv_len = 16;\r\nconsole.log(iv)\r\nconsole.log(salt)\r\n\r\nreturn (async ()=>{\r\n    const key=await  PBKDF2('my password', salt, 100000, 256, 'SHA-256');\r\n    const decrypted =await window.crypto.subtle.decrypt(\r\n             { name: \"AES-CBC\", iv },\r\n             key,\r\n             encrypted.slice(salt_len + iv_len)\r\n          );\r\n          console.log(decrypted)\r\n    return decoder.decode(decrypted)\r\n  })()\r\n\r\n}\r\n//console.log(decoder.decode(decrypted));\r\n\r\nexport default decryptFun\r\n","const encoder = new TextEncoder();\r\nlet keyMaterial\r\n\r\nconst toBase64 = buffer =>\r\n  btoa(String.fromCharCode(...new Uint8Array(buffer)));\r\n\r\nconst PBKDF2 = async (\r\n  password, salt, iterations,\r\n  length, hash, algorithm =  'AES-CBC') => {\r\n\r\n  keyMaterial = await window.crypto.subtle.importKey(\r\n    'raw',\r\n    encoder.encode(password),\r\n    {name: 'PBKDF2'},\r\n    false,\r\n    ['deriveKey']\r\n  );\r\n\r\n\r\n  return await window.crypto.subtle.deriveKey(\r\n      {\r\n        name: 'PBKDF2',\r\n        salt: encoder.encode(salt),\r\n        iterations,\r\n        hash\r\n      },\r\n      keyMaterial,\r\n      { name: algorithm, length },\r\n      false, // we don't need to export our key!!!\r\n      ['encrypt', 'decrypt']\r\n    );\r\n}\r\n\r\n\r\nconst encryptFun=(text,salt,iv)=>{\r\n\r\n  console.log(\"salt \"+salt+\" iv \"+iv)\r\n  console.log(text);\r\n  text=encoder.encode(text);\r\n\r\n  console.log(text);\r\n  return (async ()=>{\r\n               const key = await PBKDF2('my password', salt, 100000, 256, 'SHA-256');\r\n               let encrypted =await window.crypto.subtle.encrypt(\r\n                {name: \"AES-CBC\", iv },\r\n                key,\r\n                text\r\n              );\r\n              console.log(`Encrypted ${encrypted}`);\r\n\r\n              const concatennated=toBase64([...salt,...iv,...new Uint8Array(encrypted)])\r\n              console.log(`concatennated ${concatennated}`)\r\n              return concatennated;\r\n        })()\r\n\r\n}\r\n\r\nexport default encryptFun\r\n","import {React,useRef,useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport imageCompression from 'browser-image-compression';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport '../css/chat.css'\r\nimport Header2 from './header2'\r\nimport io from 'socket.io-client';\r\nimport decryptFun from '../crypto/decrypt'\r\nimport encryptFun from '../crypto/encrypt'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst green='#23D0E0'\r\n\r\nlet socket;\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minWidth: 275,\r\n  },\r\n  bullet: {\r\n    display: 'inline-block',\r\n    margin: '0 2px',\r\n    transform: 'scale(0.8)',\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n  heading:{\r\n    textAlign:'justifyContent'\r\n  },\r\n  footer:{\r\n    float:'right'\r\n  },\r\n  paging:{\r\n    margin:'auto',\r\n    backgroundColor:'beige',\r\n    color:'black',\r\n    marginBottom:'10px'\r\n  },\r\n  messageBox:{\r\n    display: 'flex',\r\n    width:'100%',\r\n    flexWrap: 'wrap',\r\n    backgroundColor:green,\r\n  },\r\n  main:{ backgroundColor:green,height:'100%',paddingTop:'70px',width:'100%'},\r\n  container:{\r\n    width:'300px',\r\n    margin:'auto',\r\n    minHeight:'70vh',\r\n    padding:'2px',\r\n    borderRadius:'10px',\r\n    },\r\n\r\n  msgs:{\r\n    width:'250px',\r\n    marginBottom:'10px',\r\n    backgroundColor:'#fffcb7',\r\n    color:'black'\r\n\r\n    //backgroundColor:'blue',color:'white',marginLeft:'auto'\r\n  },\r\n  sendbox:{\r\n    width:'100%'\r\n  },\r\n  download:{\r\n    marginRight:'-15px',\r\n    color:'white'\r\n  }\r\n});\r\n\r\n\r\n\r\nconst Chatting=(props)=>{\r\n\r\n  let audio=new Audio('../incoming.mp3')\r\n  const classes = useStyles();\r\n\r\n  const chat=useSelector(state=>state.chatReducer)\r\n  const dispatch=useDispatch();\r\n\r\n  let room=props.match.params.room;\r\n  const roomName=props.roomName;\r\n\r\n  const [message,setMessage]=useState(\"\");\r\n  const [flag,setFlag]=useState(false);\r\n  const [page,setPage]=useState(2);\r\n  const [olderMsgs,setOlderMsgs]=useState('block');\r\n  const sendbox=useRef(null)\r\n  const socket=io(url,{transports: ['websocket','polling']})\r\n  const token=localStorage.getItem('token')\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n\r\n\r\n    const email=useSelector(state=>state.userReducer.email)\r\n    const name=useSelector(state=>state.userReducer.name)\r\n\r\n    const socketConnections=(socket,name,email)=>{\r\n      socket.emit('create', room)\r\n      socket.emit('user-joined',name,room)\r\n      socket.on('receiveimg',data=>{\r\n              if(email===data.email)\r\n              {\r\n                    document.getElementById('loader').style.display='none';\r\n                    (async ()=>{\r\n                        dispatch({type:'add_chat',payload:{room,msg:data}})\r\n                        setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),500)\r\n                        sendbox.current.focus()\r\n                    })()\r\n               }\r\n        })\r\n\r\n\r\n      socket.on('receive',data=>{\r\n           if(email===data.email)return;\r\n            console.log('received');\r\n            (async ()=>{\r\n\r\n                    if(!data.path)\r\n                    {\r\n                                    data.salt=data.salt.split(\",\")\r\n                                    data.iv=data.iv.split(\",\")\r\n\r\n                                    data.salt= new Uint8Array(data.salt) // salt and\r\n                                    data.iv= new Uint8Array(data.iv)    //iv for decrypting the message\r\n\r\n                                    await decryptFun(data.message,data.salt,data.iv)\r\n                                    .then(decrypted=>{\r\n                                        data.message=decrypted;  // decrypt the received message\r\n                                    })\r\n                      }\r\n\r\n                      (async ()=>{\r\n                                  dispatch({type:'add_chat',payload:{room,msg:data}})\r\n                                  if(!data.path)window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'})\r\n                                  else setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),500)\r\n\r\n                                  sendbox.current.focus()\r\n                        })()\r\n\r\n                        audio.play();\r\n                })()\r\n          })\r\n\r\n    }\r\n\r\n\r\n    async function getMessages(page){\r\n\r\n      await  secureAxios.post('getMessages',{room,page})\r\n             .then((response)=>{\r\n              const body=response.data\r\n              if(body.status==1)\r\n              {\r\n                if(!body.end)setOlderMsgs('block')\r\n                else setOlderMsgs('none')\r\n\r\n                async function setData()\r\n                {\r\n                            if(page==1)\r\n                            {\r\n                                await secureAxios.get('getUser')\r\n                                    .then((response)=>{\r\n                                          const body=response.data\r\n                                              dispatch({type:'load_user',payload:body})\r\n                                              socketConnections(socket,body.name,body.email)\r\n                                     })\r\n                                     .catch(err=>toast.error(err))\r\n                             }\r\n\r\n\r\n                             await (async function(){\r\n                                  const msgs=body.msgs\r\n                                  for(let i=0;i<msgs.length;i++)\r\n                                  {\r\n                                        const data=msgs[i]\r\n\r\n                                        if(!data.path){\r\n                                          console.log(\"salt \"+data.salt)\r\n                                          console.log(\"iv \"+data.iv)\r\n                                          data.salt=data.salt.split(\",\")\r\n                                          data.iv=data.iv.split(\",\")\r\n                                          for(let i=0;i<data.salt.length;i++)data.salt[i]=parseInt(data.salt[i])\r\n                                          for(let i=0;i<data.iv.length;i++)data.iv[i]=parseInt(data.iv[i])\r\n\r\n                                          data.salt= new Uint8Array(data.salt) // salt and\r\n                                          data.iv= new Uint8Array(data.iv)    //iv for decrypting the message\r\n                                          await decryptFun(data.message,data.salt,data.iv)\r\n                                          .then(decrypted=>{\r\n                                                              data.message=decrypted;  // decrypt the received message\r\n                                           })\r\n                                        }\r\n                                     }\r\n                                     dispatch({type:'load_chat',payload:{room,msgs}})\r\n                            })()\r\n\r\n                            if(page==1)\r\n                            {\r\n                               setTimeout(()=>window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'}),350)\r\n                            }\r\n                            setPage(page=>page+1)\r\n               }\r\n\r\n               setData();\r\n\r\n             }\r\n        })\r\n        .catch(err=>{})\r\n\r\n\r\n\r\n    }\r\n\r\n  useEffect(()=>{\r\n       if(chat[room])socketConnections(socket,name,email)\r\n       else getMessages(1)\r\n\r\n       return ()=>{ socket.disconnect();  }\r\n  },[])\r\n\r\n\r\n\r\n\r\n\r\n  const sendMessage=(name,room,msg)=>{\r\n\r\n    if(msg==='')return;\r\n    let h=new Date().getHours();\r\n    let m=new Date().getMinutes();\r\n    h=(parseInt(h/10)==0)?('0'+h):h;\r\n    m=(parseInt(m/10)==0)?('0'+m):m;\r\n    const time=h+\":\"+m;\r\n    var text = msg\r\n    document.getElementById('loader').style.display='block'\r\n\r\n    let salt = window.crypto.getRandomValues(new Uint8Array(16));\r\n    let iv = window.crypto.getRandomValues(new Uint8Array(16));\r\n    console.log(salt,iv);\r\n\r\n    (async ()=>{\r\n      await dispatch({type:'add_chat',payload:{room,msg:{flag:0,email,room,name,message:msg,time}}})\r\n      window.scrollTo({top:document.getElementById('messages').scrollHeight,behaviour:'smooth'})\r\n      sendbox.current.focus()\r\n    })()\r\n\r\n\r\n    encryptFun(text,salt,iv).then(encrypted=>{\r\n      console.log(encrypted)\r\n      salt=[...salt]\r\n      iv=[...iv]\r\n      salt=salt.join(\",\")\r\n      iv=iv.join(\",\")\r\n\r\n      socket.emit('send',{flag:0,email,room,name,msg:encrypted,salt,iv,time}); // setMsgs(msgs=>[...msgs,{name,message}]);\r\n      document.getElementById('loader').style.display='none'\r\n      console.log('sent')\r\n      setMessage(\"\");\r\n\r\n    })\r\n\r\n  }\r\n\r\n\r\n    async function sendFile(){\r\n      let file=document.getElementById('file-input').files[0];\r\n\r\n      if(!document.getElementById('file-input').value)return\r\n      document.getElementById('file-input').value=''\r\n      document.getElementById('loader').style.display='block'\r\n\r\n\r\n      let h=new Date().getHours();\r\n      let m=new Date().getMinutes();\r\n      h=(parseInt(h/10)==0)?('0'+h):h;\r\n      m=(parseInt(m/10)==0)?('0'+m):m;\r\n      const time=h+\":\"+m;\r\n\r\n      let flag=2;\r\n      if(file.type.includes('image'))flag=1;\r\n\r\n      if(flag==1)\r\n      {\r\n            let options = { maxSizeMB: 1,  maxWidthOrHeight: 1920,  useWebWorker: true }\r\n            imageCompression(file, options)\r\n            .then(function (compressedFile) {\r\n                socket.emit('send',{flag,email,room,name,path:file.name,img:compressedFile,time});\r\n            })\r\n            .catch(function (error) {alert(error.message); console.log(error.message);  });\r\n      }\r\n      else\r\n      {\r\n            let reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n          //  alert(document.getElementById('file-input').files[0].value)\r\n\r\n            reader.onloadend = await function () {\r\n              const b64 = reader.result.replace(/^data:.+;base64,/, '');\r\n              socket.emit('send',{flag,email,room,name,path:file.name,img:b64,time});\r\n\r\n            };\r\n       }\r\n  }\r\n const rightStyle={marginLeft:'auto'}\r\n const arriveStyle={backgroundColor:'beige',color:'green',margin:'auto auto 10px auto'}\r\n\r\n  return <>\r\n  <div style={{position:'fixed',width:'100%'}}>\r\n  <Header2 name={roomName} {...props}/>\r\n  <center><CircularProgress id='loader' style={{marginTop:'100px',display:'none'}}/></center>\r\n\r\n  </div>\r\n  <div class={classes.main} >\r\n        <div class={classes.container} id='container'>\r\n          <div id='messages' class={classes.messageBox}  >\r\n          <Paper elevation={3} className={classes.paging} style={{display:olderMsgs}} onClick={ getMessages.bind(this,page)}><button class='btn btn-sm' s>Older Messages</button></Paper>\r\n          {\r\n\r\n            (chat[room]!=undefined)?chat[room].map((msg,id)=>{\r\n              let includeStyle=(email===msg.email)?rightStyle:{};\r\n\r\n              return <Paper  elevation={3} className={classes.msgs} style={includeStyle} >\r\n              {(msg.flag==0)?\r\n\r\n               <div style={{padding:'10px'}}>\r\n                  <b>{msg.name}</b>\r\n                  <br />\r\n                  <span>{msg.message}</span>\r\n                  <br />\r\n                  <span style={{float:'right'}}>{msg.time}</span>\r\n                </div>\r\n                :(msg.flag==1)?\r\n                <div style={{padding:'10px'}}>\r\n                  <b>{msg.name}</b>\r\n                  <br />\r\n                  <span><img src={`/uploads/${msg.path}/${token}`} height='100%' width='100%' /></span>\r\n                  <span style={{float:'right'}}>{msg.time}</span>\r\n                 </div>\r\n                 :\r\n                 <div style={{padding:'10px'}}>\r\n                   <b>{msg.name}</b>\r\n                   <br />\r\n                   <video width=\"100%\" height=\"100%\" controls>\r\n                     <source src={url+'/uploads/'+msg.path} type=\"video/mp4\" />\r\n                     <source src={url+'/uploads/'+msg.path} type=\"video/ogg\" />\r\n                   </video>\r\n                   <span style={{float:'right'}}>{msg.time}</span>\r\n                  </div>\r\n              }\r\n              </Paper>\r\n            })\r\n            :\r\n            null\r\n          }\r\n          </div>\r\n         </div>\r\n         <center>\r\n             <div class={classes.sendbox}>\r\n               <input type='text' ref={sendbox} placeholder='Type your message here' value={message} onChange={(evt)=>setMessage(evt.target.value)} autoFocus/>\r\n               <button className='btn btn-primary' onClick={sendMessage.bind(this,name,room,message)}>Send</button>\r\n             </div>\r\n             <br />\r\n             <div class={classes.sendbox}>\r\n                 <label for=\"file-input\">\r\n                  <AttachFileIcon style={{color:'blue',width:'80px',cursor:'pointer'}}/>\r\n                 </label>\r\n                 <input id=\"file-input\" type=\"file\" style={{display:'none'}} />\r\n                 <button className='btn btn-sm btn-danger' onClick={sendFile.bind(this)}>Send</button>\r\n              </div>\r\n           </center>\r\n    </div>\r\n  </>\r\n}\r\n\r\nexport default Chatting\r\n","import io from 'socket.io-client';\r\nimport React,{useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\r\n\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport { ReactSearchAutocomplete } from 'react-search-autocomplete'\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport socket from '../socketurl'\r\n\r\nimport Header2 from './header2'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  }\r\n\r\n}));\r\n\r\n\r\n\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\n\r\nconst connect=(secureAxios,dispatch,profile,option)=>{\r\n     secureAxios.post('setFriend',{option,profile})\r\n     .then((response)=>{\r\n         const body=response.data\r\n         if(body.status==1)dispatch({type:'set_friend',payload:{option,profile}})\r\n     })\r\n     .catch(err=>{\r\n       alert(err)\r\n     })\r\n}\r\n\r\n\r\n\r\nexport default function Profile(props) {\r\n\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n\r\n  const [status, setStatus] = useState(\"Not connected\");\r\n  const [option, setOption] = useState(\"Connect\");\r\n\r\n  const token=localStorage.getItem('token')\r\n  const profile=useSelector(state=>state.profileReducer)\r\n  const profileName=profile.name\r\n  const profileEmail=profile.email\r\n  if(!profile.email)props.history.push('/')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n  const exist=useSelector(state=>state.friendReducer.exist)\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  const name=useSelector(state=>state.userReducer.name)\r\n  const friends=useSelector(state=>state.friendReducer.friends)\r\n  const pendings=useSelector(state=>state.friendReducer.pendings)\r\n  const sent=useSelector(state=>state.friendReducer.sent)\r\n\r\n  useEffect(()=>{\r\n      if(friends?.find(profile=>profile.email==profileEmail)){setStatus('Connected'); setOption('Disconnect');  }\r\n      else if(pendings?.find(profile=>profile.email==profileEmail)){setStatus('Pending'); setOption('Accept'); }\r\n      else if(sent?.find(profile=>profile.email==profileEmail)){ setStatus('Request sent'); setOption('Cancel request');   }\r\n      else {setStatus('Not Connected'); setOption('Connect'); }\r\n\r\n      if(exist)return;\r\n\r\n      secureAxios.get('getFriend')\r\n      .then((response)=>{\r\n            const body=response.data\r\n\r\n            if(body.status==1){\r\n                dispatch({type:'load_friend',payload:{pendings:body.pendings,friends:body.friends,sent:body.sent,exist:true}})\r\n                dispatch({type:'load_user',payload:{name:body.name,email:body.email,exist:true}})\r\n            }\r\n      })\r\n      .catch(err=>{\r\n        alert(err)\r\n        props.history.push('/signin');\r\n      })\r\n\r\n  },[sent,friends,pendings])\r\n\r\n\r\n  return (\r\n    <>\r\n    <Header2 name='Profile' {...props}/>\r\n\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <center><AccountBoxIcon style={{color:'blue',width:'70px',height:'70px'}}/></center>\r\n      <center><p>{profile.name}</p></center>\r\n      <center><p>{status}</p></center>\r\n\r\n      <button class='btn btn-sm btn-primary' onClick={connect.bind(this,secureAxios,dispatch,profile,option)} >{option}</button>\r\n      {(status=='Pending')?<button class='btn btn-sm btn-danger' onClick={connect.bind(this,secureAxios,dispatch,profile,'Disconnect')}>Decline</button>:null }\r\n      <Box mt={8} className={classes.footer}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\nexport {connect}\r\n","import io from 'socket.io-client';\r\nimport React,{useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport socket from '../socketurl'\r\n\r\nimport Header from './header'\r\nimport {connect} from './profile'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  main:{height:'100vh'}\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\n\r\nexport default function Friends(props) {\r\n\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n\r\n  const [openAccept, setOpenAccept] = React.useState(false);\r\n  const [profile, setProfile] = React.useState(null);\r\n  const [openDisconnect, setOpenDisconnect] = React.useState(false);\r\n  const [disconnectStatus, setDisconnectStatus] = React.useState('Disconnect');\r\n\r\n\r\n  const handleClickOpenAccept = () => {\r\n    setOpenAccept(true);\r\n  };\r\n\r\n  const handleCloseAccept = () => {\r\n     setOpenAccept(false);\r\n  };\r\n\r\n  const handleClickOpenDisconnect = () => {\r\n    setOpenDisconnect(true);\r\n  };\r\n\r\n  const handleCloseDisconnect = () => {\r\n    setOpenDisconnect(false);\r\n  };\r\n\r\n  const token=localStorage.getItem('token')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n  const exist=useSelector(state=>state.friendReducer.exist)\r\n  const name=useSelector(state=>state.userReducer.name)\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  const friends=useSelector(state=>state.friendReducer.friends)\r\n  const pendings=useSelector(state=>state.friendReducer.pendings)\r\n\r\n\r\n  useEffect(()=>{\r\n\r\n      if(exist)return;\r\n\r\n      secureAxios.get('getFriend')\r\n      .then((response)=>{\r\n            const body=response.data\r\n\r\n            if(body.status==1){\r\n                dispatch({type:'load_friend',payload:{friends:body.friends,pendings:body.pendings,sent:body.sent,exist:true}})\r\n                dispatch({type:'load_user',payload:{name:body.name,email:body.email,exist:true}})\r\n            }\r\n      })\r\n      .catch(err=>{\r\n        toast.error(err)\r\n        props.history.push('/signin');\r\n      })\r\n\r\n  },[])\r\n\r\n  const generate=(email1,email2)=>{\r\n\r\n      let email3=(email1>email2)?email1:email2\r\n      let email4=(email1<email2)?email1:email2\r\n\r\n      return email4+'-'+email3\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div class={classes.main}>\r\n    <Dialog open={openAccept} onClose={handleCloseAccept} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Are you sure want to connect?</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={()=>{handleCloseAccept();  }} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={()=>{connect(secureAxios,dispatch,profile,'Accept'); handleCloseAccept();}} color=\"primary\">\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={openDisconnect}\r\n        onClose={handleCloseDisconnect}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">Are you sure want to {disconnectStatus}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDisconnect} color=\"primary\">\r\n            No\r\n          </Button>\r\n          <Button onClick={()=>{connect(secureAxios,dispatch,profile,'Disconnect'); handleCloseDisconnect();}} color=\"primary\" autoFocus>\r\n            Yes\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n\r\n      <Divider />\r\n      <br/><br/>\r\n      <div>\r\n      <h6>Connection Requests</h6>\r\n      <Divider />\r\n      <List>\r\n        {pendings.sort((a,b)=>{return (a<b)?-1:1}).map((profile, index) => (\r\n          <ListItem button key={profile.name} onClick={()=>props.history.push(`/profile/${profile.email}-${profile.name}`)}>\r\n              <ListItemAvatar>\r\n                      <AccountCircleIcon color=\"primary\" />\r\n              </ListItemAvatar>\r\n              <ListItemText primary={profile.name} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <CheckIcon style={{color:'green'}} onClick={()=>{setProfile(profile);   handleClickOpenAccept();}}/>\r\n                </IconButton>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <ClearIcon color='secondary' onClick={()=>{setProfile(profile);  setDisconnectStatus('Decline'); handleClickOpenDisconnect();}}/>\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <br /><br />\r\n      <h6>Connections</h6>\r\n      <Divider />\r\n      <List>\r\n        {friends.sort((a,b)=>{return (a<b)?-1:1}).map((profile, index) => (\r\n          <ListItem button key={profile.name} onClick={()=>props.history.push(`/profile/${profile.email}-${profile.name}`)}>\r\n              <ListItemAvatar>\r\n                      <AccountCircleIcon color=\"primary\" />\r\n              </ListItemAvatar>\r\n              <ListItemText primary={profile.name} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                    <ClearIcon color='secondary' onClick={()=>{setProfile(profile); setDisconnectStatus('Disconnect'); handleClickOpenDisconnect();}} />\r\n                </IconButton>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                    <ChatIcon color='primary' onClick={()=>props.history.push(`/personal/${generate(profile.email,email)}/${profile.email}-${email}`)} />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      </div>\r\n      <Box mt={8} className={classes.footer}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React,{createElement,useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport InboxIcon from '@material-ui/icons/Inbox';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport DirectionsRunIcon from '@material-ui/icons/DirectionsRun';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport PersonPinIcon from '@material-ui/icons/PersonPin';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport Authenticatedhome from '../Auth/AuthenticatedHome';\r\nimport Authenticatedprofile from '../Auth/AuthenticatedProfile';\r\nimport Authenticatedchatting from '../Auth/AuthenticatedChatting';\r\nimport Authredirect from '../Auth/AuthRedirect'\r\n\r\nimport Home from './home';\r\nimport Chatting from './chatting';\r\nimport Profile from './profile';\r\nimport Friends from './friends';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n    searchBar: {\r\n     position: 'relative',\r\n   },\r\n  drawer: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  appBar: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      marginLeft: drawerWidth,\r\n    },\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  }\r\n}));\r\n\r\n\r\n\r\nconst signout=(push,dispatch)=>\r\n{\r\n  localStorage.removeItem('token')\r\n  localStorage.removeItem('name')\r\n  localStorage.removeItem('email')\r\n\r\n  dispatch({type:'clear'})\r\n  push('/signin')\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n\r\nexport default function Header(props)\r\n{\r\n    const { window } = props;\r\n    const container = window !== undefined ? () => window().document.body : undefined;\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [mobileOpen, setMobileOpen] = React.useState(false);\r\n    const dispatch=useDispatch()\r\n\r\n\r\n\r\n     const handleDrawerToggle = () => {\r\n       (props.match.params.room)?props.history.push('/'):setMobileOpen(!mobileOpen);\r\n     };\r\n\r\n     const [latest,setLatest]=useState([])\r\n     const [openSearch, setOpenSearch] = React.useState(false);\r\n     const [searchstring, setSearchstring] = React.useState(\"\");\r\n     const [searchList, setSearchList] = React.useState([]);\r\n\r\n         const token=localStorage.getItem('token')\r\n\r\n         const secureAxios=axios.create(\r\n                               {\r\n                                baseURL:url,\r\n                                headers:{\r\n                                 \"Authorization\":`bearer ${token}`\r\n                               }\r\n                             })\r\n\r\n           const handleClickOpenSearch = () => {\r\n             setOpenSearch(true);\r\n           };\r\n\r\n           const handleCloseSearch = () => {\r\n             setOpenSearch(false);\r\n           };\r\n\r\n\r\n               const searching=(evt)=>{\r\n                 evt.preventDefault()\r\n                 setSearchstring(evt.target.value)\r\n\r\n                 secureAxios.post('searchPeople',{searchstring})\r\n                 .then(response=>{\r\n                     const body=response.data\r\n                     if(body.status)setSearchList(body.users)\r\n                     else toast.error('Something went wrong',{autoComplete:1500})\r\n                 })\r\n               }\r\n//alert(JSON.stringify(props))\r\n     const email=useSelector(state=>state.userReducer.email)\r\n     const name=useSelector(state=>state.userReducer.name)\r\n\r\n    if(!name || !email)\r\n     {\r\n       const secureAxios=axios.create(\r\n                             {\r\n                              baseURL:url,\r\n                              headers:{\r\n                               \"Authorization\":`bearer ${token}`\r\n                             }\r\n                           })\r\n\r\n        secureAxios.get('getUser')\r\n        .then((response)=>{\r\n                              const body=response.data\r\n                              dispatch({type:'load_user',payload:body})\r\n        })\r\n        .catch(err=>toast.error(err))\r\n     }\r\n     const menulist=[['Enter group','/enterroom',DirectionsRunIcon],['Create group','/newroom',AddIcon],['Sign out','/signin',ExitToAppIcon]]\r\n\r\n\r\n     const drawer = (\r\n       <div>\r\n       <center><AccountCircleIcon style={{color:'blue',width:'70px',height:'70px'}}/></center>\r\n       <center><p>{name}</p></center>\r\n        <div className={classes.toolbar} style={{marginTop:'-60px'}}/>\r\n         <Divider />\r\n         <List>\r\n           {menulist.map((items, index) => (\r\n             <ListItem button key={items[0]} onClick={()=>{(items[0]==='Sign out')?signout(props.history.push,dispatch):props.history.push(items[1])}}>\r\n               <ListItemIcon>{createElement(items[2], {})}</ListItemIcon>\r\n               <ListItemText primary={items[0]} />\r\n             </ListItem>\r\n           ))}\r\n         </List>\r\n       </div>\r\n     );\r\n\r\n  return <div >\r\n     <Dialog fullScreen open={openSearch} onClose={handleCloseSearch} TransitionComponent={Transition}>\r\n       <AppBar className={classes.searchBar}>\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" color=\"inherit\" onClick={handleCloseSearch} aria-label=\"close\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n          <TextField\r\n            style={{backgroundColor:'white',borderRadius:'10px'}}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            name=\"search\"\r\n            label='Search people'\r\n            type=\"text\"\r\n            value={searchstring}\r\n            onChange={searching}\r\n            autoComplete=\"current-password\"\r\n          />\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <List>\r\n      {\r\n        searchList.map(user=>{\r\n            return <ListItem button>\r\n              <ListItemText primary={user.name} secondary={user.email} onClick={()=>props.history.push(`/profile/${user.email}-${user.name}`)}/>\r\n            </ListItem>\r\n        })\r\n      }\r\n      </List>\r\n      </Dialog>\r\n  <AppBar position=\"static\" className={classes.appBar}>\r\n    <Tabs\r\n    variant=\"fullWidth\"\r\n    indicatorColor=\"primary\"\r\n    textColor=\"primary\"\r\n    aria-label=\"icon tabs example\"\r\n   >\r\n      <Tab icon={<HomeIcon style={{color:'white'}}/>}  onClick={()=>props.changeValue(0)} aria-label=\"phone\" />\r\n      <Tab icon={<ChatIcon style={{color:'white'}}/>}  onClick={()=>props.changeValue(1)} aria-label=\"favorite\" />\r\n      <Tab icon={<AccountBoxIcon style={{color:'white'}}/>}  onClick={()=>props.changeValue(2)} aria-label=\"person\" />\r\n      <Tab icon={<SearchIcon style={{color:'white'}}/>}  onClick={handleClickOpenSearch} aria-label=\"search\" />\r\n      <Tab icon={<MenuIcon style={{color:'white'}}/>}\r\n        aria-label=\"open drawer\"\r\n        edge=\"start\"\r\n        onClick={handleDrawerToggle}\r\n        className={classes.menuButton}\r\n      />\r\n    </Tabs>\r\n\r\n  </AppBar>\r\n  <nav className={classes.drawer}  aria-label=\"mailbox folders\">\r\n    {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n    <Hidden smUp implementation=\"css\">\r\n      <Drawer\r\n        container={container}\r\n        variant=\"temporary\"\r\n        anchor={'right'}\r\n        open={mobileOpen}\r\n        onClose={handleDrawerToggle}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n        ModalProps={{\r\n          keepMounted: true, // Better open performance on mobile.\r\n        }}\r\n      >\r\n        {drawer}\r\n      </Drawer>\r\n    </Hidden>\r\n    <Hidden xsDown implementation=\"css\">\r\n      <Drawer\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n        variant=\"permanent\"\r\n        open\r\n      >\r\n        {drawer}\r\n      </Drawer>\r\n    </Hidden>\r\n  </nav>\r\n  </div>\r\n\r\n\r\n\r\n}\r\n","import io from 'socket.io-client';\r\nimport React,{useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport socket from '../socketurl'\r\n\r\nimport Header from './header'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n   position: 'relative',\r\n },\r\n title: {\r\n   marginLeft: theme.spacing(2),\r\n   flex: 1,\r\n },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  main:{height:'100vh'}\r\n\r\n}));\r\n\r\n\r\n\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\n\r\nexport default function Home(props) {\r\n\r\n\r\n\r\n\r\n\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n//  const [rooms,setRooms]=useState([])\r\n//  const [latest,setLatest]=useState([])\r\n  const [open, setOpen] = React.useState(false);\r\n  const [openDel, setOpenDel] = React.useState(false);\r\n  const [edit, setEdit] = React.useState(null);\r\n  const [newPassword, setNewPassword] = React.useState(\"\");\r\n  const [openSearch, setOpenSearch] = React.useState(false);\r\n  const [searchstring, setSearchstring] = React.useState(\"\");\r\n  const [searchList, setSearchList] = React.useState([]);\r\n\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setEdit(null)\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleClickOpenDel = () => {\r\n    setOpenDel(true);\r\n  };\r\n\r\n  const handleCloseDel = () => {\r\n    setEdit(null)\r\n    setOpenDel(false);\r\n  };\r\n\r\n\r\n  const token=localStorage.getItem('token')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n  const email=useSelector(state=>state.userReducer.email)\r\n  const name=useSelector(state=>state.userReducer.name)\r\n\r\n  useEffect(()=>{\r\n      if(exist)return;\r\n\r\n      secureAxios.get('getRooms')\r\n      .then((response)=>{\r\n            const body=response.data\r\n            //alert(body.status)\r\n            if(body.status==1){\r\n                dispatch({type:'load_group',payload:{latest:body.latest,rooms:body.rooms,exist:true}})\r\n                dispatch({type:'load_user',payload:{name:body.name,email:body.email}})\r\n            }\r\n      })\r\n      .catch(err=>{\r\n        alert(err)\r\n        props.history.push('/signin');\r\n      })\r\n\r\n  },[])\r\n\r\n\r\n  const editRoom=(room)=>{\r\n\r\n    secureAxios.post('editRoom',{room,newPassword})\r\n    .then((response)=>{\r\n\r\n          const body=response.data\r\n          if(body.status==1){toast.success(`Password updated successfully for room ${room}`); dispatch({type:'edit_group'}); }\r\n          else toast.error('Something went wrong')\r\n    })\r\n    .catch(err=>{\r\n      alert(err)\r\n      props.history.push('/signin');\r\n    })\r\n  }\r\n\r\n\r\n  const exitRoom=(room)=>{\r\n    secureAxios.post('exitRoom',{room})\r\n    .then((response)=>{\r\n          const body=response.data\r\n          if(body.status==1)\r\n            dispatch({type:'exit_group',payload:room})\r\n          else toast.error('Something went wrong')\r\n    })\r\n    .catch(err=>{\r\n      alert(err)\r\n      props.history.push('/signin')\r\n    })\r\n  }\r\n\r\n\r\n\r\n    const deleteRoom=(room)=>{\r\n      secureAxios.post('deleteRoom',{room})\r\n      .then((response)=>{\r\n            const body=response.data\r\n            if(body.status==1)\r\n              dispatch({type:'delete_my_group',payload:room})\r\n            else toast.error('Something went wrong')\r\n      })\r\n      .catch(err=>{\r\n        toast.error(err)\r\n        props.history.push('/signin')\r\n      })\r\n    }\r\n\r\n\r\n\r\n    const rooms=useSelector(state=>state.groupReducer.rooms)\r\n    const latest=useSelector(state=>state.groupReducer.latest)\r\n\r\n  return (\r\n    <div class={classes.main}>\r\n\r\n\r\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Edit password for group {edit}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Enter new password below\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Password\"\r\n            value={newPassword}\r\n            onChange={(evt)=>setNewPassword(evt.target.value)}\r\n            type=\"password\"\r\n            fullWidth\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={()=>{handleClose();  setNewPassword(\"\");}} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={()=>{editRoom(edit); handleClose();  setNewPassword(\"\");}} color=\"primary\">\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={openDel}\r\n        onClose={handleCloseDel}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">Delete group</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Are you sure want to delete group {edit}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDel} color=\"primary\">\r\n            No\r\n          </Button>\r\n          <Button onClick={()=>{deleteRoom(edit); handleCloseDel();}} color=\"primary\" autoFocus>\r\n            Yes\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n\r\n      <Fab color=\"primary\" style={{height:'50px',width:'50px',float:'right'}}  aria-label=\"New Room\" onClick={()=>props.history.push('/newroom')}>\r\n        <AddIcon />\r\n      </Fab>\r\n\r\n      <Divider />\r\n      <br/><br/>\r\n      <div>\r\n      <h6>My Groups</h6>\r\n      <Divider />\r\n      <List>\r\n        {rooms?.sort((a,b)=>{return (a<b)?-1:1}).map((text, index) => (\r\n          <ListItem button key={text} onClick={()=>props.history.push(`/chat/${text}`)}>\r\n              <ListItemAvatar>\r\n                    <Avatar>\r\n                      <GroupIcon color=\"primary\" />\r\n                    </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText primary={text} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <EditIcon color='primary' onClick={()=>{setEdit(text);  handleClickOpen();}}/>\r\n                </IconButton>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <DeleteIcon color='secondary' onClick={()=>{setEdit(text);  handleClickOpenDel();}}/>\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <br /><br />\r\n      <h6>All Groups</h6>\r\n      <Divider />\r\n      <List>\r\n        {latest?.sort((a,b)=>{return (a<b)?-1:1}).map((text, index) => (\r\n          <ListItem button key={text} onClick={()=>props.history.push(`/chat/${text}`)}>\r\n              <ListItemAvatar>\r\n                    <Avatar>\r\n                      <GroupIcon color=\"primary\" />\r\n                    </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText primary={text} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\" onClick={exitRoom.bind(this,text)}>\r\n                    <MeetingRoomIcon color='secondary'  />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      </div>\r\n      <Box mt={8} className={classes.footer}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  tabLink : {\r\n    display:\"flex\",\r\n    alignItems:\"center\",\r\n    justifyContent:\"center\"\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Signin(props) {\r\n  const classes = useStyles();\r\n  const token=localStorage.getItem('token')\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n\r\n  const dispatch=useDispatch()\r\n\r\n  const login=(event)=>{\r\n    event.preventDefault();\r\n    const data={email,pass:password};\r\n\r\n    axios.post(url+'/localSignin',data)\r\n    .then((response)=>{\r\n      const body=response.data\r\n      let email=null,name=null,token=null;\r\n\r\n      if(body.status==1){\r\n        email=body.email;name=body.name;token=body.token;\r\n        toast.success('Signed in successfully',{autoClose:1000})\r\n        dispatch({type:'load_user',payload:{name,email}})\r\n\r\n        localStorage.setItem('token',token);\r\n\r\n        props.history.push('/');\r\n      }\r\n      else toast.error('Something went wrong',{autoClose:1000})\r\n\r\n\r\n    }).catch(err=>toast.error('Something went wrong',{autoClose:1000}) );\r\n}\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            value={email}\r\n            onChange={(evt)=>setEmail(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(evt)=>setPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={login}\r\n            className={classes.submit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/changePassword'>\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link to=\"/signup\" variant=\"body2\">\r\n                Don't have an account?\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport url from '../url';\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Signup(props) {\r\n  const classes = useStyles();\r\n  const token=localStorage.getItem('token')\r\n\r\n  const [name,setName]=useState('')\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n  const [confirmPassword,setConfirmPassword]=useState('')\r\n  const [otp,setOtp]=useState('')\r\n  const [receivedOtp,setReceivedOtp]=useState('')\r\n  const dispatch=useDispatch()\r\n\r\n\r\n  \tconst register=(event)=>{\r\n  \t\tevent.preventDefault();\r\n\r\n      if(otp!=receivedOtp){\r\n        toast.error('Incorrect OTP',{autoClose:1000}); return;\r\n      }\r\n\r\n      if(confirmPassword!=password){toast(\"Password and Confirm password don't match\",{autoClose:1000});}\r\n\r\n  \t\tconst data={name,email,pass:password};\r\n  \t\taxios.post(url+'/localSignup',data)\r\n      .then((response)=>{\r\n        const body=response.data\r\n        let email=null,name=null,token=null;\r\n      //  alert(body.msg);\r\n        if(body.status==1){\r\n          toast.success('Signed up successfully',{autoClose:1000})\r\n          email=body.email;name=body.name;token=body.token;\r\n\r\n          dispatch({type:'load_user',payload:{name,email}})\r\n\r\n          localStorage.setItem('token',token);\r\n          //localStorage.removeItem('otp');\r\n\r\n          props.history.push('/');\r\n        }\r\n  \t\t})\r\n      .catch(err=>console.log(err));\r\n   }\r\n\r\n\r\n\r\n  \tconst verify=(event)=>{\r\n    \t\tevent.preventDefault();\r\n    \t\tlet data={email};\r\n        //alert(secureAxios)\r\n        axios.post(url+'/emailverify',data)\r\n        .then((response)=>{\r\n            const body=response.data\r\n            let receivedOtp=null;\r\n\r\n\r\n            if(body.status==1){toast.info(body.msg,{autoClose:1000});setReceivedOtp(body.otp);}\r\n            else toast.error(body.msg,{autoClose:1000});\r\n\r\n             //localStorage.setItem('otp',receivedOtp);\r\n    \t\t })\r\n         .catch(err=>console.log(err));\r\n    }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Name\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={(evt)=>setName(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            value={email}\r\n            onChange={(evt)=>setEmail(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.submit}\r\n            onClick={verify}\r\n          >\r\n            Send OTP\r\n          </Button>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"otp\"\r\n            label=\"Enter OTP\"\r\n            name=\"otp\"\r\n            value={otp}\r\n            onChange={(evt)=>setOtp(evt.target.value)}\r\n            autoFocus\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(evt)=>setPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={confirmPassword}\r\n            onChange={(evt)=>setConfirmPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={register}\r\n            className={classes.submit}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/changePassword' variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link to=\"/signin\" variant=\"body2\">\r\n                Already have an account?\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios'\r\nimport url from '../url';\r\nimport Header2 from './header2'\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Newroom(props) {\r\n  const classes = useStyles();\r\n\r\n  const [name,setName]=useState('');\r\n  const [password,setPassword]=useState('');\r\n  const dispatch=useDispatch()\r\n\r\n  const newroom=(evt)=>{\r\n    evt.preventDefault()\r\n\r\n    const token=localStorage.getItem('token')\r\n    const secureAxios=axios.create(\r\n                          {\r\n                           baseURL:url,\r\n                           headers:{\r\n                            \"Authorization\":`bearer ${token}`\r\n                          }\r\n                        })\r\n\r\n      const data={name,pass:password}\r\n      secureAxios.post('newroom',data)\r\n      .then((response)=>{\r\n                const body=response.data\r\n                if(body.status==1){   toast.success(body.msg,{autoClose:1000}); dispatch({type:'add_my_group',payload:name}); props.history.push('/'); }\r\n                else toast.error(body.msg,{autoClose:1000})\r\n        })\r\n        .catch(err=>{\r\n            toast.error(err,{autoClose:1000})\r\n            props.history.push('/signin');\r\n        })\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n    <Header2 name='' {...props}/>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <GroupIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Create Group\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Group Name\"\r\n                name=\"email\"\r\n                value={name}\r\n                onChange={(evt)=>setName(evt.target.value)}\r\n                autoComplete=\"email\"\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={password}\r\n                onChange={(evt)=>setPassword(evt.target.value)}\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={newroom}\r\n          >\r\n           Create\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/enterroom' variant=\"body2\">\r\n                Enter Already Existing Group\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n\r\n        </form>\r\n      </div>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Header2 from './header2'\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Enterroom(props) {\r\n  const classes = useStyles();\r\n  const [name,setName]=useState('');\r\n  const [password,setPassword]=useState('');\r\n  const dispatch=useDispatch()\r\n\r\n  const enterroom=(evt)=>{\r\n    evt.preventDefault()\r\n    const token=localStorage.getItem('token')\r\n    const secureAxios=axios.create(\r\n                          {\r\n                           baseURL:url,\r\n                           headers:{\r\n                            \"Authorization\":`bearer ${token}`\r\n                          }\r\n                        })\r\n\r\n      const data={name,pass:password}\r\n      secureAxios.post('enterroom',data)\r\n      .then((response)=>{\r\n            const body=response.data\r\n            if(body.status==1){   dispatch({type:'add_latest_group',payload:name});   props.history.push(`/chat/${name}`); }\r\n            else toast.error(body.msg,{autoClose:1500})\r\n      })\r\n      .catch(err=>{\r\n        toast.error(err,{autoClose:1000})\r\n        props.history.push('/signin');\r\n      })\r\n\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <Header2 name='' {...props}/>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar} >\r\n          <GroupIcon/>\r\n\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Enter Group\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Group Name\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                value={name}\r\n                onChange={(evt)=>setName(evt.target.value)}\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={password}\r\n                onChange={(evt)=>setPassword(evt.target.value)}\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={enterroom}\r\n          >\r\n           Enter\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link to='/newroom' variant=\"body2\">\r\n                Create New Group\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {Link} from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport url from '../url';\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Changepassword(props) {\r\n  const classes = useStyles();\r\n  const token=localStorage.getItem('token')\r\n\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n  const [confirmPassword,setConfirmPassword]=useState('')\r\n  const [otp,setOtp]=useState('')\r\n  const [receivedOtp,setReceivedOtp]=useState('')\r\n\r\n  const secureAxios=axios.create(\r\n                        {\r\n                         baseURL:url,\r\n                         headers:{\r\n                          \"Authorization\":`bearer ${token}`\r\n                        }\r\n                      })\r\n\r\n\r\n  \tconst changePassword=(event)=>{\r\n  \t\tevent.preventDefault();\r\n\r\n      if(otp!=receivedOtp){\r\n        toast.error('Incorrect OTP',{autoClose:1000}); return;\r\n      }\r\n\r\n      if(confirmPassword!=password){toast(\"Password and Confirm password don't match\",{autoClose:1000});}\r\n\r\n  \t\tconst data={email,password};\r\n  \t\tsecureAxios.post('changePassword',data)\r\n      .then((response)=>{\r\n        const body=response.data\r\n        if(body.status==1){\r\n          toast.success('Password was changed successfully',{autoClose:2000})\r\n\r\n          props.history.push('/');\r\n        }\r\n        else toast.error('Something went wrong');\r\n  \t\t})\r\n      .catch(err=>{console.log(err); toast.error('Something went wrong');});\r\n   }\r\n\r\n\r\n\r\n  \tconst forgotPassword=(event)=>{\r\n    \t\tevent.preventDefault();\r\n    \t\tlet data={email};\r\n        //alert(secureAxios)\r\n        secureAxios.post('forgotPassword',data)\r\n        .then((response)=>{\r\n            const body=response.data\r\n            let receivedOtp=null;\r\n\r\n\r\n            if(body.status==1){toast.info(body.msg,{autoClose:1000});setReceivedOtp(body.otp);}\r\n            else toast.error(\"Something went wrong\",{autoClose:1000});\r\n\r\n    \t\t })\r\n         .catch(err=>{console.log(err); toast.error(\"Something went wrong\",{autoClose:1000});});\r\n    }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Change password\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            value={email}\r\n            onChange={(evt)=>setEmail(evt.target.value)}\r\n            autoFocus\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.submit}\r\n            onClick={forgotPassword}\r\n          >\r\n            Send OTP\r\n          </Button>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"otp\"\r\n            label=\"Enter OTP\"\r\n            name=\"otp\"\r\n            value={otp}\r\n            onChange={(evt)=>setOtp(evt.target.value)}\r\n            autoFocus\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(evt)=>setPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={confirmPassword}\r\n            onChange={(evt)=>setConfirmPassword(evt.target.value)}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={changePassword}\r\n            className={classes.submit}\r\n          >\r\n            Submit\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Back to Home\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Button from '@material-ui/core/Button';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport PersonPinIcon from '@material-ui/icons/PersonPin';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\nimport ShoppingBasket from '@material-ui/icons/ShoppingBasket';\r\nimport ThumbDown from '@material-ui/icons/ThumbDown';\r\nimport ThumbUp from '@material-ui/icons/ThumbUp';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport axios from 'axios';\r\nimport url from '../url'\r\n\r\nimport Authenticatedhome from '../Auth/AuthenticatedHome';\r\nimport Authenticatedprofile from '../Auth/AuthenticatedProfile';\r\nimport Authenticatedchatting from '../Auth/AuthenticatedChatting';\r\nimport Authredirect from '../Auth/AuthRedirect'\r\n\r\nimport Home from './home';\r\nimport Header from './header';\r\nimport Chatting from './chatting';\r\nimport Profile from './profile';\r\nimport Friends from './friends';\r\n\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\ntoast.configure()\r\n\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-prevent-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-prevent-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n/*\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-prevent-tab-${index}`,\r\n    'aria-controls': `scrollable-prevent-tabpanel-${index}`,\r\n  };\r\n}\r\n*/\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\n\r\nexport default function Engine(props) {\r\n  const classes = useStyles();\r\n  const [value,setValue]=React.useState(0)\r\n  const componentList=[Authredirect,Authenticatedhome(Home,Authredirect),Friends]\r\n\r\n\r\n\r\n  function changeValue(value){\r\n      setValue(value)\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n    <Header {...props} changeValue={changeValue} />\r\n      <List>\r\n        {componentList.map((items, index) => (\r\n          (value==index)?\r\n          React.createElement(items,{...props,redirect:''})\r\n          :null\r\n        ))}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\nexport default function Authenticatedenterrroom(Enterroom,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n\r\n  useEffect(()=>{\r\n\r\n      if(exist)setAuth(1);\r\n      else{\r\n                  const token=localStorage.getItem('token')\r\n                  const secureAxios=axios.create(\r\n                                              {\r\n                                               baseURL:url,\r\n                                               headers:{\r\n                                                \"Authorization\":`bearer ${token}`\r\n                                              }\r\n                                            })\r\n\r\n                  secureAxios.get('getRooms')\r\n                  .then((response)=>{\r\n                      const body=response.data\r\n                      setAuth(1)\r\n                    })\r\n                  .catch(err=>{  setAuth(2)  })\r\n        }\r\n   })\r\n   return (auth==0)?<Loading/>:(auth==1)?<Enterroom {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import React from 'react';\r\nimport {combineReducers,createStore,applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst groupReducer=(state={rooms:[],latest:[],exist:false},action)=>{\r\n\r\n    switch(action.type)\r\n    {\r\n        case 'load_group':\r\n          return action.payload\r\n\r\n        case 'add_my_group':\r\n          return {...state,rooms:[...state.rooms,action.payload],latest:[...state.latest,action.payload]}\r\n\r\n        case 'add_latest_group':\r\n          if(!state.latest.includes(action.payload))\r\n            return {...state,latest:[...state.latest,action.payload]}\r\n          return state\r\n\r\n        case 'exit_group':\r\n            return {...state,latest:state.latest.filter(l=>l!=action.payload)}\r\n\r\n        case 'edit_group':\r\n            return {...state,exist:false}\r\n\r\n        case 'delete_my_group':\r\n            return {...state,rooms:state.rooms.filter(r=>r!=action.payload),latest:state.latest.filter(l=>l!=action.payload)}\r\n\r\n        case 'clear':\r\n            return {rooms:[],latest:[],exist:false}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\n\r\nconst chatReducer=(state={},action)=>{\r\n    let newState=JSON.parse(JSON.stringify(state));\r\n    switch(action.type)\r\n    {\r\n        case 'load_chat':\r\n          if(!newState[action.payload.room])\r\n            newState[action.payload.room]=action.payload.msgs\r\n          else\r\n            newState[action.payload.room]=[...action.payload.msgs,...newState[action.payload.room]]\r\n\r\n          return newState\r\n\r\n        case 'add_chat':\r\n          if(newState[action.payload.room])\r\n            newState[action.payload.room]=[...newState[action.payload.room],action.payload.msg]\r\n          else\r\n            newState[action.payload.room]=[action.payload.msg]\r\n\r\n          return newState\r\n\r\n        case 'clear':\r\n            return {}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\nconst userReducer=(state={name:null,email:null},action)=>{\r\n    switch(action.type)\r\n    {\r\n        case 'load_user':\r\n           return action.payload\r\n\r\n        case 'clear':\r\n            return {name:null,email:null}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\n\r\nconst friendReducer=(state={pendings:[],friends:[],sent:[],exist:false},action)=>{\r\n    switch(action.type)\r\n    {\r\n        case 'load_friend':\r\n           return action.payload\r\n\r\n        case 'set_friend':\r\n            const profile=action.payload.profile\r\n            const option=action.payload.option\r\n\r\n            if(option=='Accept')\r\n              return {...state,pendings:state.pendings.filter(p=>p.email!=profile.email),friends:state.friends.concat(profile)}\r\n\r\n            else if(option=='Disconnect' || option=='Cancel request')\r\n              return {...state,sent:state.sent.filter(p=>p.email!=profile.email),pendings:state.pendings.filter(p=>p.email!=profile.email),friends:state.friends.filter(p=>p.email!=profile.email)}\r\n\r\n            else\r\n              return {...state,sent:state.sent.concat(profile)}\r\n\r\n        case 'clear':\r\n            return {pendings:[],friends:[],sent:[],exist:false}\r\n\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\n\r\nconst profileReducer=(state={},action)=>{\r\n    switch(action.type)\r\n    {\r\n        case 'load_profile':\r\n           return action.payload\r\n        default:\r\n          return state\r\n    }\r\n  }\r\n\r\n\r\nconst reducer=combineReducers({groupReducer,chatReducer,userReducer,friendReducer,profileReducer});\r\nexport default reducer;\r\n","import React from 'react';\r\nimport {createStore,applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducer from './configReducer';\r\n\r\nconst store=createStore(reducer,[],applyMiddleware(thunk));\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport {BrowserRouter,Switch,Route,Link} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\nimport Authenticatedhome from './Auth/AuthenticatedHome';\r\nimport Authenticatedprofile from './Auth/AuthenticatedProfile';\r\nimport Authenticatedchatting from './Auth/AuthenticatedChatting';\r\nimport AuthenticatedpersonalChatting from './Auth/AuthenticatedPersonalChatting';\r\nimport Authenticatedenterroom from './Auth/AuthenticatedEnterroom';\r\nimport Authenticatednewroom from './Auth/AuthenticatedNewroom';\r\nimport Authredirect from './Auth/AuthRedirect'\r\n\r\nimport Home from './components/home';\r\nimport Chatting from './components/chatting';\r\nimport Profile from './components/profile';\r\nimport Friends from './components/friends';\r\nimport Signin from './components/signin';\r\nimport Signup from './components/signup';\r\nimport Newroom from './components/newroom';\r\nimport Enterroom from './components/enterroom';\r\nimport Changepassword from './components/changePassword';\r\nimport Engine from './components/engine';\r\n\r\nimport store from './configStore';\r\n\r\n\r\nReactDom.render(\r\n<Provider store={store}>\r\n  <BrowserRouter>\r\n    <Switch>\r\n    <Route  exact path='/' component={Engine} />\r\n\r\n      <Route  path='/home' component={Authenticatedhome(Home,Authredirect)} />\r\n      <Route  path='/signin' component={Signin} />\r\n      <Route  path='/signup' component={Signup} />\r\n      <Route  path='/enterroom' component={Authenticatedenterroom(Enterroom,Authredirect)} />\r\n      <Route  path='/newroom' component={Authenticatednewroom(Newroom,Authredirect)} />\r\n      <Route  path='/profile/:profile' component={Authenticatedprofile(Profile,Authredirect)} />\r\n      <Route  path='/friends' component={Friends} />\r\n      <Route  path='/changePassword' component={Changepassword} />\r\n      <Route  exact path='/chat/:room' component={Authenticatedchatting(Chatting,Authredirect)} />\r\n      <Route  exact path='/personal/:room/:emails' component={AuthenticatedpersonalChatting(Chatting,Authredirect)} />\r\n    </Switch>\r\n  </BrowserRouter>\r\n</Provider>\r\n,\r\ndocument.getElementById('root'));\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\n\r\nexport default function Authenticatednewroom(Newroom,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n\r\n  useEffect(()=>{\r\n      if(exist)setAuth(1)\r\n      else\r\n      {\r\n        const token=localStorage.getItem('token')\r\n        const secureAxios=axios.create(\r\n                              {\r\n                               baseURL:url,\r\n                               headers:{\r\n                                \"Authorization\":`bearer ${token}`\r\n                              }\r\n                            })\r\n\r\n          secureAxios.get('getRooms')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                setAuth(1)\r\n          })\r\n          .catch(err=>{  setAuth(2);  })\r\n      }\r\n\r\n   },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Newroom {...props}/>:<Authredirect redirect='signin'/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\n\r\nexport default function Authenticatedprofile(Profile,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const dispatch=useDispatch()\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n  const [email,name]=props.match.params.profile.split('-')\r\n  useEffect(()=>{\r\n\r\n        const token=localStorage.getItem('token')\r\n        const secureAxios=axios.create(\r\n                              {\r\n                               baseURL:url,\r\n                               headers:{\r\n                                \"Authorization\":`bearer ${token}`\r\n                              }\r\n                            })\r\n\r\n          secureAxios.post('getProfile',{email})\r\n          .then((response)=>{\r\n                const body=response.data\r\n//                alert(body.status)\r\n                if(body.status==1){\r\n                  dispatch({type:'load_profile',payload:{name:body.name,email:body.email}})\r\n                  setAuth(1)\r\n                }\r\n                else setAuth(2)\r\n          })\r\n          .catch(err=>{  setAuth(2);  })\r\n\r\n\r\n   },[])\r\n   return (auth==0)?<Loading />:(auth==1)?<Profile {...props}/>:<Authredirect redirect=''/>\r\n//  return (auth)?<Home {...props}/>:<Authredirect/>\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useSelector,useDispatch} from 'react-redux'\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\n\r\nexport default function Authenticatedchatting(Chatting,Authredirect){\r\n\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const [redirect,setRedirect]=useState('signin')\r\n  const room=props.match.params.room\r\n  //alert(props.match.params.room)\r\n  const exist=useSelector(state=>state.groupReducer.exist)\r\n  const latest=useSelector(state=>state.groupReducer.latest)\r\n\r\n  useEffect(()=>{\r\n\r\n        if(exist){\r\n          if(!latest.includes(room)){ setRedirect('enterroom'); setAuth(2); }\r\n          else setAuth(1);\r\n        }\r\n        else\r\n        {\r\n          const token=localStorage.getItem('token')\r\n          const secureAxios=axios.create(\r\n                                {\r\n                                 baseURL:url,\r\n                                 headers:{\r\n                                  \"Authorization\":`bearer ${token}`\r\n                                }\r\n                              })\r\n          secureAxios.get('getRooms')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                if(!body.latest.includes(room)){ setRedirect('enterroom'); setAuth(2); }\r\n                else setAuth(1);\r\n          })\r\n          .catch(err=>{\r\n            setAuth(2)\r\n          })\r\n        }\r\n\r\n  },[])\r\n\r\n  return (auth==0)?<Loading />:(auth==1)?<Chatting roomName={room} {...props}/>:<Authredirect redirect={redirect}/>\r\n\r\n }\r\n\r\n}\r\n","import {useState,useEffect} from 'react'\r\nimport {useSelector,useDispatch} from 'react-redux'\r\nimport axios from 'axios'\r\nimport url from '../url'\r\nimport Loading from '../components/loading'\r\n\r\nexport default function Authenticatedpersonalchatting(Chatting,Authredirect){\r\n  let friendName=\"\"\r\n  return function Authenticate(props){\r\n  const [auth,setAuth]=useState(0)\r\n  const [redirect,setRedirect]=useState('')\r\n\r\n  const [email,myEmail]=props.match.params.emails.split('-')\r\n\r\n  const dispatch=useDispatch()\r\n\r\n  const exist=useSelector(state=>state.friendReducer.exist)\r\n  const friends=useSelector(state=>state.friendReducer.friends)\r\n\r\n  useEffect(()=>{\r\n\r\n        if(exist){\r\n          //alert(JSON.stringify(friends))\r\n          friendName=friends.find(f=>f.email==email)?.name\r\n\r\n      //    alert(friendName)\r\n          if(!friendName){ setRedirect(''); setAuth(2); }\r\n          else setAuth(1);\r\n\r\n        }\r\n        else\r\n        {\r\n          const token=localStorage.getItem('token')\r\n          const secureAxios=axios.create(\r\n                                {\r\n                                 baseURL:url,\r\n                                 headers:{\r\n                                  \"Authorization\":`bearer ${token}`\r\n                                }\r\n                              })\r\n          secureAxios.get('getFriend')\r\n          .then((response)=>{\r\n                const body=response.data\r\n                dispatch({type:'load_friend',payload:{friends:body.friends,pendings:body.pendings,sent:body.sent,exist:true}})\r\n\r\n                friendName=body.friends.find(f=>f.email==email)?.name\r\n            //    alert(friendName)\r\n\r\n                if(!friendName){ setRedirect(''); setAuth(2); }\r\n                else setAuth(1);\r\n          })\r\n          .catch(err=>{\r\n            setAuth(2)\r\n          })\r\n        }\r\n      //  alert(friendName)\r\n\r\n  },[])\r\n\r\n  return (auth==0)?<Loading />:(auth==1)?<Chatting roomName={friendName} {...props}/>:<Authredirect redirect={redirect}/>\r\n\r\n }\r\n\r\n}\r\n"],"sourceRoot":""}