(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[21],{184:function(e,t,a){"use strict";a.d(t,"a",(function(){return ie}));var n=a(5),r=a(3),c=a(48),o=a(0),i=a.n(o),s=a(4),l=a(190),u=a.n(l),d=a(137),j=a.n(d),p=a(142),b=a.n(p),h=a(237),O=a(241),x=a(260),m=a(113),f=a(123),g=a(232),y=a(354),w=a(233),v=a(235),C=a(239),k=a(234),S=a(236),R=a(238),B=a(357),N=a(188),E=a.n(N),P=a(189),_=a.n(P),I=a(164),U=a.n(I),L=a(183),D=a.n(L),T=a(167),z=a.n(T),A=a(141),J=a.n(A),F=a(133),W=a.n(F),M=a(191),G=a.n(M),H=a(211),q=a(214),K=a(380),Q=a(115),V=a(259),X=a(240),Y=a(375),Z=a(230),$=a(9),ee=a.n($),te=a(8),ae=a(129),ne=(a(128),a(2));ae.a.configure();var re=240,ce=Object(m.a)((function(e){return{root:{display:"flex"},searchBar:{position:"relative"},drawer:Object(c.a)({},e.breakpoints.up("sm"),{width:re,flexShrink:0}),appBar:Object(c.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(re,"px)"),marginLeft:re}),menuButton:Object(c.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:re},content:{flexGrow:1,padding:e.spacing(3)}}})),oe=i.a.forwardRef((function(e,t){return Object(ne.jsx)(Z.a,Object(r.a)({direction:"up",ref:t},e))}));function ie(e){var t=document.body,a=ce(),r=(Object(f.a)(),i.a.useState(!1)),c=Object(n.a)(r,2),l=c[0],d=c[1],p=Object(s.b)(),m=function(){e.match.params.room?e.history.push("/"):d(!l)},N=Object(o.useState)([]),P=Object(n.a)(N,2),I=(P[0],P[1],i.a.useState(!1)),L=Object(n.a)(I,2),T=L[0],A=L[1],F=i.a.useState(!1),M=Object(n.a)(F,2),Z=M[0],$=M[1],re=i.a.useState(""),ie=Object(n.a)(re,2),se=(ie[0],ie[1],i.a.useState([])),le=Object(n.a)(se,2),ue=le[0],de=le[1],je=localStorage.getItem("token"),pe=ee.a.create({baseURL:te.a,headers:{Authorization:"bearer ".concat(je)}}),be=function(){A(!1)},he=function(){$(!1)};var Oe=function(e,t){var a;return function(){var n=arguments,r=this;clearTimeout(a),a=setTimeout((function(){e.apply(r,n)}),t)}}((function(e){e.preventDefault(),pe.post("searchPeople",{searchstring:e.target.value}).then((function(e){var t=e.data;t.status?de(t.users):ae.a.error("Something went wrong",{autoComplete:1500})}))}),300),xe=Object(s.c)((function(e){return e.userReducer.email})),me=Object(s.c)((function(e){return e.userReducer.name})),fe=Object(s.c)((function(e){return e.userReducer.path}));me&&xe||ee.a.create({baseURL:te.a,headers:{Authorization:"bearer ".concat(je)}}).get("getUser").then((function(e){var t=e.data;p({type:"load_user",payload:t})})).catch((function(e){return ae.a.error(e)}));var ge=[["Friends","/friends",U.a],["Chats","/chats",D.a],["Groups","/groups",W.a],["Enter group","/enterroom",E.a],["Create group","/newroom",j.a],["Sign out","/signin",_.a]],ye=Object(ne.jsxs)("div",{children:[Object(ne.jsx)("center",{children:Object(ne.jsx)(K.a,{src:te.a+"/uploads/".concat(fe,"/").concat(je),style:{borderColor:"#00008B",color:"lightgrey",marginTop:"10px",width:"70px",height:"70px"},onClick:function(){$(!0)}})}),Object(ne.jsx)("center",{children:Object(ne.jsx)("p",{children:me})}),Object(ne.jsx)("div",{className:a.toolbar,style:{marginTop:"-60px"}}),Object(ne.jsx)(g.a,{}),Object(ne.jsx)(y.a,{children:ge.map((function(t,a){return Object(ne.jsxs)(w.a,{button:!0,onClick:function(){"Sign out"===t[0]?function(e,t){localStorage.removeItem("token"),t({type:"clear"}),e("/signin")}(e.history.push,p):e.history.push(t[1])},children:[Object(ne.jsx)(k.a,{style:{color:"#00008B"},children:Object(o.createElement)(t[2],{})}),Object(ne.jsx)(v.a,{primary:t[0]})]},t[0])}))})]});return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("center",{children:Object(ne.jsx)(Q.a,{id:"loader",style:{marginTop:"100px",display:"none"}})}),Object(ne.jsxs)(H.a,{open:Z,onClose:he,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(ne.jsx)(q.a,{id:"alert-dialog-title",children:"Change Profile Picture"}),Object(ne.jsx)("label",{for:"file-input",children:Object(ne.jsx)(J.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(ne.jsx)("input",{id:"file-input",name:"file",type:"file",style:{display:"none"},onChange:function(e){document.getElementById("preview").setAttribute("src",window.URL.createObjectURL(e.target.files[0]))}}),Object(ne.jsx)("center",{children:Object(ne.jsx)("img",{id:"preview",src:te.a+"/uploads/".concat(fe,"/").concat(je),width:"300px",height:"300px"})}),Object(ne.jsx)(B.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){var e=document.getElementById("file-input").files[0];if(document.getElementById("file-input").value){document.getElementById("file-input").value="",document.getElementById("loader").style.display="block";var t=new FormData;t.append("file",e),t.append("path",e.name),pe.post("updateDp",t).then((function(t){var a=t.data;1==a.status?(e&&(e.value=""),document.getElementById("loader").style.display="none",p({type:"load_user",payload:{name:me,email:xe,path:e.name}}),localStorage.setItem("token",a.token),he()):ae.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return ae.a.error("Something went wrong",{autoClose:1e3})}))}},children:"Upload"})]}),Object(ne.jsxs)(H.a,{fullScreen:!0,open:T,onClose:be,TransitionComponent:oe,children:[Object(ne.jsx)(S.a,{className:a.searchBar,children:Object(ne.jsxs)(h.a,{children:[Object(ne.jsx)(R.a,{edge:"start",color:"inherit",onClick:be,"aria-label":"close",children:Object(ne.jsx)(z.a,{})}),Object(ne.jsx)(Y.a,{style:{backgroundColor:"white",borderRadius:"10px"},variant:"outlined",margin:"normal",fullWidth:!0,name:"search",label:"Search people",type:"text",onChange:function(e){e.preventDefault(),Oe(e)},autoComplete:"current-password",autoFocus:!0})]})}),Object(ne.jsx)(y.a,{children:ue.map((function(t){return Object(ne.jsxs)(w.a,{button:!0,children:[Object(ne.jsx)(C.a,{children:Object(ne.jsx)(K.a,{src:te.a+"/uploads/".concat(t.path,"/").concat(je),style:{borderColor:"#00008B",color:"lightgrey"}})}),Object(ne.jsx)(v.a,{primary:t.name,secondary:t.email,onClick:function(){return e.history.push("/profile/".concat(t.email,"-").concat(t.name))}})]})}))})]}),Object(ne.jsx)(S.a,{position:"static",className:a.appBar,children:Object(ne.jsxs)(V.a,{style:{display:"flex"},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon tabs example",children:[Object(ne.jsx)(X.a,{icon:Object(ne.jsx)(u.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/")},"aria-label":"phone"}),Object(ne.jsx)(X.a,{icon:Object(ne.jsx)(D.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/chats")},"aria-label":"chat"}),Object(ne.jsx)(X.a,{icon:Object(ne.jsx)(W.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/groups")},"aria-label":"group"}),Object(ne.jsx)(X.a,{icon:Object(ne.jsx)(G.a,{style:{color:"white"}}),onClick:function(){A(!0)},"aria-label":"search"}),Object(ne.jsx)(X.a,{icon:Object(ne.jsx)(b.a,{style:{color:"white"}}),"aria-label":"open drawer",edge:"start",onClick:m,className:a.menuButton})]})}),Object(ne.jsxs)("nav",{className:a.drawer,"aria-label":"mailbox folders",children:[Object(ne.jsx)(x.a,{smUp:!0,implementation:"css",children:Object(ne.jsx)(O.a,{container:t,variant:"temporary",anchor:"right",open:l,onClose:m,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:ye})}),Object(ne.jsx)(x.a,{xsDown:!0,implementation:"css",children:Object(ne.jsx)(O.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:ye})})]})]})}},367:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return M}));var n=a(48),r=a(3),c=a(5),o=a(0),i=a.n(o),s=a(4),l=a(47),u=a(113),d=a(35),j=a(368),p=a(369),b=a(371),h=a(372),O=a(373),x=a(380),m=a(238),f=a(355),g=a(327),y=a.n(g),w=a(328),v=a.n(w),C=a(325),k=a.n(C),S=a(326),R=a.n(S),B=a(137),N=a.n(B),E=a(318),P=a(232),_=a(329),I=a(370),U=a(358),L=a(359),D=a(184),T=a(8),z=a(9),A=a.n(z),J=a(129),F=(a(128),a(2));J.a.configure();var W=Object(u.a)((function(e){return{root:{maxWidth:500,margin:"auto"},media:{paddingTop:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"lightgrey"}}}));function M(e){var t=this,a=W(),u=i.a.useState(!1),g=Object(c.a)(u,2),w=g[0],C=g[1],S=i.a.useState(null),B=Object(c.a)(S,2),z=B[0],M=B[1],G=i.a.useState(0),H=Object(c.a)(G,2),q=H[0],K=H[1],Q=i.a.useState({}),V=Object(c.a)(Q,2),X=V[0],Y=V[1],Z=Object(s.c)((function(e){return e.userReducer.email})),$=function(){M(null)},ee=function(){C(!w)},te=localStorage.getItem("token"),ae=Object(s.b)(),ne=Object(s.c)((function(e){return e.postReducer.exist})),re=Object(s.c)((function(e){return e.postReducer.post})),ce=function(e){if(X[e]){var t=JSON.parse(JSON.stringify(X));t[e]=!1,Y(t)}else{var a=JSON.parse(JSON.stringify(X));a[e]=!0,Y(a)}};Object(o.useEffect)((function(){(console.log(re),ne)||A.a.create({baseURL:T.a,headers:{Authorization:"bearer ".concat(te)}}).get("getPost").then((function(t){var a=t.data;1==a.status?(ae({type:"load_post",payload:a.post}),e.history.replace("/")):J.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return J.a.error("Something went wrong",{autoClose:1e3})}))}),[]);var oe=function(e){var t=re[e]._id;ae({type:"hide_post",payload:t}),$()},ie=function(t,a){var n=re[a]._id;A.a.create({baseURL:T.a,headers:{Authorization:"bearer ".concat(te)}}).post("deletePost",{email:t,_id:n}).then((function(t){1==t.data.status?(ae({type:"hide_post",payload:n}),J.a.success("Post was deleted",{autoClose:1500}),e.history.replace("/")):J.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return J.a.error("Something went wrong",{autoClose:1e3})})),$()},se=function(t,a,n){ae({type:"like_post",payload:{_id:a,liked:n}}),A.a.create({baseURL:T.a,headers:{Authorization:"bearer ".concat(te)}}).post("likePost",{email:t,_id:a,liked:n}).then((function(t){1==t.data.status?e.history.replace("/"):J.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return J.a.error("Something went wrong",{autoClose:1e3})}))};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{style:{position:"fixed",width:"100%"},children:Object(F.jsx)(D.a,Object(r.a)({},e))}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(E.a,{color:"primary",style:{height:"45px",width:"45px",float:"right"},"aria-label":"New Room",onClick:function(){return e.history.push("/uploadpost")},children:Object(F.jsx)(N.a,{})}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)(P.a,{}),Object(F.jsxs)(U.a,{component:"main",maxWidth:"xl",children:[Object(F.jsx)(L.a,{}),re.map((function(r,c){return Object(F.jsxs)(j.a,{className:a.root,children:[Object(F.jsx)(p.a,{avatar:Object(F.jsx)(x.a,{"aria-label":"recipe",className:a.avatar,src:"".concat(T.a,"/uploads/").concat(r.uploaderDp,"/").concat(te),onClick:function(){return e.history.push("/profile/".concat(r.uploaderEmail,"-").concat(r.uploaderName))}}),action:Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(m.a,{"aria-label":"settings",children:Object(F.jsx)(k.a,{onClick:function(e){return function(e,t){K(t),M(e.currentTarget)}(e,c)}})}),Object(F.jsxs)(_.a,{id:"simple-menu",anchorEl:z,keepMounted:!0,open:Boolean(z),onClose:$,children:[Object(F.jsx)(I.a,{onClick:oe.bind(t,q),children:"Hide"}),Z===re[q].uploaderEmail?Object(F.jsx)(I.a,{onClick:ie.bind(t,Z,q),children:"Delete"}):null]})]}),title:r.uploaderName,subheader:r.date}),Object(F.jsx)(b.a,{children:Object(F.jsxs)(f.a,{paragraph:!0,children:[r.desc.split(" ").length<=30||X[c]?r.desc:r.desc.split(" ").slice(0,30).join(" "),"\xa0\xa0",r.desc.split(" ").length>30?Object(F.jsx)(l.b,{style:{textDecoration:"none",fontSize:"15px"},onClick:ce.bind(t,c),children:X[c]?"read less":"read more"}):null]})}),"undefined"!=r.path&&(r.path.includes(".jpg")||r.path.includes(".png")||r.path.includes(".jpeg"))?Object(F.jsx)("img",{src:"".concat(T.a,"/uploads/").concat(r.path,"/").concat(te),width:"100%",height:"100%"}):"undefined"!=r.path&&(r.path.includes(".mp4")||r.path.includes(".wav")||r.path.includes(".ogg"))?Object(F.jsxs)("video",{width:"100%",height:"100%",controls:!0,children:[Object(F.jsx)("source",{src:T.a+"/uploads/".concat(r.path,"/").concat(te),type:"video/mp4"}),Object(F.jsx)("source",{src:T.a+"/uploads/".concat(r.path,"/").concat(te),type:"video/wav"}),Object(F.jsx)("source",{src:T.a+"/uploads/".concat(r.path,"/").concat(te),type:"video/ogg"})]}):null,Object(F.jsx)(b.a,{children:Object(F.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p"})}),Object(F.jsxs)(h.a,{disableSpacing:!0,children:[Object(F.jsx)(m.a,{"aria-label":"add to favorites",children:Object(F.jsx)(R.a,{onClick:se.bind(t,Z,r._id,r.liked),color:r.liked?"Primary":""})})," ",r.likeCount,Object(F.jsx)(m.a,{"aria-label":"share",children:Object(F.jsx)(y.a,{})}),Object(F.jsx)(m.a,{className:Object(d.a)(a.expand,Object(n.a)({},a.expandOpen,w)),onClick:ee,"aria-expanded":w,"aria-label":"show more",children:Object(F.jsx)(v.a,{})})]}),Object(F.jsx)(O.a,{in:w,timeout:"auto",unmountOnExit:!0,children:Object(F.jsx)(b.a,{children:Object(F.jsx)(f.a,{paragraph:!0,children:r.comment.map((function(e){}))})})})]})}))]})]})]})}}}]);
//# sourceMappingURL=21.3eaa7cc5.chunk.js.map