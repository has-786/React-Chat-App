(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[25],{376:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return L}));var n=a(205),r=a.n(n),c=a(3),i=a(206),o=a(5),s=a(0),l=a(4),u=a(382),p=a(361),d=a(180),b=a(377),j=a(46),m=a(254),h=a(208),g=a(146),f=a.n(g),x=(a(238),a(329)),y=a.n(x),O=a(358),v=a(356),w=a(113),k=a(179),C=a(9),I=a.n(C),A=a(8),D=a(129),R=(a(128),a(2));function S(){return Object(R.jsxs)(v.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(R.jsx)(j.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}D.a.configure();var U=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",boxShadow:"0px 0px 3px 3px blue",padding:"30px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},tabLink:{display:"flex",alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function L(e){var t=U(),a=Object(l.c)((function(e){return e.userReducer.name})),n=Object(l.c)((function(e){return e.userReducer.email})),g=Object(l.c)((function(e){return e.userReducer.path})),x=Object(s.useState)(""),w=Object(o.a)(x,2),C=w[0],L=w[1],N=Object(s.useState)("none"),T=Object(o.a)(N,2),B=(T[0],T[1]),E=Object(l.b)(),F=localStorage.getItem("token"),J=I.a.create({baseURL:A.a,headers:{Authorization:"bearer ".concat(F)}}),M=["January","February","March","April","May","June","July","August","September","October","November","December"];function V(){return(V=Object(i.a)(r.a.mark((function t(i){var o,s,l,u,p,d,b,j,m,h;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(B("block"),i.preventDefault(),o=new Date,s=o.getUTCDate(),l=o.getUTCMonth(),u=o.getUTCFullYear(),p=o.getHours(),d=o.getMinutes(),b=o.getTime()/1e3,p=0==parseInt(p/10)?"0"+p:p,d=0==parseInt(d/10)?"0"+d:d,j="".concat(M[l]," ").concat(s,", ").concat(u," ").concat(p,":").concat(d),!(m=document.getElementById("file-input").files[0]).type.includes("image")&&!m.type.includes("video")){t.next=16;break}t.next=18;break;case 16:return D.a.error("Only images and videos are allowed"),t.abrupt("return",!1);case 18:(h=new FormData).append("uploaderName",a),h.append("uploaderEmail",n),h.append("uploaderDp",g),h.append("desc",C),h.append("path",null===m||void 0===m?void 0:m.name),h.append("time",b),h.append("date",j),h.append("file",m),J.post("uploadpost",h).then((function(t){B("none");var a=t.data;1==a.status?(m&&(m.value=""),L(""),D.a.success(a.msg,{autoClose:1e3}),E({type:"add_post",payload:Object(c.a)(Object(c.a)({},a.post),{},{liked:!1,likeCount:0})}),e.history.replace("/")):D.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){B("none"),D.a.error("Something went wrong",{autoClose:1e3})}));case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(R.jsxs)(k.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(d.a,{}),Object(R.jsxs)(O.a,{elevation:3,className:t.paper,children:[Object(R.jsx)(u.a,{className:t.avatar,children:Object(R.jsx)(y.a,{})}),Object(R.jsx)(v.a,{component:"h1",variant:"h5",children:"Add Post"}),Object(R.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(R.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,multiline:!0,rows:2,fullWidth:!0,type:"text",label:"Add description",value:C,onChange:function(e){return L(e.target.value)},autoFocus:!0}),"Add Photo",Object(R.jsx)("label",{for:"file-input",children:Object(R.jsx)(f.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(R.jsx)("input",{id:"file-input",name:"file",type:"file",style:{display:"none"},onChange:function(e){var t=e.target.files[0].type;e.target.files[0].type;t.includes("image")?document.getElementById("previewI").setAttribute("src",window.URL.createObjectURL(e.target.files[0])):(document.getElementById("previewV").style.display="block",document.getElementById("previewV").setAttribute("src",window.URL.createObjectURL(e.target.files[0])))}}),Object(R.jsx)("img",{id:"previewI",width:"100%",height:"100%"}),Object(R.jsxs)("video",{id:"previewV",style:{display:"none"},width:"100%",height:"100%",controls:!0,children:[Object(R.jsx)("source",{type:"video/mp4"}),Object(R.jsx)("source",{type:"video/ogg"})]}),Object(R.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){return V.apply(this,arguments)},className:t.submit,children:"Post"}),Object(R.jsx)(m.a,{container:!0,children:Object(R.jsx)(m.a,{item:!0,xs:!0,children:Object(R.jsx)(j.b,{to:"/",variant:"body2",children:"Back to Home"})})})]})]}),Object(R.jsx)(h.a,{mt:8,children:Object(R.jsx)(S,{})})]})}}}]);
//# sourceMappingURL=25.ec6602b4.chunk.js.map