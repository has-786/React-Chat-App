(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[18],{169:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(0);var c=n(113),i=n(236),r=n(237),a=n(355),o=n(238),l=n(138),s=n.n(l),d=n(380),u=n(8),j=n(2),p=Object(c.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function b(e){var t=p(),n=localStorage.getItem("token");return Object(j.jsx)("div",{className:t.root,children:Object(j.jsx)(i.a,{position:"static",children:Object(j.jsxs)(r.a,{children:[Object(j.jsx)(o.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",children:Object(j.jsx)(s.a,{onClick:function(){return e.history.goBack()}})}),e.dp?Object(j.jsx)(o.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",children:Object(j.jsx)(d.a,{src:u.a+"/uploads/".concat(e.dp,"/").concat(n),style:{backgroundColor:"lightgrey"}})}):null,Object(j.jsx)(a.a,{variant:"h6",className:t.title,children:e.name})]})})})}},181:function(e,t,n){"use strict";var c=n(152);n.n(c)()()},282:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D})),n.d(t,"connect",(function(){return S}));var c=n(3),i=n(5),r=(n(152),n(0)),a=n.n(r),o=n(4),l=n(380),s=n(357),d=n(359),u=n(242),j=n(193),p=n(355),b=n(113),h=n(358),f=n(211),m=n(214),g=n(141),O=n.n(g),x=n(115),y=(n(243),n(9)),v=n.n(y),w=n(8),C=(n(181),n(169)),k=n(129),R=(n(128),n(2));k.a.configure();var B=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function I(){return Object(R.jsxs)(p.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(R.jsx)(u.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var S=function(e,t,n,c){e.post("setFriend",{option:c,profile:n}).then((function(e){1==e.data.status&&t({type:"set_friend",payload:{option:c,profile:n}})})).catch((function(e){alert(e)}))};function D(e){var t=B(),n=Object(o.b)(),u=Object(r.useState)("Not connected"),p=Object(i.a)(u,2),b=p[0],g=p[1],y=Object(r.useState)("Connect"),D=Object(i.a)(y,2),E=D[0],F=D[1],N=a.a.useState(!1),P=Object(i.a)(N,2),U=P[0],_=P[1],A=localStorage.getItem("token"),L=Object(o.c)((function(e){return e.profileReducer})),T=(L.name,L.email),W=L.path;L.email||e.history.push("/");var q=v.a.create({baseURL:w.a,headers:{Authorization:"bearer ".concat(A)}}),G=Object(o.c)((function(e){return e.friendReducer.exist})),J=Object(o.c)((function(e){return e.userReducer.email})),Y=Object(o.c)((function(e){return e.userReducer.name})),z=(Object(o.c)((function(e){return e.userReducer.path})),Object(o.c)((function(e){return e.friendReducer.friends}))),H=Object(o.c)((function(e){return e.friendReducer.pendings})),K=Object(o.c)((function(e){return e.friendReducer.sent})),M=function(){_(!1)};return Object(r.useEffect)((function(){(null===z||void 0===z?void 0:z.find((function(e){return e.email==T})))?(g("Connected"),F("Disconnect")):(null===H||void 0===H?void 0:H.find((function(e){return e.email==T})))?(g("Pending"),F("Accept")):(null===K||void 0===K?void 0:K.find((function(e){return e.email==T})))?(g("Request sent"),F("Cancel request")):(g("Not Connected"),F("Connect")),G||q.get("getFriend").then((function(e){var t=e.data;1==t.status&&(n({type:"load_friend",payload:{pendings:t.pendings,friends:t.friends,sent:t.sent,exist:!0}}),n({type:"load_user",payload:{name:t.name,email:t.email,path:t.path,exist:!0}}))})).catch((function(t){alert(t),e.history.push("/signin")}))}),[K,z,H]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(C.a,Object(c.a)({name:"Profile"},e)),Object(R.jsx)("center",{children:Object(R.jsx)(x.a,{id:"loader",style:{marginTop:"100px",display:"none"}})}),Object(R.jsx)(f.a,{open:U,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:J===T?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(m.a,{children:"Change Profile Picure"}),Object(R.jsx)("label",{for:"file-input",children:Object(R.jsx)(O.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(R.jsx)("input",{id:"file-input",name:"file",type:"file",style:{display:"none"},onChange:function(e){document.getElementById("preview").setAttribute("src",window.URL.createObjectURL(e.target.files[0]))}}),Object(R.jsx)("center",{children:Object(R.jsx)("img",{id:"preview",src:w.a+"/uploads/".concat(W,"/").concat(A),width:"300px",height:"300px"})}),Object(R.jsx)(s.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){var e=document.getElementById("file-input").files[0];if(document.getElementById("file-input").value){M(),document.getElementById("file-input").value="",document.getElementById("loader").style.display="block";var t=new FormData;t.append("file",e),t.append("path",e.name),q.post("updateDp",t).then((function(t){var c=t.data;1==c.status?(e&&(e.value=""),document.getElementById("loader").style.display="none",n({type:"load_user",payload:{name:Y,email:J,path:e.name}}),localStorage.setItem("token",c.token)):k.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return k.a.error("Something went wrong",{autoClose:1e3})}))}},children:"Upload"})]}):Object(R.jsx)("center",{children:Object(R.jsx)("img",{id:"preview",src:w.a+"/uploads/".concat(W,"/").concat(A),width:"300px",height:"300px"})})}),Object(R.jsxs)(h.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(d.a,{}),Object(R.jsx)("center",{children:Object(R.jsx)(l.a,{src:w.a+"/uploads/".concat(W,"/").concat(A),style:{borderColor:"#00008B",color:"lightgrey",width:"70px",height:"70px"},onClick:function(){_(!0)}})}),Object(R.jsx)("center",{children:Object(R.jsx)("p",{children:L.name})}),J!=T?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("center",{children:Object(R.jsx)("p",{children:b})}),Object(R.jsx)("button",{class:"btn btn-sm btn-primary",onClick:S.bind(this,q,n,L,E),children:E}),"Pending"==b?Object(R.jsx)("button",{class:"btn btn-sm btn-danger",onClick:S.bind(this,q,n,L,"Disconnect"),children:"Decline"}):null]}):null,Object(R.jsx)(j.a,{mt:8,className:t.footer,children:Object(R.jsx)(I,{})})]})]})}}}]);
//# sourceMappingURL=18.41154376.chunk.js.map