(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[0],{272:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),i=a(24),s=a(23),l=a(7),u=a(10),d=a(8),j=a(12),b=a.n(j),p="",m=a(326),h=a(328),O=a(1),f=Object(m.a)((function(e){return{root:{marginTop:"50vh"}}}));function g(){var e=f();return Object(O.jsx)("div",{className:e.root,children:Object(O.jsx)("center",{children:Object(O.jsx)(h.a,{})})})}function x(e){var t=e.redirect;return Object(O.jsx)(s.a,{to:"/"+t})}var y=a(71),v=a.n(y),w=a(362),C=a(345),k=a(348),S=a(358),R=a(340),N=a(359),_=a(45),I=a(347),A=a(330),E=a(331),W=a(287),D=a(333),T=a(350),B=a(349),P=a(334),U=a(344),F=a(342),L=a(343),z=a(341),q=a(346),Y=a(337),H=a(65),M=a.n(H),G=a(100),J=a.n(G),K=a(101),V=a.n(K),Q=a(86),X=a.n(Q),Z=a(63),$=a.n(Z),ee=(v()(),a(38)),te=a(184),ae=a.n(te),ne=a(136),re=a.n(ne),ce=a(336),oe=a(339),ie=a(361),se=a(22),le=a(332),ue=a(335),de=a(182),je=a.n(de),be=a(183),pe=a.n(be),me=a(79),he=a.n(me),Oe=a(109),fe=a.n(Oe),ge=a(90),xe=a.n(ge),ye=a(135),ve=a.n(ye),we=a(185),Ce=a.n(we),ke=a(360),Se=a(338),Re=a(286),Ne=a(9);a(39);Ne.a.configure();var _e=240,Ie=Object(m.a)((function(e){return{root:{display:"flex"},searchBar:{position:"relative"},drawer:Object(ee.a)({},e.breakpoints.up("sm"),{width:_e,flexShrink:0}),appBar:Object(ee.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(_e,"px)"),marginLeft:_e}),menuButton:Object(ee.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:_e},content:{flexGrow:1,padding:e.spacing(3)}}})),Ae=r.a.forwardRef((function(e,t){return Object(O.jsx)(Re.a,Object(u.a)({direction:"up",ref:t},e))}));function Ee(e){var t=e.window,a=void 0!==t?function(){return t().document.body}:void 0,c=Ie(),o=(Object(se.a)(),r.a.useState(!1)),i=Object(d.a)(o,2),s=i[0],u=i[1],j=Object(l.b)(),m=function(){e.match.params.room?e.history.push("/"):u(!s)},h=Object(n.useState)([]),f=Object(d.a)(h,2),g=(f[0],f[1],r.a.useState(!1)),x=Object(d.a)(g,2),y=x[0],v=x[1],w=r.a.useState(""),C=Object(d.a)(w,2),k=C[0],R=C[1],N=r.a.useState([]),_=Object(d.a)(N,2),I=_[0],T=_[1],B=localStorage.getItem("token"),U=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(B)}}),F=function(){v(!1)},L=Object(l.c)((function(e){return e.userReducer.email})),z=Object(l.c)((function(e){return e.userReducer.name}));z&&L||b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(B)}}).get("getUser").then((function(e){var t=e.data;j({type:"load_user",payload:t})})).catch((function(e){return Ne.a.error(e)}));var q=[["Friends","/friends",he.a],["Chats","/chats",xe.a],["Enter group","/enterroom",je.a],["Create group","/newroom",M.a],["Sign out","/signin",pe.a]],H=Object(O.jsxs)("div",{children:[Object(O.jsx)("center",{children:Object(O.jsx)(he.a,{style:{borderColor:"#00008B",color:"lightgrey",width:"70px",height:"70px"}})}),Object(O.jsx)("center",{children:Object(O.jsx)("p",{children:z})}),Object(O.jsx)("div",{className:c.toolbar,style:{marginTop:"-60px"}}),Object(O.jsx)(A.a,{}),Object(O.jsx)(E.a,{children:q.map((function(t,a){return Object(O.jsxs)(W.a,{button:!0,onClick:function(){"Sign out"===t[0]?function(e,t){localStorage.removeItem("token"),t({type:"clear"}),e("/signin")}(e.history.push,j):e.history.push(t[1])},children:[Object(O.jsx)(le.a,{style:{color:"#00008B"},children:Object(n.createElement)(t[2],{})}),Object(O.jsx)(D.a,{primary:t[0]})]},t[0])}))})]});return Object(O.jsxs)("div",{children:[Object(O.jsxs)(P.a,{fullScreen:!0,open:y,onClose:F,TransitionComponent:Ae,children:[Object(O.jsx)(ue.a,{className:c.searchBar,children:Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(Y.a,{edge:"start",color:"inherit",onClick:F,"aria-label":"close",children:Object(O.jsx)(ve.a,{})}),Object(O.jsx)(S.a,{style:{backgroundColor:"white",borderRadius:"10px"},variant:"outlined",margin:"normal",fullWidth:!0,name:"search",label:"Search people",type:"text",value:k,onChange:function(e){e.preventDefault(),R(e.target.value),U.post("searchPeople",{searchstring:k}).then((function(e){var t=e.data;t.status?T(t.users):Ne.a.error("Something went wrong",{autoComplete:1500})}))},autoComplete:"current-password"})]})}),Object(O.jsx)(E.a,{children:I.map((function(t){return Object(O.jsx)(W.a,{button:!0,children:Object(O.jsx)(D.a,{primary:t.name,secondary:t.email,onClick:function(){return e.history.push("/profile/".concat(t.email,"-").concat(t.name))}})})}))})]}),Object(O.jsx)(ue.a,{position:"static",className:c.appBar,children:Object(O.jsxs)(ke.a,{style:{display:"flex"},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon tabs example",children:[Object(O.jsx)(Se.a,{icon:Object(O.jsx)(ae.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/")},"aria-label":"phone"}),Object(O.jsx)(Se.a,{icon:Object(O.jsx)(xe.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/chats")},"aria-label":"favorite"}),Object(O.jsx)(Se.a,{icon:Object(O.jsx)(fe.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/friends")},"aria-label":"person"}),Object(O.jsx)(Se.a,{icon:Object(O.jsx)(Ce.a,{style:{color:"white"}}),onClick:function(){v(!0)},"aria-label":"search"}),Object(O.jsx)(Se.a,{icon:Object(O.jsx)(re.a,{style:{color:"white"}}),"aria-label":"open drawer",edge:"start",onClick:m,className:c.menuButton})]})}),Object(O.jsxs)("nav",{className:c.drawer,"aria-label":"mailbox folders",children:[Object(O.jsx)(ie.a,{smUp:!0,implementation:"css",children:Object(O.jsx)(oe.a,{container:a,variant:"temporary",anchor:"right",open:s,onClose:m,classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0},children:H})}),Object(O.jsx)(ie.a,{xsDown:!0,implementation:"css",children:Object(O.jsx)(oe.a,{classes:{paper:c.drawerPaper},variant:"permanent",open:!0,children:H})})]})]})}Ne.a.configure();var We=Object(m.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},main:{height:"100vh"}}}));function De(){return Object(O.jsxs)(_.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(R.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var Te=a(18),Be=a(16),Pe=a.n(Be),Ue=a(29),Fe=a(113),Le=a(110),ze=a(111),qe=a.n(ze),Ye=(a(272),a(137)),He=a.n(Ye),Me=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function Ge(e){var t=Me();return Object(O.jsx)("div",{className:t.root,children:Object(O.jsx)(ue.a,{position:"static",children:Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(Y.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",children:Object(O.jsx)(He.a,{onClick:function(){return e.history.goBack()}})}),Object(O.jsx)(_.a,{variant:"h6",className:t.title,children:e.name})]})})})}var Je,Ke=new TextDecoder,Ve=new TextEncoder,Qe=function(){var e=Object(Ue.a)(Pe.a.mark((function e(t,a,n,r,c){var o,i,s=arguments;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>5&&void 0!==s[5]?s[5]:"AES-CBC",e.next=3,window.crypto.subtle.importKey("raw",Ve.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);case 3:return i=e.sent,e.next=6,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:Ve.encode(a),iterations:n,hash:c},i,{name:o,length:r},!1,["encrypt","decrypt"]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),Xe=function(e,t,a){var n;console.log(e),n=e,e=Uint8Array.from(atob(n),(function(e){return e.charCodeAt(0)})),console.log(e);return console.log(a),console.log(t),Object(Ue.a)(Pe.a.mark((function n(){var r,c;return Pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qe("my password",t,1e5,256,"SHA-256");case 2:return r=n.sent,n.next=5,window.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r,e.slice(32));case 5:return c=n.sent,console.log(c),n.abrupt("return",Ke.decode(c));case 8:case"end":return n.stop()}}),n)})))()},Ze=new TextEncoder,$e=function(){var e=Object(Ue.a)(Pe.a.mark((function e(t,a,n,r,c){var o,i=arguments;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>5&&void 0!==i[5]?i[5]:"AES-CBC",e.next=3,window.crypto.subtle.importKey("raw",Ze.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);case 3:return Je=e.sent,e.next=6,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:Ze.encode(a),iterations:n,hash:c},Je,{name:o,length:r},!1,["encrypt","decrypt"]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),et=function(e,t,a){return console.log("salt "+t+" iv "+a),console.log(e),e=Ze.encode(e),console.log(e),Object(Ue.a)(Pe.a.mark((function n(){var r,c,o;return Pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$e("my password",t,1e5,256,"SHA-256");case 2:return r=n.sent,n.next=5,window.crypto.subtle.encrypt({name:"AES-CBC",iv:a},r,e);case 5:return c=n.sent,console.log("Encrypted ".concat(c)),i=[].concat(Object(Te.a)(t),Object(Te.a)(a),Object(Te.a)(new Uint8Array(c))),o=btoa(String.fromCharCode.apply(String,Object(Te.a)(new Uint8Array(i)))),console.log("concatennated ".concat(o)),n.abrupt("return",o);case 10:case"end":return n.stop()}var i}),n)})))()},tt=void 0;Ne.a.configure();var at="#23D0E0",nt=Object(m.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},heading:{textAlign:"justifyContent"},footer:{float:"right"},paging:{margin:"auto",backgroundColor:"beige",color:"black",marginBottom:"10px"},messageBox:{display:"flex",width:"100%",flexWrap:"wrap",backgroundColor:at},main:{backgroundColor:at,height:"100%",paddingTop:"70px",width:"100%"},container:{width:"300px",margin:"auto",minHeight:"70vh",padding:"2px",borderRadius:"10px"},msgs:{width:"250px",marginBottom:"10px",backgroundColor:"#fffcb7",color:"black"},sendbox:{width:"100%"},download:{marginRight:"-15px",color:"white"}}),rt=function(e){var t=new Audio("../incoming.mp3"),a=nt(),r=Object(l.c)((function(e){return e.chatReducer})),c=Object(l.b)(),o=e.match.params.room,i=e.roomName,s=Object(n.useState)(""),j=Object(d.a)(s,2),m=j[0],f=j[1],g=Object(n.useState)(!1),x=Object(d.a)(g,2),y=(x[0],x[1],Object(n.useState)(2)),w=Object(d.a)(y,2),C=w[0],k=w[1],S=Object(n.useState)("block"),R=Object(d.a)(S,2),N=R[0],_=R[1],I=Object(n.useRef)(null),A=v()(p,{transports:["websocket","polling"]}),E=localStorage.getItem("token"),W=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(E)}}),D=Object(l.c)((function(e){return e.userReducer.email})),T=Object(l.c)((function(e){return e.userReducer.name})),B=function(e,a,n){e.emit("create",o),e.emit("user-joined",a,o),e.on("receiveimg",(function(e){n===e.email&&(document.getElementById("loader").style.display="none",Object(Ue.a)(Pe.a.mark((function t(){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({type:"add_chat",payload:{room:o,msg:e}}),setTimeout((function(){return window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"})}),500),I.current.focus();case 3:case"end":return t.stop()}}),t)})))())})),e.on("receive",(function(e){n!==e.email&&(console.log("received"),Object(Ue.a)(Pe.a.mark((function a(){return Pe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.path){a.next=7;break}return e.salt=e.salt.split(","),e.iv=e.iv.split(","),e.salt=new Uint8Array(e.salt),e.iv=new Uint8Array(e.iv),a.next=7,Xe(e.message,e.salt,e.iv).then((function(t){e.message=t}));case 7:Object(Ue.a)(Pe.a.mark((function t(){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({type:"add_chat",payload:{room:o,msg:e}}),e.path?setTimeout((function(){return window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"})}),500):window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"}),I.current.focus();case 3:case"end":return t.stop()}}),t)})))(),t.play();case 9:case"end":return a.stop()}}),a)})))())}))};function P(e){return U.apply(this,arguments)}function U(){return(U=Object(Ue.a)(Pe.a.mark((function e(t){return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("getMessages",{room:o,page:t}).then((function(e){var a=e.data;if(1==a.status){function n(){return(n=Object(Ue.a)(Pe.a.mark((function e(){return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t){e.next=3;break}return e.next=3,W.get("getUser").then((function(e){var t=e.data;c({type:"load_user",payload:t}),B(A,t.name,t.email)})).catch((function(e){return Ne.a.error(e)}));case 3:return e.next=5,Object(Ue.a)(Pe.a.mark((function e(){var t,n,r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.msgs,n=Pe.a.mark((function e(a){var n,r,c;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t[a]).path){e.next=12;break}for(console.log("salt "+n.salt),console.log("iv "+n.iv),n.salt=n.salt.split(","),n.iv=n.iv.split(","),r=0;r<n.salt.length;r++)n.salt[r]=parseInt(n.salt[r]);for(c=0;c<n.iv.length;c++)n.iv[c]=parseInt(n.iv[c]);return n.salt=new Uint8Array(n.salt),n.iv=new Uint8Array(n.iv),e.next=12,Xe(n.message,n.salt,n.iv).then((function(e){n.message=e}));case 12:case"end":return e.stop()}}),e)})),r=0;case 3:if(!(r<t.length)){e.next=8;break}return e.delegateYield(n(r),"t0",5);case 5:r++,e.next=3;break;case 8:c({type:"load_chat",payload:{room:o,msgs:t}});case 9:case"end":return e.stop()}}),e)})))();case 5:1==t&&setTimeout((function(){return window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"})}),350),k((function(e){return e+1}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.end?_("none"):_("block"),function(){n.apply(this,arguments)}()}})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){return r[o]?B(A,T,D):P(1),function(){A.disconnect()}}),[]);function F(){return(F=Object(Ue.a)(Pe.a.mark((function e(){var t,a,n,r,c,i,s;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("file-input").files[0],document.getElementById("file-input").value){e.next=3;break}return e.abrupt("return");case 3:if(document.getElementById("file-input").value="",document.getElementById("loader").style.display="block",a=(new Date).getHours(),n=(new Date).getMinutes(),a=0==parseInt(a/10)?"0"+a:a,n=0==parseInt(n/10)?"0"+n:n,r=a+":"+n,c=2,t.type.includes("image")&&(c=1),1!=c){e.next=17;break}i={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},Object(Le.a)(t,i).then((function(e){A.emit("send",{flag:c,email:D,room:o,name:T,path:t.name,img:e,time:r})})).catch((function(e){alert(e.message),console.log(e.message)})),e.next=22;break;case 17:return(s=new FileReader).readAsDataURL(t),e.next=21,function(){var e=s.result.replace(/^data:.+;base64,/,"");A.emit("send",{flag:c,email:D,room:o,name:T,path:t.name,img:e,time:r})};case 21:s.onloadend=e.sent;case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L={marginLeft:"auto"};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{style:{position:"fixed",width:"100%"},children:[Object(O.jsx)(Ge,Object(u.a)({name:i},e)),Object(O.jsx)("center",{children:Object(O.jsx)(h.a,{id:"loader",style:{marginTop:"100px",display:"none"}})})]}),Object(O.jsxs)("div",{class:a.main,children:[Object(O.jsx)("div",{class:a.container,id:"container",children:Object(O.jsxs)("div",{id:"messages",class:a.messageBox,children:[Object(O.jsx)(Fe.a,{elevation:3,className:a.paging,style:{display:N},onClick:P.bind(tt,C),children:Object(O.jsx)("button",{class:"btn btn-sm",s:!0,children:"Older Messages"})}),void 0!=r[o]?r[o].map((function(e,t){var n=D===e.email?L:{};return Object(O.jsx)(Fe.a,{elevation:3,className:a.msgs,style:n,children:0==e.flag?Object(O.jsxs)("div",{style:{padding:"10px"},children:[Object(O.jsx)("b",{children:e.name}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{children:e.message}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{style:{float:"right"},children:e.time})]}):1==e.flag?Object(O.jsxs)("div",{style:{padding:"10px"},children:[Object(O.jsx)("b",{children:e.name}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:"/uploads/".concat(e.path,"/").concat(E),height:"100%",width:"100%"})}),Object(O.jsx)("span",{style:{float:"right"},children:e.time})]}):Object(O.jsxs)("div",{style:{padding:"10px"},children:[Object(O.jsx)("b",{children:e.name}),Object(O.jsx)("br",{}),Object(O.jsxs)("video",{width:"100%",height:"100%",controls:!0,children:[Object(O.jsx)("source",{src:"/uploads/"+e.path,type:"video/mp4"}),Object(O.jsx)("source",{src:"/uploads/"+e.path,type:"video/ogg"})]}),Object(O.jsx)("span",{style:{float:"right"},children:e.time})]})})})):null]})}),Object(O.jsxs)("center",{children:[Object(O.jsxs)("div",{class:a.sendbox,children:[Object(O.jsx)("input",{type:"text",ref:I,placeholder:"Type your message here",value:m,onChange:function(e){return f(e.target.value)},autoFocus:!0}),Object(O.jsx)("button",{className:"btn btn-primary",onClick:function(e,t,a){if(""!==a){var n=(new Date).getHours(),r=(new Date).getMinutes(),o=(n=0==parseInt(n/10)?"0"+n:n)+":"+(r=0==parseInt(r/10)?"0"+r:r),i=a;document.getElementById("loader").style.display="block";var s=window.crypto.getRandomValues(new Uint8Array(16)),l=window.crypto.getRandomValues(new Uint8Array(16));console.log(s,l),Object(Ue.a)(Pe.a.mark((function n(){return Pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c({type:"add_chat",payload:{room:t,msg:{flag:0,email:D,room:t,name:e,message:a,time:o}}});case 2:window.scrollTo({top:document.getElementById("messages").scrollHeight,behaviour:"smooth"}),I.current.focus();case 4:case"end":return n.stop()}}),n)})))(),et(i,s,l).then((function(a){console.log(a),s=Object(Te.a)(s),l=Object(Te.a)(l),s=s.join(","),l=l.join(","),A.emit("send",{flag:0,email:D,room:t,name:e,msg:a,salt:s,iv:l,time:o}),document.getElementById("loader").style.display="none",console.log("sent"),f("")}))}}.bind(tt,T,o,m),children:"Send"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{class:a.sendbox,children:[Object(O.jsx)("label",{for:"file-input",children:Object(O.jsx)(qe.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(O.jsx)("input",{id:"file-input",type:"file",style:{display:"none"},onChange:function(e){}}),Object(O.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){return F.apply(this,arguments)}.bind(tt),children:"Send"})]})]})]})]})};a(273);Ne.a.configure();var ct=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ot(){return Object(O.jsxs)(_.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(R.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var it=function(e,t,a,n){e.post("setFriend",{option:n,profile:a}).then((function(e){1==e.data.status&&t({type:"set_friend",payload:{option:n,profile:a}})})).catch((function(e){alert(e)}))};var st=a(112),lt=a(188),ut=a.n(lt),dt=a(146),jt=a.n(dt);Ne.a.configure();var bt=Object(m.a)((function(e){return Object(ee.a)({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},main:{height:"100vh"}},"avatar",{backgroundColor:st.a[500]})}));function pt(){return Object(O.jsxs)(_.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(R.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var mt=a(351),ht=a(40),Ot=a.n(ht);function ft(){return Object(O.jsxs)(_.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(i.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}Ne.a.configure();var gt=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},tabLink:{display:"flex",alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function xt(){return Object(O.jsxs)(_.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(i.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}Ne.a.configure();var yt=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));Ne.a.configure();var vt=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));Ne.a.configure();var wt=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function Ct(){return Object(O.jsxs)(_.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(i.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}Ne.a.configure();var kt=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var St=a(4),Rt=a(352),Nt=a(353),_t=a(355),It=a(356),At=a(357),Et=a(191),Wt=a.n(Et),Dt=a(192),Tt=a.n(Dt),Bt=a(189),Pt=a.n(Bt),Ut=a(190),Ft=a.n(Ut),Lt=a(193),zt=a(354);Ne.a.configure();var qt=Object(m.a)((function(e){return{root:{maxWidth:500,margin:"auto"},media:{paddingTop:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:st.a[500]}}}));function Yt(){return Object(O.jsxs)(_.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(i.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}Ne.a.configure();var Ht=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},tabLink:{display:"flex",alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var Mt,Gt,Jt=a(74),Kt=a(138),Vt=Object(Jt.c)({groupReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rooms:[],latest:[],exist:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load_group":return t.payload;case"add_my_group":return Object(u.a)(Object(u.a)({},e),{},{rooms:[].concat(Object(Te.a)(e.rooms),[t.payload]),latest:[].concat(Object(Te.a)(e.latest),[t.payload])});case"add_latest_group":return e.latest.includes(t.payload)?e:Object(u.a)(Object(u.a)({},e),{},{latest:[].concat(Object(Te.a)(e.latest),[t.payload])});case"exit_group":return Object(u.a)(Object(u.a)({},e),{},{latest:e.latest.filter((function(e){return e!=t.payload}))});case"edit_group":return Object(u.a)(Object(u.a)({},e),{},{exist:!1});case"delete_my_group":return Object(u.a)(Object(u.a)({},e),{},{rooms:e.rooms.filter((function(e){return e!=t.payload})),latest:e.latest.filter((function(e){return e!=t.payload}))});case"clear":return{rooms:[],latest:[],exist:!1};default:return e}},chatReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"load_chat":return a[t.payload.room]?a[t.payload.room]=[].concat(Object(Te.a)(t.payload.msgs),Object(Te.a)(a[t.payload.room])):a[t.payload.room]=t.payload.msgs,a;case"add_chat":return a[t.payload.room]?a[t.payload.room]=[].concat(Object(Te.a)(a[t.payload.room]),[t.payload.msg]):a[t.payload.room]=[t.payload.msg],a;case"clear":return{};default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,email:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load_user":return t.payload;case"clear":return{name:null,email:null};default:return e}},friendReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pendings:[],friends:[],sent:[],exist:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load_friend":return t.payload;case"set_friend":var a=t.payload.profile,n=t.payload.option;return"Accept"==n?Object(u.a)(Object(u.a)({},e),{},{pendings:e.pendings.filter((function(e){return e.email!=a.email})),friends:e.friends.concat(a)}):"Disconnect"==n||"Cancel request"==n?Object(u.a)(Object(u.a)({},e),{},{sent:e.sent.filter((function(e){return e.email!=a.email})),pendings:e.pendings.filter((function(e){return e.email!=a.email})),friends:e.friends.filter((function(e){return e.email!=a.email}))}):Object(u.a)(Object(u.a)({},e),{},{sent:e.sent.concat(a)});case"clear":return{pendings:[],friends:[],sent:[],exist:!1};default:return e}},profileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load_profile":return t.payload;case"clear":return{};default:return e}},startReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{exist:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start":return{exist:t.payload};case"end":case"clear":return{exist:0};default:return e}},postReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{exist:!1,post:[]},t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e.post));switch(t.type){case"load_post":return{exist:!0,post:t.payload.reverse()};case"add_post":return Object(u.a)(Object(u.a)({},e),{},{post:[t.payload].concat(Object(Te.a)(e.post))});case"like_post":for(var n=0;n<a.length;n++)a[n]._id==t.payload._id&&(t.payload.liked?(a[n].likeCount--,a[n].liked=!1):(a[n].likeCount++,a[n].liked=!0));return Object(u.a)(Object(u.a)({},e),{},{post:a});case"hide_post":alert(t.payload);for(var r=[],c=0;c<e.post.length;c++)e.post[c]._id!=t.payload&&r.push(e.post[c]);return alert(r.length),Object(u.a)(Object(u.a)({},e),{},{post:r});case"clear":return{exist:!1,post:[]};default:return e}}}),Qt=Object(Jt.d)(Vt,[],Object(Jt.a)(Kt.a));o.a.render(Object(O.jsx)(l.a,{store:Qt,children:Object(O.jsx)(i.a,{children:Object(O.jsxs)(s.d,{children:[Object(O.jsx)(s.b,{exact:!0,path:"/",component:(Mt=function(e){var t=this,a=qt(),c=r.a.useState(!1),o=Object(d.a)(c,2),i=o[0],s=o[1],j=r.a.useState(null),m=Object(d.a)(j,2),h=m[0],f=m[1],g=Object(l.c)((function(e){return e.userReducer.email})),x=function(e){f(e.currentTarget)},y=function(){f(null)},v=function(){s(!i)},C=localStorage.getItem("token"),k=Object(l.b)(),S=Object(l.c)((function(e){return e.postReducer.exist})),R=Object(l.c)((function(e){return e.postReducer.post}));Object(n.useEffect)((function(){console.log(R),S||b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(C)}}).get("getPost").then((function(t){var a=t.data;1==a.status?(k({type:"load_post",payload:a.post}),e.history.replace("/")):Ne.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return Ne.a.error("Something went wrong",{autoClose:1e3})}))}),[]);var N=function(e){alert(R.indexOf(R.find((function(t){return t._id==e})))),k({type:"hide_post",payload:e}),y()},I=function(t,a){b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(C)}}).post("deletePost",{email:t,_id:a}).then((function(t){1==t.data.status?(k({type:"hide_post",payload:a}),Ne.a.success("Post was deleted",{autoClose:1500}),e.history.replace("/")):Ne.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return Ne.a.error("Something went wrong",{autoClose:1e3})})),y()},E=function(t,a,n){b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(C)}}).post("likePost",{email:t,_id:a,liked:n}).then((function(t){1==t.data.status?(k({type:"like_post",payload:{_id:a,liked:n}}),e.history.replace("/")):Ne.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return Ne.a.error("Something went wrong",{autoClose:1e3})}))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{style:{position:"fixed",width:"100%"},children:Object(O.jsx)(Ee,Object(u.a)({},e))}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{children:[Object(O.jsx)(q.a,{color:"primary",style:{height:"45px",width:"45px",float:"right"},"aria-label":"New Room",onClick:function(){return e.history.push("/uploadpost")},children:Object(O.jsx)(M.a,{})}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)(A.a,{}),R.map((function(e){return Object(O.jsxs)(Rt.a,{className:a.root,children:[Object(O.jsx)(Nt.a,{avatar:Object(O.jsx)(w.a,{"aria-label":"recipe",className:a.avatar,children:e.uploaderName.split(" ").map((function(e){return e[0].toUpperCase()}))}),action:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Y.a,{"aria-label":"settings",children:Object(O.jsx)(Pt.a,{onClick:x})}),Object(O.jsxs)(Lt.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:y,children:[Object(O.jsx)(zt.a,{onClick:N.bind(t,e._id),children:"Hide"}),g==e.uploaderEmail?Object(O.jsx)(zt.a,{onClick:I.bind(t,e.email,e._id),children:"Delete"}):null]})]}),title:e.uploaderName,subheader:e.date}),Object(O.jsx)("img",{src:"".concat(p,"/uploads/").concat(e.path,"/").concat(C),width:"100%",height:"100%"}),Object(O.jsx)(_t.a,{children:Object(O.jsx)(_.a,{variant:"body2",color:"textSecondary",component:"p",children:e.desc.slice(0,30)})}),Object(O.jsxs)(It.a,{disableSpacing:!0,children:[Object(O.jsx)(Y.a,{"aria-label":"add to favorites",children:Object(O.jsx)(Ft.a,{onClick:E.bind(t,g,e._id,e.liked),color:e.liked?"Primary":""})})," ",e.likeCount,Object(O.jsx)(Y.a,{"aria-label":"share",children:Object(O.jsx)(Wt.a,{})}),Object(O.jsx)(Y.a,{className:Object(St.a)(a.expand,Object(ee.a)({},a.expandOpen,i)),onClick:v,"aria-expanded":i,"aria-label":"show more",children:Object(O.jsx)(Tt.a,{})})]}),Object(O.jsx)(At.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(O.jsx)(_t.a,{children:Object(O.jsx)(_.a,{paragraph:!0,children:e.desc})})})]})}))]})]})},Gt=x,function(e){var t=Object(n.useState)(0),a=Object(d.a)(t,2),r=a[0],c=a[1],o=Object(l.c)((function(e){return e.userReducer.email})),i=Object(l.b)();return Object(n.useEffect)((function(){if(o)c(1);else{var e=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(e)}}).get("getUser").then((function(e){var t=e.data;i({type:"start",payload:1}),i({type:"load_user",payload:{name:t.name,email:t.email}}),c(1)})).catch((function(e){c(2)}))}}),[]),0==r?Object(O.jsx)(g,{}):1==r?Object(O.jsx)(Mt,Object(u.a)({},e)):Object(O.jsx)(Gt,{redirect:"signin"})})}),Object(O.jsx)(s.b,{path:"/chats",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(l.c)((function(e){return e.startReducer.exist})),j=Object(l.b)();return Object(n.useEffect)((function(){if(s)i(1);else{var e=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data;j({type:"start",exist:1}),i(1)})).catch((function(e){i(2)}))}}),[]),0==o?Object(O.jsx)(g,{}):1==o?Object(O.jsx)(e,Object(u.a)({},a)):Object(O.jsx)(t,{redirect:"signin"})}}((function(e){var t=this,a=We(),c=Object(l.b)(),o=r.a.useState(!1),i=Object(d.a)(o,2),s=i[0],j=i[1],m=r.a.useState(!1),h=Object(d.a)(m,2),f=h[0],g=h[1],x=r.a.useState(null),y=Object(d.a)(x,2),v=y[0],R=y[1],_=r.a.useState(""),H=Object(d.a)(_,2),G=H[0],K=H[1],Q=r.a.useState(!1),Z=Object(d.a)(Q,2),ee=(Z[0],Z[1],r.a.useState("")),te=Object(d.a)(ee,2),ae=(te[0],te[1],r.a.useState([])),ne=Object(d.a)(ae,2),re=(ne[0],ne[1],function(){R(null),j(!1)}),ce=function(){R(null),g(!1)},oe=localStorage.getItem("token"),ie=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(oe)}}),se=Object(l.c)((function(e){return e.groupReducer.exist}));Object(l.c)((function(e){return e.userReducer.email})),Object(l.c)((function(e){return e.userReducer.name})),Object(n.useEffect)((function(){se||ie.get("getRooms").then((function(e){var t=e.data;1==t.status&&(c({type:"load_group",payload:{latest:t.latest,rooms:t.rooms,exist:!0}}),c({type:"load_user",payload:{name:t.name,email:t.email}}))})).catch((function(t){alert(t),e.history.push("/signin")}))}),[]);var le=function(t){ie.post("exitRoom",{room:t}).then((function(e){1==e.data.status?c({type:"exit_group",payload:t}):Ne.a.error("Something went wrong")})).catch((function(t){alert(t),e.history.push("/signin")}))},ue=Object(l.c)((function(e){return e.groupReducer.rooms})),de=Object(l.c)((function(e){return e.groupReducer.latest}));return Object(O.jsxs)("div",{class:a.main,children:[Object(O.jsx)("div",{style:{position:"fixed",width:"100%"},children:Object(O.jsx)(Ee,Object(u.a)({},e))}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)(P.a,{open:s,onClose:re,"aria-labelledby":"form-dialog-title",children:[Object(O.jsxs)(z.a,{id:"form-dialog-title",children:["Edit password for group ",v]}),Object(O.jsxs)(F.a,{children:[Object(O.jsx)(L.a,{children:"Enter new password below"}),Object(O.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"name",label:"Password",value:G,onChange:function(e){return K(e.target.value)},type:"password",fullWidth:!0})]}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(C.a,{onClick:function(){re(),K("")},color:"primary",children:"Cancel"}),Object(O.jsx)(C.a,{onClick:function(){var t;t=v,ie.post("editRoom",{room:t,newPassword:G}).then((function(e){1==e.data.status?(Ne.a.success("Password updated successfully for room ".concat(t)),c({type:"edit_group"})):Ne.a.error("Something went wrong")})).catch((function(t){alert(t),e.history.push("/signin")})),re(),K("")},color:"primary",children:"Confirm"})]})]}),Object(O.jsxs)(P.a,{open:f,onClose:ce,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(O.jsx)(z.a,{id:"alert-dialog-title",children:"Delete group"}),Object(O.jsx)(F.a,{children:Object(O.jsxs)(L.a,{id:"alert-dialog-description",children:["Are you sure want to delete group ",v]})}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(C.a,{onClick:ce,color:"primary",children:"No"}),Object(O.jsx)(C.a,{onClick:function(){var t;t=v,ie.post("deleteRoom",{room:t}).then((function(e){1==e.data.status?c({type:"delete_my_group",payload:t}):Ne.a.error("Something went wrong")})).catch((function(t){Ne.a.error(t),e.history.push("/signin")})),ce()},color:"primary",autoFocus:!0,children:"Yes"})]})]}),Object(O.jsx)(q.a,{color:"primary",style:{height:"45px",width:"45px",float:"right"},"aria-label":"New Room",onClick:function(){return e.history.push("/newroom")},children:Object(O.jsx)(M.a,{})}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h6",{children:"My Groups"}),Object(O.jsx)(A.a,{}),Object(O.jsx)(E.a,{children:null===ue||void 0===ue?void 0:ue.sort((function(e,t){return e<t?-1:1})).map((function(t,a){return Object(O.jsxs)(W.a,{button:!0,onClick:function(){return e.history.push("/chat/".concat(t))},children:[Object(O.jsx)(B.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)($.a,{color:"primary"})})}),Object(O.jsx)(D.a,{primary:t}),Object(O.jsxs)(T.a,{children:[Object(O.jsx)(Y.a,{edge:"end","aria-label":"delete",children:Object(O.jsx)(J.a,{color:"primary",onClick:function(){R(t),j(!0)}})}),Object(O.jsx)(Y.a,{edge:"end","aria-label":"delete",children:Object(O.jsx)(V.a,{color:"secondary",onClick:function(){R(t),g(!0)}})})]})]},t)}))}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("h6",{children:"All Groups"}),Object(O.jsx)(A.a,{}),Object(O.jsx)(E.a,{children:null===de||void 0===de?void 0:de.sort((function(e,t){return e<t?-1:1})).map((function(a,n){return Object(O.jsxs)(W.a,{button:!0,onClick:function(){return e.history.push("/chat/".concat(a))},children:[Object(O.jsx)(B.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)($.a,{color:"primary"})})}),Object(O.jsx)(D.a,{primary:a}),Object(O.jsx)(T.a,{children:Object(O.jsx)(Y.a,{edge:"end","aria-label":"delete",onClick:le.bind(t,a),children:Object(O.jsx)(X.a,{color:"secondary"})})})]},a)}))})]}),Object(O.jsx)(N.a,{mt:8,className:a.footer,children:Object(O.jsx)(De,{})})]})]})}),x)}),Object(O.jsx)(s.b,{path:"/signin",component:function(e){var t=gt(),a=(localStorage.getItem("token"),Object(n.useState)("")),r=Object(d.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(""),u=Object(d.a)(s,2),j=u[0],p=u[1],m=Object(l.b)();return Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{className:t.paper,children:[Object(O.jsx)(w.a,{className:t.avatar,children:Object(O.jsx)(Ot.a,{})}),Object(O.jsx)(_.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(O.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:c,onChange:function(e){return o(e.target.value)},autoFocus:!0}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:j,onChange:function(e){return p(e.target.value)},autoComplete:"current-password"}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){t.preventDefault();var a={email:c,pass:j};b.a.post("/localSignin",a).then((function(t){var a=t.data,n=null,r=null,c=null;1==a.status?(n=a.email,r=a.name,c=a.token,Ne.a.success("Signed in successfully",{autoClose:1e3}),m({type:"load_user",payload:{name:r,email:n}}),localStorage.setItem("token",c),e.history.push("/")):Ne.a.error("Something went wrong",{autoClose:1e4})})).catch((function(e){return Ne.a.error("Something went wrong"+e,{autoClose:1e3})}))},className:t.submit,children:"Sign In"}),Object(O.jsxs)(mt.a,{container:!0,children:[Object(O.jsx)(mt.a,{item:!0,xs:!0,children:Object(O.jsx)(i.b,{to:"/changePassword",children:"Forgot password?"})}),Object(O.jsx)(mt.a,{item:!0,children:Object(O.jsx)(i.b,{to:"/signup",variant:"body2",children:"Don't have an account?"})})]})]})]}),Object(O.jsx)(N.a,{mt:8,children:Object(O.jsx)(ft,{})})]})}}),Object(O.jsx)(s.b,{path:"/signup",component:function(e){var t=yt(),a=(localStorage.getItem("token"),Object(n.useState)("")),r=Object(d.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(""),u=Object(d.a)(s,2),j=u[0],p=u[1],m=Object(n.useState)(""),h=Object(d.a)(m,2),f=h[0],g=h[1],x=Object(n.useState)(""),y=Object(d.a)(x,2),v=y[0],R=y[1],A=Object(n.useState)(""),E=Object(d.a)(A,2),W=E[0],D=E[1],T=Object(n.useState)(""),B=Object(d.a)(T,2),P=B[0],U=B[1],F=Object(l.b)();return Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{className:t.paper,children:[Object(O.jsx)(w.a,{className:t.avatar,children:Object(O.jsx)(Ot.a,{})}),Object(O.jsx)(_.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(O.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Name",name:"name",value:c,onChange:function(e){return o(e.target.value)},autoFocus:!0}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:j,onChange:function(e){return p(e.target.value)},autoFocus:!0}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){e.preventDefault();var t={email:j};b.a.post("/emailverify",t).then((function(e){var t=e.data;1==t.status?(Ne.a.info(t.msg,{autoClose:1e3}),U(t.otp)):Ne.a.error(t.msg,{autoClose:1e3})})).catch((function(e){return console.log(e)}))},children:"Send OTP"}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"otp",label:"Enter OTP",name:"otp",value:W,onChange:function(e){return D(e.target.value)},autoFocus:!0}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:f,onChange:function(e){return g(e.target.value)},autoComplete:"current-password"}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:v,onChange:function(e){return R(e.target.value)},autoComplete:"current-password"}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){if(t.preventDefault(),W==P){v!=f&&Object(Ne.a)("Password and Confirm password don't match",{autoClose:1e3});var a={name:c,email:j,pass:f};b.a.post("/localSignup",a).then((function(t){var a=t.data,n=null,r=null,c=null;1==a.status&&(Ne.a.success("Signed up successfully",{autoClose:1e3}),n=a.email,r=a.name,c=a.token,F({type:"load_user",payload:{name:r,email:n}}),localStorage.setItem("token",c),e.history.push("/"))})).catch((function(e){return console.log(e)}))}else Ne.a.error("Incorrect OTP",{autoClose:1e3})},className:t.submit,children:"Sign Up"}),Object(O.jsxs)(mt.a,{container:!0,children:[Object(O.jsx)(mt.a,{item:!0,xs:!0,children:Object(O.jsx)(i.b,{to:"/changePassword",variant:"body2",children:"Forgot password?"})}),Object(O.jsx)(mt.a,{item:!0,children:Object(O.jsx)(i.b,{to:"/signin",variant:"body2",children:"Already have an account?"})})]})]})]}),Object(O.jsx)(N.a,{mt:8,children:Object(O.jsx)(xt,{})})]})}}),Object(O.jsx)(s.b,{path:"/enterroom",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(l.c)((function(e){return e.groupReducer.exist}));return Object(n.useEffect)((function(){if(s)i(1);else{var e=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data;i(1)})).catch((function(e){i(2)}))}})),0==o?Object(O.jsx)(g,{}):1==o?Object(O.jsx)(e,Object(u.a)({},a)):Object(O.jsx)(t,{redirect:"signin"})}}((function(e){var t=wt(),a=Object(n.useState)(""),r=Object(d.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(""),j=Object(d.a)(s,2),m=j[0],h=j[1],f=Object(l.b)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ge,Object(u.a)({name:""},e)),Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{className:t.paper,children:[Object(O.jsx)(w.a,{className:t.avatar,children:Object(O.jsx)($.a,{})}),Object(O.jsx)(_.a,{component:"h1",variant:"h5",children:"Enter Group"}),Object(O.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(O.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(O.jsx)(mt.a,{item:!0,xs:12,children:Object(O.jsx)(S.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Group Name",name:"email",autoComplete:"email",value:c,onChange:function(e){return o(e.target.value)},autoFocus:!0})}),Object(O.jsx)(mt.a,{item:!0,xs:12,children:Object(O.jsx)(S.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:m,onChange:function(e){return h(e.target.value)},autoComplete:"current-password"})})]}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(t){t.preventDefault();var a=localStorage.getItem("token"),n=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(a)}}),r={name:c,pass:m};n.post("enterroom",r).then((function(t){var a=t.data;1==a.status?(f({type:"add_latest_group",payload:c}),e.history.push("/chat/".concat(c))):Ne.a.error(a.msg,{autoClose:1500})})).catch((function(t){Ne.a.error(t,{autoClose:1e3}),e.history.push("/signin")}))},children:"Enter"}),Object(O.jsx)(mt.a,{container:!0,children:Object(O.jsx)(mt.a,{item:!0,xs:!0,children:Object(O.jsx)(i.b,{to:"/newroom",variant:"body2",children:"Create New Group"})})})]})]})]})]})}),x)}),Object(O.jsx)(s.b,{path:"/newroom",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(l.c)((function(e){return e.groupReducer.exist}));return Object(n.useEffect)((function(){if(s)i(1);else{var e=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data;i(1)})).catch((function(e){i(2)}))}}),[]),0==o?Object(O.jsx)(g,{}):1==o?Object(O.jsx)(e,Object(u.a)({},a)):Object(O.jsx)(t,{redirect:"signin"})}}((function(e){var t=vt(),a=Object(n.useState)(""),r=Object(d.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(""),j=Object(d.a)(s,2),m=j[0],h=j[1],f=Object(l.b)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ge,Object(u.a)({name:""},e)),Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{className:t.paper,children:[Object(O.jsx)(w.a,{className:t.avatar,children:Object(O.jsx)($.a,{})}),Object(O.jsx)(_.a,{component:"h1",variant:"h5",children:"Create Group"}),Object(O.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(O.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(O.jsx)(mt.a,{item:!0,xs:12,children:Object(O.jsx)(S.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Group Name",name:"email",value:c,onChange:function(e){return o(e.target.value)},autoComplete:"email",autoFocus:!0})}),Object(O.jsx)(mt.a,{item:!0,xs:12,children:Object(O.jsx)(S.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:m,onChange:function(e){return h(e.target.value)},autoComplete:"current-password"})})]}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(t){t.preventDefault();var a=localStorage.getItem("token"),n=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(a)}}),r={name:c,pass:m};n.post("newroom",r).then((function(t){var a=t.data;1==a.status?(Ne.a.success(a.msg,{autoClose:1e3}),f({type:"add_my_group",payload:c}),e.history.push("/")):Ne.a.error(a.msg,{autoClose:1e3})})).catch((function(t){Ne.a.error(t,{autoClose:1e3}),e.history.push("/signin")}))},children:"Create"}),Object(O.jsx)(mt.a,{container:!0,children:Object(O.jsx)(mt.a,{item:!0,xs:!0,children:Object(O.jsx)(i.b,{to:"/enterroom",variant:"body2",children:"Enter Already Existing Group"})})})]})]})]})]})}),x)}),Object(O.jsx)(s.b,{path:"/profile/:profile",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(l.b)(),j=(Object(l.c)((function(e){return e.groupReducer.exist})),a.match.params.profile.split("-")),m=Object(d.a)(j,2),h=m[0];m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(e)}}).post("getProfile",{email:h}).then((function(e){var t=e.data;1==t.status?(s({type:"load_profile",payload:{name:t.name,email:t.email}}),i(1)):i(2)})).catch((function(e){i(2)}))}),[]),0==o?Object(O.jsx)(g,{}):1==o?Object(O.jsx)(e,Object(u.a)({},a)):Object(O.jsx)(t,{redirect:""})}}((function(e){var t=ct(),a=Object(l.b)(),r=Object(n.useState)("Not connected"),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(n.useState)("Connect"),j=Object(d.a)(s,2),m=j[0],h=j[1],f=localStorage.getItem("token"),g=Object(l.c)((function(e){return e.profileReducer})),x=(g.name,g.email);g.email||e.history.push("/");var y=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(f)}}),v=Object(l.c)((function(e){return e.friendReducer.exist})),w=(Object(l.c)((function(e){return e.userReducer.email})),Object(l.c)((function(e){return e.userReducer.name})),Object(l.c)((function(e){return e.friendReducer.friends}))),C=Object(l.c)((function(e){return e.friendReducer.pendings})),S=Object(l.c)((function(e){return e.friendReducer.sent}));return Object(n.useEffect)((function(){(null===w||void 0===w?void 0:w.find((function(e){return e.email==x})))?(i("Connected"),h("Disconnect")):(null===C||void 0===C?void 0:C.find((function(e){return e.email==x})))?(i("Pending"),h("Accept")):(null===S||void 0===S?void 0:S.find((function(e){return e.email==x})))?(i("Request sent"),h("Cancel request")):(i("Not Connected"),h("Connect")),v||y.get("getFriend").then((function(e){var t=e.data;1==t.status&&(a({type:"load_friend",payload:{pendings:t.pendings,friends:t.friends,sent:t.sent,exist:!0}}),a({type:"load_user",payload:{name:t.name,email:t.email,exist:!0}}))})).catch((function(t){alert(t),e.history.push("/signin")}))}),[S,w,C]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ge,Object(u.a)({name:"Profile"},e)),Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsx)("center",{children:Object(O.jsx)(fe.a,{style:{color:"lightgrey",width:"70px",height:"70px"}})}),Object(O.jsx)("center",{children:Object(O.jsx)("p",{children:g.name})}),Object(O.jsx)("center",{children:Object(O.jsx)("p",{children:o})}),Object(O.jsx)("button",{class:"btn btn-sm btn-primary",onClick:it.bind(this,y,a,g,m),children:m}),"Pending"==o?Object(O.jsx)("button",{class:"btn btn-sm btn-danger",onClick:it.bind(this,y,a,g,"Disconnect"),children:"Decline"}):null,Object(O.jsx)(N.a,{mt:8,className:t.footer,children:Object(O.jsx)(ot,{})})]})]})}),x)}),Object(O.jsx)(s.b,{path:"/friends",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(l.c)((function(e){return e.startReducer.exist})),j=Object(l.b)();return Object(n.useEffect)((function(){if(s)i(1);else{var e=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data;j({type:"start",payload:1}),i(1)})).catch((function(e){i(2)}))}}),[]),0==o?Object(O.jsx)(g,{}):1==o?Object(O.jsx)(e,Object(u.a)({},a)):Object(O.jsx)(t,{redirect:"signin"})}}((function(e){var t=bt(),a=Object(l.b)(),c=r.a.useState(!1),o=Object(d.a)(c,2),i=o[0],s=o[1],j=r.a.useState(null),m=Object(d.a)(j,2),h=m[0],f=m[1],g=r.a.useState(!1),x=Object(d.a)(g,2),y=x[0],v=x[1],S=r.a.useState("Disconnect"),R=Object(d.a)(S,2),_=R[0],F=R[1],L=function(){s(!1)},q=function(){v(!0)},H=function(){v(!1)},M=localStorage.getItem("token"),G=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(M)}}),J=Object(l.c)((function(e){return e.friendReducer.exist})),K=(Object(l.c)((function(e){return e.userReducer.name})),Object(l.c)((function(e){return e.userReducer.email}))),V=Object(l.c)((function(e){return e.friendReducer.friends})),Q=Object(l.c)((function(e){return e.friendReducer.pendings}));return Object(n.useEffect)((function(){J||G.get("getFriend").then((function(e){var t=e.data;1==t.status&&(a({type:"load_friend",payload:{friends:t.friends,pendings:t.pendings,sent:t.sent,exist:!0}}),a({type:"load_user",payload:{name:t.name,email:t.email,exist:!0}}))})).catch((function(t){Ne.a.error(t),e.history.push("/signin")}))}),[]),Object(O.jsxs)("div",{class:t.main,children:[Object(O.jsx)("div",{style:{position:"fixed",width:"100%"},children:Object(O.jsx)(Ee,Object(u.a)({},e))}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)(P.a,{open:i,onClose:L,"aria-labelledby":"form-dialog-title",children:[Object(O.jsx)(z.a,{id:"form-dialog-title",children:"Are you sure want to connect?"}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(C.a,{onClick:function(){L()},color:"primary",children:"Cancel"}),Object(O.jsx)(C.a,{onClick:function(){it(G,a,h,"Accept"),L()},color:"primary",children:"Confirm"})]})]}),Object(O.jsxs)(P.a,{open:y,onClose:H,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(O.jsxs)(z.a,{id:"alert-dialog-title",children:["Are you sure want to ",_]}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(C.a,{onClick:H,color:"primary",children:"No"}),Object(O.jsx)(C.a,{onClick:function(){it(G,a,h,"Disconnect"),H()},color:"primary",autoFocus:!0,children:"Yes"})]})]}),Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h6",{children:"Connection Requests"}),Object(O.jsx)(A.a,{}),Object(O.jsx)(E.a,{children:Q.sort((function(e,t){return e<t?-1:1})).map((function(t,a){return Object(O.jsxs)(W.a,{button:!0,onClick:function(){return e.history.push("/profile/".concat(t.email,"-").concat(t.name))},children:[Object(O.jsx)(B.a,{children:Object(O.jsx)(he.a,{color:"primary"})}),Object(O.jsx)(D.a,{primary:t.name}),Object(O.jsxs)(T.a,{children:[Object(O.jsx)(Y.a,{edge:"end","aria-label":"delete",children:Object(O.jsx)(ut.a,{style:{color:"green"},onClick:function(){f(t),s(!0)}})}),Object(O.jsx)(Y.a,{edge:"end","aria-label":"delete",children:Object(O.jsx)(jt.a,{color:"secondary",onClick:function(){f(t),F("Decline"),q()}})})]})]},t.name)}))}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("h6",{children:"Connections"}),Object(O.jsx)(A.a,{}),Object(O.jsx)(E.a,{children:V.sort((function(e,t){return e<t?-1:1})).map((function(a,n){return Object(O.jsxs)(W.a,{button:!0,onClick:function(){return e.history.push("/profile/".concat(a.email,"-").concat(a.name))},children:[Object(O.jsxs)(B.a,{children:["  ",Object(O.jsx)(w.a,{className:t.avatar,children:a.name.split(" ").map((function(e){return e[0].toUpperCase()}))})]}),Object(O.jsx)(D.a,{primary:a.name}),Object(O.jsxs)(T.a,{children:[Object(O.jsx)(Y.a,{edge:"end","aria-label":"delete",children:Object(O.jsx)(jt.a,{color:"secondary",onClick:function(){f(a),F("Disconnect"),q()}})}),Object(O.jsx)(Y.a,{edge:"end","aria-label":"delete",children:Object(O.jsx)(xe.a,{color:"primary",onClick:function(){return e.history.push("/personal/".concat((t=a.email,n=K,(t<n?t:n)+"-"+(t>n?t:n)),"/").concat(a.email,"-").concat(K));var t,n}})})]})]},a.name)}))})]}),Object(O.jsx)(N.a,{mt:8,className:t.footer,children:Object(O.jsx)(pt,{})})]})]})}),x)}),Object(O.jsx)(s.b,{path:"/changePassword",component:function(e){var t=kt(),a=localStorage.getItem("token"),r=Object(n.useState)(""),c=Object(d.a)(r,2),o=c[0],s=c[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),j=u[0],m=u[1],h=Object(n.useState)(""),f=Object(d.a)(h,2),g=f[0],x=f[1],y=Object(n.useState)(""),v=Object(d.a)(y,2),R=v[0],A=v[1],E=Object(n.useState)(""),W=Object(d.a)(E,2),D=W[0],T=W[1],B=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(a)}});return Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{className:t.paper,children:[Object(O.jsx)(w.a,{className:t.avatar,children:Object(O.jsx)(Ot.a,{})}),Object(O.jsx)(_.a,{component:"h1",variant:"h5",children:"Change password"}),Object(O.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:o,onChange:function(e){return s(e.target.value)},autoFocus:!0}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){e.preventDefault();var t={email:o};B.post("forgotPassword",t).then((function(e){var t=e.data;1==t.status?(Ne.a.info(t.msg,{autoClose:1e3}),T(t.otp)):Ne.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){console.log(e),Ne.a.error("Something went wrong",{autoClose:1e3})}))},children:"Send OTP"}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"otp",label:"Enter OTP",name:"otp",value:R,onChange:function(e){return A(e.target.value)},autoFocus:!0}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:j,onChange:function(e){return m(e.target.value)},autoComplete:"current-password"}),Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:g,onChange:function(e){return x(e.target.value)},autoComplete:"current-password"}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){if(t.preventDefault(),R==D){g!=j&&Object(Ne.a)("Password and Confirm password don't match",{autoClose:1e3});var a={email:o,password:j};B.post("changePassword",a).then((function(t){1==t.data.status?(Ne.a.success("Password was changed successfully",{autoClose:2e3}),e.history.push("/")):Ne.a.error("Something went wrong")})).catch((function(e){console.log(e),Ne.a.error("Something went wrong")}))}else Ne.a.error("Incorrect OTP",{autoClose:1e3})},className:t.submit,children:"Submit"}),Object(O.jsx)(mt.a,{container:!0,children:Object(O.jsx)(mt.a,{item:!0,xs:!0,children:Object(O.jsx)(i.b,{href:"#",variant:"body2",children:"Back to Home"})})})]})]}),Object(O.jsx)(N.a,{mt:8,children:Object(O.jsx)(Ct,{})})]})}}),Object(O.jsx)(s.b,{exact:!0,path:"/chat/:room",component:function(e,t){return function(a){var r=Object(n.useState)(0),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(n.useState)("signin"),j=Object(d.a)(s,2),m=j[0],h=j[1],f=a.match.params.room,x=Object(l.c)((function(e){return e.groupReducer.exist})),y=Object(l.c)((function(e){return e.groupReducer.latest}));return Object(n.useEffect)((function(){if(x)y.includes(f)?i(1):(h("enterroom"),i(2));else{var e=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(e)}}).get("getRooms").then((function(e){e.data.latest.includes(f)?i(1):(h("enterroom"),i(2))})).catch((function(e){i(2)}))}}),[]),0==o?Object(O.jsx)(g,{}):1==o?Object(O.jsx)(e,Object(u.a)({roomName:f},a)):Object(O.jsx)(t,{redirect:m})}}(rt,x)}),Object(O.jsx)(s.b,{exact:!0,path:"/personal/:room/:emails",component:function(e,t){var a="";return function(r){var c=Object(n.useState)(0),o=Object(d.a)(c,2),i=o[0],s=o[1],j=Object(n.useState)(""),m=Object(d.a)(j,2),h=m[0],f=m[1],x=r.match.params.emails.split("-"),y=Object(d.a)(x,2),v=y[0],w=(y[1],Object(l.b)()),C=Object(l.c)((function(e){return e.friendReducer.exist})),k=Object(l.c)((function(e){return e.friendReducer.friends}));return Object(n.useEffect)((function(){if(C){var e;(a=null===(e=k.find((function(e){return e.email==v})))||void 0===e?void 0:e.name)?s(1):(f(""),s(2))}else{var t=localStorage.getItem("token");b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(t)}}).get("getFriend").then((function(e){var t,n=e.data;w({type:"load_friend",payload:{friends:n.friends,pendings:n.pendings,sent:n.sent,exist:!0}}),(a=null===(t=n.friends.find((function(e){return e.email==v})))||void 0===t?void 0:t.name)?s(1):(f(""),s(2))})).catch((function(e){s(2)}))}}),[]),0==i?Object(O.jsx)(g,{}):1==i?Object(O.jsx)(e,Object(u.a)({roomName:a},r)):Object(O.jsx)(t,{redirect:h})}}(rt,x)}),Object(O.jsx)(s.b,{path:"/uploadpost",component:function(e){var t=Ht(),a=Object(l.c)((function(e){return e.userReducer.name})),r=Object(l.c)((function(e){return e.userReducer.email})),c=Object(n.useState)(""),o=Object(d.a)(c,2),i=o[0],s=o[1],u=Object(l.b)(),j=localStorage.getItem("token"),m=b.a.create({baseURL:p,headers:{Authorization:"bearer ".concat(j)}}),h=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(){return(f=Object(Ue.a)(Pe.a.mark((function t(n){var c,o,l,d,j,b,p,O,f,g,x,y;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),c=new Date,o=c.getUTCDate(),l=c.getUTCMonth(),d=c.getUTCFullYear(),j=c.getHours(),b=c.getMinutes(),p=c.getTime()/1e3,j=0==parseInt(j/10)?"0"+j:j,b=0==parseInt(b/10)?"0"+b:b,O="".concat(h[l]," ").concat(o,", ").concat(d," ").concat(j,":").concat(b),(g=document.getElementById("file-input").files[0])?(x={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},Object(Le.a)(g,x).then((function(t){var n={uploaderName:a,uploaderEmail:r,desc:i,img:JSON.stringify(f),path:g.name,date:O,time:p};m.post("uploadpost",n).then((function(t){var a=t.data;1==a.status?(g&&(g.value=""),s(""),Ne.a.success(a.msg,{autoClose:1e3}),u({type:"add_post",payload:n}),e.history.replace("/")):Ne.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return Ne.a.error("Something went wrong",{autoClose:1e3})}))})).catch((function(e){alert(e.message),console.log(e.message)}))):(y={uploaderName:a,uploaderEmail:r,desc:i,img:f,path:undefined,date:O,time:p},m.post("uploadpost",y).then((function(t){var a=t.data;1==a.status?(g&&(g.value=""),s(""),Ne.a.success(a.msg,{autoClose:1e3}),u({type:"add_post",payload:y}),e.history.replace("/")):Ne.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return Ne.a.error("Something went wrong",{autoClose:1e3})})));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(O.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(k.a,{}),Object(O.jsxs)("div",{className:t.paper,children:[Object(O.jsx)(w.a,{className:t.avatar,children:Object(O.jsx)(Ot.a,{})}),Object(O.jsx)(_.a,{component:"h1",variant:"h5",children:"Add Post"}),Object(O.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(O.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"text",label:"Add description",value:i,onChange:function(e){return s(e.target.value)},autoFocus:!0}),Object(O.jsx)("label",{for:"file-input",children:Object(O.jsx)(qe.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(O.jsx)("input",{id:"file-input",type:"file",style:{display:"none"},onChange:function(e){document.getElementById("preview").setAttribute("src",window.URL.createObjectURL(e.target.files[0]))}}),Object(O.jsx)("img",{id:"preview",width:"200px",height:"200px"}),Object(O.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){return f.apply(this,arguments)},className:t.submit,children:"Post"})]})]}),Object(O.jsx)(N.a,{mt:8,children:Object(O.jsx)(Yt,{})})]})}})]})})}),document.getElementById("root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.93dbe1c0.chunk.js.map