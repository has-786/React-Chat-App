(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[25],{370:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var n=a(206),r=a.n(n),c=a(3),i=a(207),o=a(5),s=a(0),l=a(4),u=a(378),p=a(205),d=a(305),m=a(371),b=a(46),j=a(209),h=a(144),f=a.n(h),g=a(263),x=a.n(g),O=(a(262),a(349)),y=a(113),v=a(304),w=a(8),C=a.n(w),k=a(9),A=a(126),D=(a(125),a(2));function I(){return Object(D.jsxs)(O.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(D.jsx)(b.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}A.a.configure();var N=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},tabLink:{display:"flex",alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function S(e){var t=N(),a=Object(l.c)((function(e){return e.userReducer.name})),n=Object(l.c)((function(e){return e.userReducer.email})),b=Object(s.useState)(""),h=Object(o.a)(b,2),g=h[0],y=h[1],w=Object(l.b)(),S=localStorage.getItem("token"),T=C.a.create({baseURL:k.a,headers:{Authorization:"bearer ".concat(S)}}),U=["January","February","March","April","May","June","July","August","September","October","November","December"];function F(){return(F=Object(i.a)(r.a.mark((function t(i){var o,s,l,u,p,d,m,b,j,h;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.preventDefault(),o=new Date,s=o.getUTCDate(),l=o.getUTCMonth(),u=o.getUTCFullYear(),p=o.getHours(),d=o.getMinutes(),m=o.getTime()/1e3,p=0==parseInt(p/10)?"0"+p:p,d=0==parseInt(d/10)?"0"+d:d,b="".concat(U[l]," ").concat(s,", ").concat(u," ").concat(p,":").concat(d),j=document.getElementById("file-input").files[0],(h=new FormData).append("uploaderName",a),h.append("uploaderEmail",n),h.append("desc",g),h.append("path",null===j||void 0===j?void 0:j.name),h.append("time",m),h.append("date",b),h.append("file",j),T.post("uploadpost",h).then((function(t){var a=t.data;1==a.status?(j&&(j.value=""),y(""),A.a.success(a.msg,{autoClose:1e3}),w({type:"add_post",payload:Object(c.a)(Object(c.a)({},a.post),{},{liked:!1,likeCount:0})}),e.history.replace("/")):A.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return A.a.error("Something went wrong",{autoClose:1e3})}));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(D.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(D.jsx)(d.a,{}),Object(D.jsxs)("div",{className:t.paper,children:[Object(D.jsx)(u.a,{className:t.avatar,children:Object(D.jsx)(f.a,{})}),Object(D.jsx)(O.a,{component:"h1",variant:"h5",children:"Add Post"}),Object(D.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(D.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,multiline:!0,rows:2,fullWidth:!0,type:"text",label:"Add description",value:g,onChange:function(e){return y(e.target.value)},autoFocus:!0}),"Add photo",Object(D.jsx)("label",{for:"file-input",children:Object(D.jsx)(x.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(D.jsx)("input",{id:"file-input",name:"file",type:"file",style:{display:"none"},onChange:function(e){document.getElementById("preview").setAttribute("src",window.URL.createObjectURL(e.target.files[0]))}}),Object(D.jsx)("img",{id:"preview",width:"200px",height:"200px"}),Object(D.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){return F.apply(this,arguments)},className:t.submit,children:"Post"})]})]}),Object(D.jsx)(j.a,{mt:8,children:Object(D.jsx)(I,{})})]})}}}]);
//# sourceMappingURL=25.387ee8c9.chunk.js.map