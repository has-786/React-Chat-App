(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[27],{375:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return U}));var n=a(206),r=a.n(n),i=a(3),c=a(207),o=a(5),s=a(0),l=a(4),u=a(381),p=a(360),d=a(152),b=a(376),m=a(46),j=a(192),g=a(138),h=a.n(g),f=a(146),y=a.n(f),O=(a(239),a(355)),v=a(113),x=a(151),w=a(9),C=a.n(w),k=a(8),I=a(129),A=(a(128),a(2));function D(){return Object(A.jsxs)(O.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(A.jsx)(m.b,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}I.a.configure();var R=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},tabLink:{display:"flex",alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function U(e){var t=R(),a=Object(l.c)((function(e){return e.userReducer.name})),n=Object(l.c)((function(e){return e.userReducer.email})),m=Object(l.c)((function(e){return e.userReducer.path})),g=Object(s.useState)(""),f=Object(o.a)(g,2),v=f[0],w=f[1],U=Object(l.b)(),L=localStorage.getItem("token"),N=C.a.create({baseURL:k.a,headers:{Authorization:"bearer ".concat(L)}}),S=["January","February","March","April","May","June","July","August","September","October","November","December"];function T(){return(T=Object(c.a)(r.a.mark((function t(c){var o,s,l,u,p,d,b,j,g,h;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),o=new Date,s=o.getUTCDate(),l=o.getUTCMonth(),u=o.getUTCFullYear(),p=o.getHours(),d=o.getMinutes(),b=o.getTime()/1e3,p=0==parseInt(p/10)?"0"+p:p,d=0==parseInt(d/10)?"0"+d:d,j="".concat(S[l]," ").concat(s,", ").concat(u," ").concat(p,":").concat(d),!(g=document.getElementById("file-input").files[0]).type.includes("image")&&!g.type.includes("video")){t.next=15;break}t.next=17;break;case 15:return I.a.error("Only images and videos are allowed"),t.abrupt("return",!1);case 17:(h=new FormData).append("uploaderName",a),h.append("uploaderEmail",n),h.append("uploaderDp",m),h.append("desc",v),h.append("path",null===g||void 0===g?void 0:g.name),h.append("time",b),h.append("date",j),h.append("file",g),N.post("uploadpost",h).then((function(t){var a=t.data;1==a.status?(g&&(g.value=""),w(""),I.a.success(a.msg,{autoClose:1e3}),U({type:"add_post",payload:Object(i.a)(Object(i.a)({},a.post),{},{liked:!1,likeCount:0})}),e.history.replace("/")):I.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return I.a.error("Something went wrong",{autoClose:1e3})}));case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(A.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(A.jsx)(d.a,{}),Object(A.jsxs)("div",{className:t.paper,children:[Object(A.jsx)(u.a,{className:t.avatar,children:Object(A.jsx)(h.a,{})}),Object(A.jsx)(O.a,{component:"h1",variant:"h5",children:"Add Post"}),Object(A.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(A.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,multiline:!0,rows:2,fullWidth:!0,type:"text",label:"Add description",value:v,onChange:function(e){return w(e.target.value)},autoFocus:!0}),"Add Profile Picure",Object(A.jsx)("label",{for:"file-input",children:Object(A.jsx)(y.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(A.jsx)("input",{id:"file-input",name:"file",type:"file",style:{display:"none"},onChange:function(e){var t=e.target.files[0].type;e.target.files[0].type;t.includes("image")?document.getElementById("previewI").setAttribute("src",window.URL.createObjectURL(e.target.files[0])):(document.getElementById("previewV").style.display="block",document.getElementById("previewV").setAttribute("src",window.URL.createObjectURL(e.target.files[0])))}}),Object(A.jsx)("img",{id:"previewI",width:"100%",height:"100%"}),Object(A.jsxs)("video",{id:"previewV",style:{display:"none"},width:"100%",height:"100%",controls:!0,children:[Object(A.jsx)("source",{type:"video/mp4"}),Object(A.jsx)("source",{type:"video/ogg"})]}),Object(A.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){return T.apply(this,arguments)},className:t.submit,children:"Post"})]})]}),Object(A.jsx)(j.a,{mt:8,children:Object(A.jsx)(D,{})})]})}}}]);
//# sourceMappingURL=27.d39818ed.chunk.js.map