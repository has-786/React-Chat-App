(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[13],{157:function(e,t,a){"use strict";a.d(t,"a",(function(){return ie}));var n=a(5),o=a(3),r=a(47),c=a(0),i=a.n(c),s=a(4),l=a(234),d=a.n(l),u=a(158),p=a.n(u),b=a(165),j=a.n(b),m=a(294),h=a(361),f=a(375),g=a(113),O=a(187),x=a(348),y=a(349),v=a(350),w=a(352),C=a(359),S=a(351),k=a(293),N=a(295),E=a(358),R=a(232),_=a.n(R),I=a(233),T=a.n(I),B=a(190),M=a.n(B),z=a(200),L=a.n(z),P=a(192),A=a.n(P),D=a(164),F=a.n(D),W=a(141),U=a.n(W),H=a(235),V=a.n(H),J=a(354),G=a(306),Y=a(378),$=a(115),q=a(371),K=a(360),Q=a(370),X=a(347),Z=a(9),ee=a.n(Z),te=a(8),ae=a(134),ne=(a(133),a(2));ae.a.configure();var oe=240,re=Object(g.a)((function(e){return{root:{display:"flex"},searchBar:{position:"relative"},drawer:Object(r.a)({},e.breakpoints.up("sm"),{width:oe,flexShrink:0}),appBar:Object(r.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(oe,"px)"),marginLeft:oe}),menuButton:Object(r.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:oe},content:{flexGrow:1,padding:e.spacing(3)}}})),ce=i.a.forwardRef((function(e,t){return Object(ne.jsx)(X.a,Object(o.a)({direction:"up",ref:t},e))}));function ie(e){var t=document.body,a=re(),o=(Object(O.a)(),i.a.useState(!1)),r=Object(n.a)(o,2),l=r[0],u=r[1],b=Object(s.b)(),g=function(){e.match.params.room?e.history.push("/"):u(!l)},R=Object(c.useState)([]),I=Object(n.a)(R,2),B=(I[0],I[1],i.a.useState(!1)),z=Object(n.a)(B,2),P=z[0],D=z[1],W=i.a.useState(!1),H=Object(n.a)(W,2),X=H[0],Z=H[1],oe=i.a.useState(""),ie=Object(n.a)(oe,2),se=(ie[0],ie[1],i.a.useState([])),le=Object(n.a)(se,2),de=le[0],ue=le[1],pe=localStorage.getItem("token"),be=ee.a.create({baseURL:te.a,headers:{Authorization:"bearer ".concat(pe)}}),je=function(){D(!1)},me=function(){Z(!1)};var he=function(e,t){var a;return function(){var n=arguments,o=this;clearTimeout(a),a=setTimeout((function(){e.apply(o,n)}),t)}}((function(e){e.preventDefault(),be.post("searchPeople",{searchstring:e.target.value}).then((function(e){var t=e.data;t.status?ue(t.users):ae.a.error("Something went wrong",{autoComplete:1500})}))}),300),fe=Object(s.c)((function(e){return e.userReducer.email})),ge=Object(s.c)((function(e){return e.userReducer.name})),Oe=Object(s.c)((function(e){return e.userReducer.path}));ge&&fe||ee.a.create({baseURL:te.a,headers:{Authorization:"bearer ".concat(pe)}}).get("getUser").then((function(e){var t=e.data;b({type:"load_user",payload:t})})).catch((function(e){return ae.a.error(e)}));var xe=[["Friends","/friends",M.a],["Chats","/chats",L.a],["Groups","/groups",U.a],["Enter group","/enterroom",_.a],["Create group","/newroom",p.a],["Sign out","/signin",T.a]],ye=Object(ne.jsxs)("div",{children:[Object(ne.jsx)("center",{children:Object(ne.jsx)(Y.a,{src:te.a+"/uploads/".concat(Oe,"/").concat(pe),style:{borderColor:"#00008B",color:"lightgrey",marginTop:"10px",width:"70px",height:"70px"},onClick:function(){Z(!0)}})}),Object(ne.jsx)("center",{children:Object(ne.jsx)("p",{children:ge})}),Object(ne.jsx)("div",{className:a.toolbar,style:{marginTop:"-60px"}}),Object(ne.jsx)(x.a,{}),Object(ne.jsx)(y.a,{children:xe.map((function(t,a){return Object(ne.jsxs)(v.a,{button:!0,onClick:function(){"Sign out"===t[0]?function(e,t){localStorage.removeItem("token"),t({type:"clear"}),e("/signin")}(e.history.push,b):e.history.push(t[1])},children:[Object(ne.jsx)(S.a,{style:{color:"#00008B"},children:Object(c.createElement)(t[2],{})}),Object(ne.jsx)(w.a,{primary:t[0]})]},t[0])}))})]});return Object(ne.jsxs)("div",{children:[Object(ne.jsxs)(J.a,{open:X,onClose:me,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(ne.jsx)(G.a,{id:"alert-dialog-title",children:"Change Profile Picture"}),Object(ne.jsx)("label",{for:"file-input",children:Object(ne.jsx)(F.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(ne.jsx)("input",{id:"file-input",name:"file",type:"file",style:{display:"none"},onChange:function(e){document.getElementById("preview").setAttribute("src",window.URL.createObjectURL(e.target.files[0]))}}),Object(ne.jsx)("center",{children:Object(ne.jsx)("img",{id:"preview",src:te.a+"/uploads/".concat(Oe,"/").concat(pe),width:"300px",height:"300px"})}),Object(ne.jsx)(E.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){var e=document.getElementById("file-input").files[0];if(document.getElementById("file-input").value){me(),document.getElementById("file-input").value="",document.getElementById("loader").style.display="block";var t=new FormData;t.append("file",e),t.append("path",e.name),be.post("updateDp",t).then((function(t){var a=t.data;1==a.status?(e&&(e.value=""),document.getElementById("loader").style.display="none",b({type:"load_user",payload:{name:ge,email:fe,path:e.name}}),localStorage.setItem("token",a.token)):ae.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return ae.a.error("Something went wrong",{autoClose:1e3})}))}},children:"Upload"})]}),Object(ne.jsxs)(J.a,{fullScreen:!0,open:P,onClose:je,TransitionComponent:ce,children:[Object(ne.jsx)(k.a,{className:a.searchBar,children:Object(ne.jsxs)(m.a,{children:[Object(ne.jsx)(N.a,{edge:"start",color:"inherit",onClick:je,"aria-label":"close",children:Object(ne.jsx)(A.a,{})}),Object(ne.jsx)(Q.a,{style:{backgroundColor:"white",borderRadius:"10px"},variant:"outlined",margin:"normal",fullWidth:!0,name:"search",label:"Search people",type:"text",onChange:function(e){e.preventDefault(),he(e)},autoComplete:"current-password",autoFocus:!0})]})}),Object(ne.jsx)(y.a,{children:de.map((function(t){return Object(ne.jsxs)(v.a,{button:!0,children:[Object(ne.jsx)(C.a,{children:Object(ne.jsx)(Y.a,{src:te.a+"/uploads/".concat(t.path,"/").concat(pe),style:{borderColor:"#00008B",color:"lightgrey"}})}),Object(ne.jsx)(w.a,{primary:t.name,secondary:t.email,onClick:function(){return e.history.push("/profile/".concat(t.email,"-").concat(t.name))}})]})}))})]}),Object(ne.jsx)(k.a,{position:"static",className:a.appBar,children:Object(ne.jsxs)(q.a,{style:{display:"flex"},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon tabs example",children:[Object(ne.jsx)(K.a,{icon:Object(ne.jsx)(d.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/")},"aria-label":"phone"}),Object(ne.jsx)(K.a,{icon:Object(ne.jsx)(L.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/chats")},"aria-label":"chat"}),Object(ne.jsx)(K.a,{icon:Object(ne.jsx)(U.a,{style:{color:"white"}}),onClick:function(){return e.history.push("/groups")},"aria-label":"group"}),Object(ne.jsx)(K.a,{icon:Object(ne.jsx)(V.a,{style:{color:"white"}}),onClick:function(){D(!0)},"aria-label":"search"}),Object(ne.jsx)(K.a,{icon:Object(ne.jsx)(j.a,{style:{color:"white"}}),"aria-label":"open drawer",edge:"start",onClick:g,className:a.menuButton})]})}),Object(ne.jsxs)("nav",{className:a.drawer,"aria-label":"mailbox folders",children:[Object(ne.jsx)("center",{children:Object(ne.jsx)($.a,{id:"loader",style:{marginTop:"100px",display:"none"}})}),Object(ne.jsx)(f.a,{smUp:!0,implementation:"css",children:Object(ne.jsx)(h.a,{container:t,variant:"temporary",anchor:"right",open:l,onClose:g,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:ye})}),Object(ne.jsx)(f.a,{xsDown:!0,implementation:"css",children:Object(ne.jsx)(h.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:ye})})]})]})}},244:function(e,t,a){"use strict";var n=a(124),o=a(125);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),c=(0,n(a(126)).default)(r.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");t.default=c},269:function(e,t,a){"use strict";var n=a(124),o=a(125);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),c=(0,n(a(126)).default)(r.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=c},296:function(e,t,a){"use strict";var n=a(1),o=a(7),r=a(0),c=(a(17),a(35)),i=a(44),s=r.forwardRef((function(e,t){var a=e.disableSpacing,i=void 0!==a&&a,s=e.classes,l=e.className,d=Object(o.a)(e,["disableSpacing","classes","className"]);return r.createElement("div",Object(n.a)({className:Object(c.a)(s.root,l,!i&&s.spacing),ref:t},d))}));t.a=Object(i.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(s)},297:function(e,t,a){"use strict";var n=a(1),o=a(7),r=a(0),c=(a(17),a(35)),i=a(44),s=r.forwardRef((function(e,t){var a=e.classes,i=e.className,s=Object(o.a)(e,["classes","className"]);return r.createElement("div",Object(n.a)({className:Object(c.a)(a.root,i),ref:t},s))}));s.muiName="ListItemSecondaryAction",t.a=Object(i.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(s)},308:function(e,t,a){"use strict";var n=a(1),o=a(7),r=a(0),c=(a(17),a(35)),i=a(44),s=r.forwardRef((function(e,t){var a=e.classes,i=e.className,s=e.dividers,l=void 0!==s&&s,d=Object(o.a)(e,["classes","className","dividers"]);return r.createElement("div",Object(n.a)({className:Object(c.a)(a.root,i,l&&a.dividers),ref:t},d))}));t.a=Object(i.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(s)},309:function(e,t,a){"use strict";var n=a(7),o=a(1),r=a(0),c=(a(17),a(35)),i=a(44),s=a(374),l=a(45),d=r.forwardRef((function(e,t){var a=e.children,i=e.classes,d=e.className,u=e.color,p=void 0===u?"default":u,b=e.component,j=void 0===b?"button":b,m=e.disabled,h=void 0!==m&&m,f=e.disableFocusRipple,g=void 0!==f&&f,O=e.focusVisibleClassName,x=e.size,y=void 0===x?"large":x,v=e.variant,w=void 0===v?"round":v,C=Object(n.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return r.createElement(s.a,Object(o.a)({className:Object(c.a)(i.root,d,"round"!==w&&i.extended,"large"!==y&&i["size".concat(Object(l.a)(y))],h&&i.disabled,{primary:i.primary,secondary:i.secondary,inherit:i.colorInherit}[p]),component:j,disabled:h,focusRipple:!g,focusVisibleClassName:Object(c.a)(i.focusVisible,O),ref:t},C),r.createElement("span",{className:i.label},a))}));t.a=Object(i.a)((function(e){return{root:Object(o.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(d)},314:function(e,t,a){"use strict";var n=a(124),o=a(125);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),c=(0,n(a(126)).default)(r.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=c},315:function(e,t,a){"use strict";var n=a(124),o=a(125);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),c=(0,n(a(126)).default)(r.createElement("path",{d:"M2 20h2c.55 0 1-.45 1-1v-9c0-.55-.45-1-1-1H2v11zm19.83-7.12c.11-.25.17-.52.17-.8V11c0-1.1-.9-2-2-2h-5.5l.92-4.65c.05-.22.02-.46-.08-.66-.23-.45-.52-.86-.88-1.22L14 2 7.59 8.41C7.21 8.79 7 9.3 7 9.83v7.84C7 18.95 8.05 20 9.34 20h8.11c.7 0 1.36-.37 1.72-.97l2.66-6.15z"}),"ThumbUpAlt");t.default=c},316:function(e,t,a){"use strict";var n=a(124),o=a(125);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),c=(0,n(a(126)).default)(r.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");t.default=c},372:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return de}));var n=a(3),o=a(5),r=a(0),c=a.n(r),i=a(4),s=a(46),l=a(113),d=a(35),u=a(1),p=a(7),b=(a(17),a(355)),j=a(44),m=r.forwardRef((function(e,t){var a=e.classes,n=e.className,o=e.raised,c=void 0!==o&&o,i=Object(p.a)(e,["classes","className","raised"]);return r.createElement(b.a,Object(u.a)({className:Object(d.a)(a.root,n),elevation:c?8:1,ref:t},i))})),h=Object(j.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(m),f=a(353),g=r.forwardRef((function(e,t){var a=e.action,n=e.avatar,o=e.classes,c=e.className,i=e.component,s=void 0===i?"div":i,l=e.disableTypography,b=void 0!==l&&l,j=e.subheader,m=e.subheaderTypographyProps,h=e.title,g=e.titleTypographyProps,O=Object(p.a)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),x=h;null==x||x.type===f.a||b||(x=r.createElement(f.a,Object(u.a)({variant:n?"body2":"h5",className:o.title,component:"span",display:"block"},g),x));var y=j;return null==y||y.type===f.a||b||(y=r.createElement(f.a,Object(u.a)({variant:n?"body2":"body1",className:o.subheader,color:"textSecondary",component:"span",display:"block"},m),y)),r.createElement(s,Object(u.a)({className:Object(d.a)(o.root,c),ref:t},O),n&&r.createElement("div",{className:o.avatar},n),r.createElement("div",{className:o.content},x,y),a&&r.createElement("div",{className:o.action},a))})),O=Object(j.a)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(g),x=r.forwardRef((function(e,t){var a=e.classes,n=e.className,o=e.component,c=void 0===o?"div":o,i=Object(p.a)(e,["classes","className","component"]);return r.createElement(c,Object(u.a)({className:Object(d.a)(a.root,n),ref:t},i))})),y=Object(j.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(x),v=r.forwardRef((function(e,t){var a=e.disableSpacing,n=void 0!==a&&a,o=e.classes,c=e.className,i=Object(p.a)(e,["disableSpacing","classes","className"]);return r.createElement("div",Object(u.a)({className:Object(d.a)(o.root,c,!n&&o.spacing),ref:t},i))})),w=Object(j.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(v),C=a(378),S=a(295),k=a(316),N=a.n(k),E=a(314),R=a.n(E),_=a(315),I=a.n(_),T=a(158),B=a.n(T),M=a(309),z=a(349),L=a(350),P=a(352),A=a(297),D=a(359),F=a(354),W=a(296),U=a(308),H=a(306),V=a(348),J=a(318),G=a(19),Y=r.forwardRef((function(e,t){var a,n=e.classes,o=e.className,c=e.component,i=void 0===c?"li":c,s=e.disableGutters,l=void 0!==s&&s,b=e.ListItemClasses,j=e.role,m=void 0===j?"menuitem":j,h=e.selected,f=e.tabIndex,g=Object(p.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==f?f:-1),r.createElement(L.a,Object(u.a)({button:!0,role:m,tabIndex:a,component:i,selected:h,disableGutters:l,classes:Object(u.a)({dense:n.dense},b),className:Object(d.a)(n.root,o,h&&n.selected,!l&&n.gutters),ref:t},g))})),$=Object(j.a)((function(e){return{root:Object(u.a)({},e.typography.body1,Object(G.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(u.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(Y),q=a(260),K=a(261),Q=a(358),X=a(269),Z=a.n(X),ee=a(244),te=a.n(ee),ae=a(370),ne=a(157),oe=a(8),re=a(9),ce=a.n(re),ie=a(134),se=(a(133),a(2));ie.a.configure();var le=Object(l.a)((function(e){return{root:{maxWidth:500,margin:"auto",marginBottom:"10px"},media:{paddingTop:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"lightgrey"}}}));function de(e){var t=this,a=le(),l=c.a.useState(!1),d=Object(o.a)(l,2),u=(d[0],d[1],c.a.useState(null)),p=Object(o.a)(u,2),b=p[0],j=p[1],m=c.a.useState(null),g=Object(o.a)(m,2),x=g[0],v=g[1],k=c.a.useState(0),E=Object(o.a)(k,2),_=E[0],T=E[1],G=c.a.useState(0),Y=Object(o.a)(G,2),X=Y[0],ee=Y[1],re=c.a.useState(0),de=Object(o.a)(re,2),ue=de[0],pe=de[1],be=c.a.useState(""),je=Object(o.a)(be,2),me=je[0],he=je[1],fe=c.a.useState(""),ge=Object(o.a)(fe,2),Oe=ge[0],xe=ge[1],ye=c.a.useState({}),ve=Object(o.a)(ye,2),we=ve[0],Ce=ve[1],Se=c.a.useState(null),ke=Object(o.a)(Se,2),Ne=ke[0],Ee=ke[1],Re=c.a.useState(!1),_e=Object(o.a)(Re,2),Ie=_e[0],Te=_e[1],Be=c.a.useState(!1),Me=Object(o.a)(Be,2),ze=(Me[0],Me[1],Object(i.c)((function(e){return e.userReducer.email}))),Le=Object(i.c)((function(e){return e.userReducer.path})),Pe=Object(i.c)((function(e){return e.userReducer.name})),Ae=function(){Te(!1)},De=function(){j(null)},Fe=function(){v(null)},We=localStorage.getItem("token"),Ue=Object(i.b)(),He=Object(i.c)((function(e){return e.postReducer.exist})),Ve=Object(i.c)((function(e){return e.postReducer.post})),Je=function(e){if(we[e]){var t=JSON.parse(JSON.stringify(we));t[e]=!1,Ce(t)}else{var a=JSON.parse(JSON.stringify(we));a[e]=!0,Ce(a)}},Ge=ce.a.create({baseURL:oe.a,headers:{Authorization:"bearer ".concat(We)}});Object(r.useEffect)((function(){console.log(Ve),He||Ge.get("getPost").then((function(t){var a=t.data;1==a.status?(Ue({type:"load_post",payload:a.post}),e.history.replace("/")):ie.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return ie.a.error("Something went wrong",{autoClose:1e3})}))}),[]);var Ye=function(e,t,a){var n="";if("comment"===e?(n=document.getElementById(t).value,document.getElementById(t).value=""):(n=document.getElementById(t+a).value,document.getElementById(t+a).value=""),""!==n){var o={name:Pe,email:ze,path:Le,content:n,reply:[]};Ge.post("addComment",{_id:t,type:e,comment:o,index:a}).then((function(n){1==n.data.status?(Ue({type:"add_".concat(e),payload:{_id:t,comment:o,index:a}}),ie.a.success("Your ".concat(e," was added"),{autoClose:1e3})):ie.a.error("Something went wrong",{autoClose:2e3})})).catch((function(e){return ie.a.error("Something went wrong "+e,{autoClose:2e3})}))}},$e=function(){Ge.post("deleteComment",{type:me,_id:Oe,index1:ue,index:X}).then((function(e){1==e.data.status?(Ue({type:"delete_".concat(me),payload:{_id:Oe,index1:ue,index:X}}),ie.a.success("Your ".concat(me," was deleted"),{autoClose:1e3})):ie.a.error("Something went wrong",{autoClose:2e3})})).catch((function(e){return ie.a.error("Something went wrong "+e,{autoClose:2e3})})),Fe()};function qe(e){var t=e.comment,a=Object(r.useState)(t),n=Object(o.a)(a,2),c=n[0],i=n[1];return Object(se.jsxs)(F.a,{open:Ie,onClose:Ae,"aria-labelledby":"form-dialog-title",children:[Object(se.jsx)(H.a,{id:"form-dialog-title",children:"Edit comment"}),Object(se.jsx)(U.a,{children:Object(se.jsx)(ae.a,{autoFocus:!0,margin:"dense",id:"name",label:"Write comment",value:c,onChange:function(e){return i(e.target.value)},type:"text",fullWidth:!0})}),Object(se.jsxs)(W.a,{children:[Object(se.jsx)(Q.a,{onClick:function(){Fe(),Ae(),i("")},color:"primary",children:"Cancel"}),Object(se.jsx)(Q.a,{onClick:function(){!function(e,t,a,n,o){var r={name:Pe,email:ze,path:Le,content:o,reply:[]};Ge.post("editComment",{type:e,_id:t,index1:a,index:n,commentData:r}).then((function(o){1==o.data.status?(Ue({type:"edit_".concat(e),payload:{_id:t,index1:a,index:n,commentData:r}}),ie.a.success("Your ".concat(e," was edited"),{autoClose:1e3})):ie.a.error("Something went wrong",{autoClose:2e3})})).catch((function(e){return ie.a.error("Something went wrong "+e,{autoClose:2e3})}))}(me,Oe,ue,X,c),Fe(),Ae(),i("")},color:"primary",children:"Confirm"})]})]})}var Ke=function e(a,n,o,r,c){return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(z.a,{children:null===o||void 0===o?void 0:o.map((function(o,i){return Object(se.jsxs)(L.a,{children:[Object(se.jsx)(D.a,{children:Object(se.jsx)(C.a,{src:oe.a+"/uploads/".concat(o.path,"/").concat(We),children:Object(se.jsx)(te.a,{color:"lightgrey"})})}),Object(se.jsx)(P.a,{secondary:o.content,primary:o.name}),Object(se.jsxs)(A.a,{children:["comment"===r?Object(se.jsx)(Q.a,{color:"primary","data-toggle":"collapse","data-target":"#reply"+n+i,children:"Reply"}):null,Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(S.a,{"aria-label":"settings",children:Object(se.jsx)(R.a,{onClick:function(e){return function(e,t,a,n,o,r){ee(o),pe(n),xe(a),he(t),Ee(r),v(e.currentTarget)}(e,r,n,i,c,o.content)}})}),Object(se.jsxs)(J.a,{id:"simple-menu-comment",anchorEl:x,keepMounted:!0,open:Boolean(x),onClose:Fe,children:[ze===o.email?Object(se.jsx)($,{onClick:function(){Te(!0)},children:"Edit"}):null,ze===o.email&&ze===a?Object(se.jsx)($,{onClick:$e.bind(t),children:"Delete"}):null]})]})]}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),"comment"===r?Object(se.jsx)(A.a,{id:"reply"+n+i,class:"collapse",style:{paddingLeft:"50px"},children:e(a,n,o.reply,"reply",i)}):null]})}))}),Object(se.jsxs)(se.Fragment,{children:["reply"===r?Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(ae.a,{label:"Add a reply",id:n+c,style:{marginLeft:"5px",width:"92%"}}),Object(se.jsx)(Z.a,{color:"secondary",style:{float:"right",marginTop:"15px"},onClick:function(){return Ye("reply",n,c)}})]}):null,Object(se.jsx)("br",{})]})]})},Qe=function(e){var t=Ve[e]._id;Ue({type:"hide_post",payload:t}),De()},Xe=function(e,t){var a=Ve[t]._id;ce.a.create({baseURL:oe.a,headers:{Authorization:"bearer ".concat(We)}}).post("deletePost",{email:e,_id:a}).then((function(e){1==e.data.status?(Ue({type:"hide_post",payload:a}),ie.a.success("Post was deleted",{autoClose:1500})):ie.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return ie.a.error("Something went wrong",{autoClose:1e3})})),De()},Ze=function(e,t,a){Ue({type:"like_post",payload:{_id:t,liked:a}}),ce.a.create({baseURL:oe.a,headers:{Authorization:"bearer ".concat(We)}}).post("likePost",{email:e,_id:t,liked:a}).then((function(e){1==e.data.status||ie.a.error("Something went wrong",{autoClose:1e3})})).catch((function(e){return ie.a.error("Something went wrong",{autoClose:1e3})}))};return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("div",{style:{position:"fixed",width:"100%",zIndex:10},children:Object(se.jsx)(ne.a,Object(n.a)({},e))}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),Object(se.jsxs)("div",{children:[Object(se.jsx)(M.a,{color:"primary",style:{height:"45px",width:"45px",float:"right"},"aria-label":"New Room",onClick:function(){return e.history.push("/uploadpost")},children:Object(se.jsx)(B.a,{})}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),Object(se.jsx)(V.a,{}),Object(se.jsxs)(q.a,{component:"main",maxWidth:"xl",children:[Object(se.jsx)(K.a,{}),null===Ve||void 0===Ve?void 0:Ve.map((function(n,o){return Object(se.jsxs)(h,{className:a.root,children:[Object(se.jsx)(O,{avatar:Object(se.jsx)(C.a,{"aria-label":"recipe",className:a.avatar,src:"".concat(oe.a,"/uploads/").concat(n.uploaderDp,"/").concat(We),onClick:function(){return e.history.push("/profile/".concat(n.uploaderEmail,"-").concat(n.uploaderName))}}),action:Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(S.a,{"aria-label":"settings",children:Object(se.jsx)(R.a,{onClick:function(e){return function(e,t){T(t),j(e.currentTarget)}(e,o)}})}),Object(se.jsxs)(J.a,{id:"simple-menu",anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:De,children:[Object(se.jsx)($,{onClick:Qe.bind(t,_),children:"Hide"}),ze===Ve[_].uploaderEmail?Object(se.jsx)($,{onClick:Xe.bind(t,ze,_),children:"Delete"}):null]})]}),title:n.uploaderName,subheader:n.date}),Object(se.jsx)(y,{children:Object(se.jsxs)(f.a,{paragraph:!0,children:[n.desc.split(" ").length<=30||we[o]?n.desc:n.desc.split(" ").slice(0,30).join(" "),"\xa0\xa0",n.desc.split(" ").length>30?Object(se.jsx)(s.b,{style:{textDecoration:"none",fontSize:"15px"},onClick:Je.bind(t,o),children:we[o]?"read less":"read more"}):null]})}),"undefined"!=n.path&&(n.path.includes(".jpg")||n.path.includes(".png")||n.path.includes(".jpeg"))?Object(se.jsx)("img",{src:"".concat(oe.a,"/uploads/").concat(n.path,"/").concat(We),width:"100%",height:"100%"}):"undefined"!=n.path&&(n.path.includes(".mp4")||n.path.includes(".wav")||n.path.includes(".ogg"))?Object(se.jsxs)("video",{width:"100%",height:"100%",controls:!0,children:[Object(se.jsx)("source",{src:oe.a+"/uploads/".concat(n.path,"/").concat(We),type:"video/mp4"}),Object(se.jsx)("source",{src:oe.a+"/uploads/".concat(n.path,"/").concat(We),type:"video/wav"}),Object(se.jsx)("source",{src:oe.a+"/uploads/".concat(n.path,"/").concat(We),type:"video/ogg"})]}):null,Object(se.jsxs)(w,{disableSpacing:!0,children:[Object(se.jsx)(S.a,{"aria-label":"add to favorites",children:Object(se.jsx)(I.a,{onClick:Ze.bind(t,ze,n._id,n.liked),color:n.liked?"Primary":""})})," ",n.likeCount,Object(se.jsx)(S.a,{"aria-label":"share",children:Object(se.jsx)(N.a,{})})]}),Object(se.jsx)(y,{children:Object(se.jsx)(Q.a,{color:"secondary","data-toggle":"collapse","data-target":"#reply"+n._id,style:{textTransform:"none",float:"right",marginTop:"-67px",fontSize:"17px"},children:"Comments"})}),Object(se.jsx)(y,{id:"reply"+n._id,class:"collapse",style:{marginTop:"-30px"},children:Ke(n.uploaderEmail,n._id,n.comment,"comment")}),Object(se.jsx)(ae.a,{label:"Add a comment",id:n._id,style:{width:"92%",marginLeft:"5px",marginTop:"-20px"}}),Object(se.jsx)(Z.a,{color:"secondary",style:{float:"right",marginTop:"0px"},onClick:function(){return Ye("comment",n._id)}}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{})]})}))]}),Object(se.jsx)(qe,{comment:Ne})]})]})}}}]);
//# sourceMappingURL=13.d02b4d1c.chunk.js.map